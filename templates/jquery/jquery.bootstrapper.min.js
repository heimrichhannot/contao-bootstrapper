(function(b){var a={init:function(){this.initFastClick();this.toggleCollapseFromHash();this.openModalFromHash();this.initModalNavigation();this.initModalRemoteUpdate();this.initNavbar();this.navFollowLinkIfItemsOpen();this.supportNestedDropdowns();this.addChosenSupport();this.initDateTimePicker();this.initSlider();this.setUrlHistoryFromModalLink();this.loadModalFromUrl();this.onCloseModal();this.initCarouselProgressBar();this.initGalleryCarousel();this.addPlaceholderTagSupport();this.initJQueryValidation();this.initAjaxForms();this.initScrollClass();this.megaMenuEqualHeight()},megaMenuEqualHeight:function(){b('[data-equal-height="ul.nav"]').each(function(){var e=b(this),d=0,c=0;e.find(e.data("equal-height")).each(function(){var f=b(this).actual("innerHeight");actualOuterHeight=b(this).actual("outerHeight",{includeMargin:true});if(actualOuterHeight>c){c=actualOuterHeight}if(f>d){d=f}});e.height(c);e.find(".submenu-wrapper").height(d)})},initSelect2:function(){b("select").select2({minimumResultsForSearch:10})},supportNestedDropdowns:function(){b("ul.dropdown-menu").on("click",'a[data-toggle="dropdown"]',function(c){c.preventDefault();c.stopPropagation();b("ul.dropdown-menu [data-toggle=dropdown]").parent().removeClass("open");b(this).parent().addClass("open")})},initScrollClass:function(){b(window).on("scroll",function(d){var c=b(window).scrollTop();b('[data-spy="scroll"]').each(function(){var f=b(this),e=f.data("scrollclass"),g=f.data("offset")?f.data("offset"):1;if(e==null){return true}if(c>g){f.addClass(e)}else{f.removeClass(e)}})})},initNavbar:function(){b(".navbar-collapse").on("shown.bs.collapse",function(){b("body").addClass("navbar-xs-open")});b(".navbar-collapse").on("hide.bs.collapse",function(){b("body").removeClass("navbar-xs-open")})},addPlaceholderTagSupport:function(){if(!Modernizr.input.placeholder){b("input, textarea").placeholder()}},initJQueryValidation:function(){if(b("form.jquery-validation").length>0){b("form.jquery-validation").validate({errorClass:"error",focusInvalid:false})}},initAjaxForms:function(){b("body").on("submit",".ajax-form",function(f){console.log("fo");var c=b(this),d=c.serializeArray();f.preventDefault();d.push({name:"isAjax",value:"1"});b.ajax(c.attr("action"),{data:d,method:b(this).attr("method"),success:function(g){var e,g="<div>"+g+"</div>";if(c.data("replace")){e=b(g).find(c.data("replace"));if(e!==undefined){b(c.data("replace")).html(e)}}else{e=b(g).find("#"+c.attr("id"));if(e.length<1){c.html(g)}else{c.replaceWith(e)}}}})})},initGalleryCarousel:function(){b(".ce_gallery ul").each(function(){var c=b(this);if(c.find("li").length>1){c.elastislide()}})},initCarouselProgressBar:function(){var i=0,h=b(".carousel-progress .progress-bar"),j=h.find(".sr-only"),g=b(".carousel"),d=200,f=Math.floor(d*100/parseInt(g.data("interval")));function e(){if(i>0){h.removeClass("carousel-transition")}if(i>=100){j.text("100%");h.css({width:"100%"});i=100;g.carousel("next");h.addClass("carousel-transition");return false}h.css({width:i+"%"});j.text(i+"%");i+=f}var c=setInterval(e,d);g.carousel({interval:false,pause:false}).on("slide.bs.carousel",function(){clearInterval(c)}).on("slid.bs.carousel",function(){i=0;c=setInterval(e,d)});g.hover(function(){clearInterval(c)},function(){c=setInterval(e,d)});g.on("click",".carousel-control, .carousel-indicators",function(){i=0;clearInterval(c);h.addClass("carousel-transition").css({width:"0%"})})},onCloseModal:function(){if(b("body.ie9, body.ie8, body.ie7, body.ie6").length>0){return}b(".modal").on("hide.bs.modal",function(h){var g=b(this),c=g.find(".layout_full"),d=b("body").data("page-alias")=="startseite"?"":b("body").data("page-alias"),k=g.data("history-delete"),j=c.data("history-delete"),i=c.data("history-base"),f=location.href.replace("/"+(j?j:k),"");f=d!=i?f.replace(i,d):f;history.pushState(null,null,f)})},setUrlHistoryFromModalLink:function(){b('[data-toggle="modal"]').on("click",function(d){var c=b(this);b(".modal").data("history-back",window.location);history.pushState(null,null,c.attr("href"))})},loadModalFromUrl:function(){b(".modal.in").modal("show")},initDateTimePicker:function(){var c={lang:b("html").attr("lang"),startDate:new Date(),icons:{time:"fa fa-clock-o",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down"}};b(".datepicker").each(function(d,e){var f=b(this),g=f.find("input");f.datetimepicker(b.extend({timepicker:false,format:g.data("format")},c))});b(".timepicker").each(function(d,e){var f=b(this),g=f.find("input");g.datetimepicker(b.extend({datepicker:false,step:g.data("steps"),format:g.data("format")},c));f.find(".input-group-addon").click(function(){g.datetimepicker("show")})})},initSlider:function(){b("input.slider").slider()},toggleCollapseFromHash:function(){var c=b(location.hash+".collapse");if(!location.hash||c.length<1){return false}c.closest(".panel-group").find(".collapse").removeClass("in");c.addClass("in")},openModalFromHash:function(){var c=b(location.hash);if(!location.hash||c.length<1||!c.hasClass("modal")){return false}c.modal("show")},initModalNavigation:function(){b(".modal").on("click",".modal-next",function(c){c.preventDefault();window.location=b(this).attr("href")})},initModalRemoteUpdate:function(){b("body").on("hidden.bs.modal",".modal",function(){b(this).removeData("bs.modal")});b('a[data-toggle="modal"][data-remote]').on("click",function(f){f.preventDefault();var d=b(this),c=b(d.data("target"));b.ajax({url:d.attr("href")}).done(function(e){c.find(".modal-content").replaceWith(e).end().modal()});return false})},navFollowLinkIfItemsOpen:function(){b(".nav-collapse").on("click",'a[data-toggle="dropdown"]',function(f){var d=b(this),c=d.parent("li");if(this.href!==undefined&&c.hasClass("open")){if(this.target.length){window.open(this.href,this.target)}else{window.location=this.href}}})},addChosenSupport:function(){b(".tl_chosen").chosen({search_contains:true,no_results_text:"Keine Ergebnisse fÃ¼r",placeholder_text_multiple:" ",placeholder_text_single:" ",width:"100%"}).change(function(d,c){b(this).trigger("chosen:updated")})},initFastClick:function(){FastClick.attach(document.body)}};b(document).ready(function(){if((typeof b().emulateTransitionEnd=="function")){a.init()}})})(jQuery);