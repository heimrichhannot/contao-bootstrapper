var moment=require("../../moment");exports.add={setUp:function(a){moment.createFromInputFallback=function(){throw new Error("input not handled by moment")};a()},"add short reverse args":function(i){i.expect(16);var f=moment(),e,h,g;f.year(2011);f.month(9);f.date(12);f.hours(6);f.minutes(7);f.seconds(8);f.milliseconds(500);i.equal(f.add({ms:50}).milliseconds(),550,"Add milliseconds");i.equal(f.add({s:1}).seconds(),9,"Add seconds");i.equal(f.add({m:1}).minutes(),8,"Add minutes");i.equal(f.add({h:1}).hours(),7,"Add hours");i.equal(f.add({d:1}).date(),13,"Add date");i.equal(f.add({w:1}).date(),20,"Add week");i.equal(f.add({M:1}).month(),10,"Add month");i.equal(f.add({y:1}).year(),2012,"Add year");i.equal(f.add({Q:1}).month(),1,"Add quarter");e=moment([2010,0,31]).add({M:1});h=moment([2010,1,28]).subtract({M:1});g=moment([2010,1,28]).subtract({Q:1});i.equal(e.month(),1,"add month, jan 31st to feb 28th");i.equal(e.date(),28,"add month, jan 31st to feb 28th");i.equal(h.month(),0,"subtract month, feb 28th to jan 28th");i.equal(h.date(),28,"subtract month, feb 28th to jan 28th");i.equal(g.month(),10,"subtract quarter, feb 28th 2010 to nov 28th 2009");i.equal(g.date(),28,"subtract quarter, feb 28th 2010 to nov 28th 2009");i.equal(g.year(),2009,"subtract quarter, feb 28th 2010 to nov 28th 2009");i.done()},"add long reverse args":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add({milliseconds:50}).milliseconds(),550,"Add milliseconds");c.equal(b.add({seconds:1}).seconds(),9,"Add seconds");c.equal(b.add({minutes:1}).minutes(),8,"Add minutes");c.equal(b.add({hours:1}).hours(),7,"Add hours");c.equal(b.add({days:1}).date(),13,"Add date");c.equal(b.add({weeks:1}).date(),20,"Add week");c.equal(b.add({months:1}).month(),10,"Add month");c.equal(b.add({years:1}).year(),2012,"Add year");c.equal(b.add({quarters:1}).month(),1,"Add quarter");c.done()},"add long singular reverse args":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add({millisecond:50}).milliseconds(),550,"Add milliseconds");c.equal(b.add({second:1}).seconds(),9,"Add seconds");c.equal(b.add({minute:1}).minutes(),8,"Add minutes");c.equal(b.add({hour:1}).hours(),7,"Add hours");c.equal(b.add({day:1}).date(),13,"Add date");c.equal(b.add({week:1}).date(),20,"Add week");c.equal(b.add({month:1}).month(),10,"Add month");c.equal(b.add({year:1}).year(),2012,"Add year");c.equal(b.add({quarter:1}).month(),1,"Add quarter");c.done()},"add string long reverse args":function(e){e.expect(10);var d=moment(),c;d.year(2011);d.month(9);d.date(12);d.hours(6);d.minutes(7);d.seconds(8);d.milliseconds(500);c=d.clone();e.equal(d.add("millisecond",50).milliseconds(),550,"Add milliseconds");e.equal(d.add("second",1).seconds(),9,"Add seconds");e.equal(d.add("minute",1).minutes(),8,"Add minutes");e.equal(d.add("hour",1).hours(),7,"Add hours");e.equal(d.add("day",1).date(),13,"Add date");e.equal(d.add("week",1).date(),20,"Add week");e.equal(d.add("month",1).month(),10,"Add month");e.equal(d.add("year",1).year(),2012,"Add year");e.equal(c.add("day","01").date(),13,"Add date");e.equal(d.add("quarter",1).month(),1,"Add quarter");e.done()},"add string long singular reverse args":function(e){e.expect(10);var d=moment(),c;d.year(2011);d.month(9);d.date(12);d.hours(6);d.minutes(7);d.seconds(8);d.milliseconds(500);c=d.clone();e.equal(d.add("milliseconds",50).milliseconds(),550,"Add milliseconds");e.equal(d.add("seconds",1).seconds(),9,"Add seconds");e.equal(d.add("minutes",1).minutes(),8,"Add minutes");e.equal(d.add("hours",1).hours(),7,"Add hours");e.equal(d.add("days",1).date(),13,"Add date");e.equal(d.add("weeks",1).date(),20,"Add week");e.equal(d.add("months",1).month(),10,"Add month");e.equal(d.add("years",1).year(),2012,"Add year");e.equal(c.add("days","01").date(),13,"Add date");e.equal(d.add("quarters",1).month(),1,"Add quarter");e.done()},"add string short reverse args":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add("ms",50).milliseconds(),550,"Add milliseconds");c.equal(b.add("s",1).seconds(),9,"Add seconds");c.equal(b.add("m",1).minutes(),8,"Add minutes");c.equal(b.add("h",1).hours(),7,"Add hours");c.equal(b.add("d",1).date(),13,"Add date");c.equal(b.add("w",1).date(),20,"Add week");c.equal(b.add("M",1).month(),10,"Add month");c.equal(b.add("y",1).year(),2012,"Add year");c.equal(b.add("Q",1).month(),1,"Add quarter");c.done()},"add string long":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add(50,"millisecond").milliseconds(),550,"Add milliseconds");c.equal(b.add(1,"second").seconds(),9,"Add seconds");c.equal(b.add(1,"minute").minutes(),8,"Add minutes");c.equal(b.add(1,"hour").hours(),7,"Add hours");c.equal(b.add(1,"day").date(),13,"Add date");c.equal(b.add(1,"week").date(),20,"Add week");c.equal(b.add(1,"month").month(),10,"Add month");c.equal(b.add(1,"year").year(),2012,"Add year");c.equal(b.add(1,"quarter").month(),1,"Add quarter");c.done()},"add string long singular":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add(50,"milliseconds").milliseconds(),550,"Add milliseconds");c.equal(b.add(1,"seconds").seconds(),9,"Add seconds");c.equal(b.add(1,"minutes").minutes(),8,"Add minutes");c.equal(b.add(1,"hours").hours(),7,"Add hours");c.equal(b.add(1,"days").date(),13,"Add date");c.equal(b.add(1,"weeks").date(),20,"Add week");c.equal(b.add(1,"months").month(),10,"Add month");c.equal(b.add(1,"years").year(),2012,"Add year");c.equal(b.add(1,"quarters").month(),1,"Add quarter");c.done()},"add string short":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add(50,"ms").milliseconds(),550,"Add milliseconds");c.equal(b.add(1,"s").seconds(),9,"Add seconds");c.equal(b.add(1,"m").minutes(),8,"Add minutes");c.equal(b.add(1,"h").hours(),7,"Add hours");c.equal(b.add(1,"d").date(),13,"Add date");c.equal(b.add(1,"w").date(),20,"Add week");c.equal(b.add(1,"M").month(),10,"Add month");c.equal(b.add(1,"y").year(),2012,"Add year");c.equal(b.add(1,"Q").month(),1,"Add quarter");c.done()},"add strings string short args":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add("ms","50").milliseconds(),550,"Add milliseconds");c.equal(b.add("s","1").seconds(),9,"Add seconds");c.equal(b.add("m","1").minutes(),8,"Add minutes");c.equal(b.add("h","1").hours(),7,"Add hours");c.equal(b.add("d","1").date(),13,"Add date");c.equal(b.add("w","1").date(),20,"Add week");c.equal(b.add("M","1").month(),10,"Add month");c.equal(b.add("y","1").year(),2012,"Add year");c.equal(b.add("Q","1").month(),1,"Add quarter");c.done()},"subtract strings string short args":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.subtract("ms","50").milliseconds(),450,"Subtract milliseconds");c.equal(b.subtract("s","1").seconds(),7,"Subtract seconds");c.equal(b.subtract("m","1").minutes(),6,"Subtract minutes");c.equal(b.subtract("h","1").hours(),5,"Subtract hours");c.equal(b.subtract("d","1").date(),11,"Subtract date");c.equal(b.subtract("w","1").date(),4,"Subtract week");c.equal(b.subtract("M","1").month(),8,"Subtract month");c.equal(b.subtract("y","1").year(),2010,"Subtract year");c.equal(b.subtract("Q","1").month(),5,"Subtract quarter");c.done()},"add strings string short":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.add("50","ms").milliseconds(),550,"Add milliseconds");c.equal(b.add("1","s").seconds(),9,"Add seconds");c.equal(b.add("1","m").minutes(),8,"Add minutes");c.equal(b.add("1","h").hours(),7,"Add hours");c.equal(b.add("1","d").date(),13,"Add date");c.equal(b.add("1","w").date(),20,"Add week");c.equal(b.add("1","M").month(),10,"Add month");c.equal(b.add("1","y").year(),2012,"Add year");c.equal(b.add("1","Q").month(),1,"Add quarter");c.done()},"subtract strings string short":function(c){c.expect(9);var b=moment();b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);c.equal(b.subtract("50","ms").milliseconds(),450,"Subtract milliseconds");c.equal(b.subtract("1","s").seconds(),7,"Subtract seconds");c.equal(b.subtract("1","m").minutes(),6,"Subtract minutes");c.equal(b.subtract("1","h").hours(),5,"Subtract hours");c.equal(b.subtract("1","d").date(),11,"Subtract date");c.equal(b.subtract("1","w").date(),4,"Subtract week");c.equal(b.subtract("1","M").month(),8,"Subtract month");c.equal(b.subtract("1","y").year(),2010,"Subtract year");c.equal(b.subtract("1","Q").month(),5,"Subtract quarter");c.done()},"add across DST":function(k){if(new Date(2011,2,13,5,0,0).getHours()!==5){k.done();return}var g=moment(new Date(2011,2,12,5,0,0)),f=moment(new Date(2011,2,12,5,0,0)),j=moment(new Date(2011,2,12,5,0,0)),i=moment(new Date(2011,2,12,5,0,0)),h=moment(new Date(2011,2,12,5,0,0));g.add(1,"days");f.add(24,"hours");j.add(1,"months");h.add(1,"quarter");k.equal(g.hours(),5,"adding days over DST difference should result in the same hour");if(f.isDST()&&!i.isDST()){k.equal(f.hours(),6,"adding hours over DST difference should result in a different hour")}else{if(!f.isDST()&&i.isDST()){k.equal(f.hours(),4,"adding hours over DST difference should result in a different hour")}else{k.equal(f.hours(),5,"adding hours over DST difference should result in a same hour if the timezone does not have daylight savings time")}}k.equal(j.hours(),5,"adding months over DST difference should result in the same hour");k.equal(h.hours(),5,"adding quarters over DST difference should result in the same hour");k.done()}};