var moment=require("../../moment");exports.isValid={setUp:function(b){moment.createFromInputFallback=function(){throw new Error("input not handled by moment")};b()},"array bad month":function(b){b.expect(2);b.equal(moment([2010,-1]).isValid(),false,"month -1 invalid");b.equal(moment([2100,12]).isValid(),false,"month 12 invalid");b.done()},"array good month":function(c){c.expect(12*2);for(var d=0;d<12;d++){c.equal(moment([2010,d]).isValid(),true,"month "+d);c.equal(moment.utc([2010,d]).isValid(),true,"month "+d)}c.done()},"array bad date":function(g){var h=[moment([2010,0,0]),moment([2100,0,32]),moment.utc([2010,0,0]),moment.utc([2100,0,32])],e,f;g.expect(h.length);for(e in h){f=h[e];g.equal(f.isValid(),false)}g.done()},"array bad date leap year":function(b){b.expect(8);b.equal(moment([2010,1,29]).isValid(),false,"2010 feb 29");b.equal(moment([2100,1,29]).isValid(),false,"2100 feb 29");b.equal(moment([2008,1,30]).isValid(),false,"2008 feb 30");b.equal(moment([2000,1,30]).isValid(),false,"2000 feb 30");b.equal(moment.utc([2010,1,29]).isValid(),false,"utc 2010 feb 29");b.equal(moment.utc([2100,1,29]).isValid(),false,"utc 2100 feb 29");b.equal(moment.utc([2008,1,30]).isValid(),false,"utc 2008 feb 30");b.equal(moment.utc([2000,1,30]).isValid(),false,"utc 2000 feb 30");b.done()},"string + formats bad date":function(b){b.equal(moment("2020-00-00",[]).isValid(),false,"invalid on empty array");b.equal(moment("2020-00-00",["YYYY-MM-DD","DD-MM-YYYY"]).isValid(),false,"invalid on all in array");b.equal(moment("2020-00-00",["DD-MM-YYYY","YYYY-MM-DD"]).isValid(),false,"invalid on all in array");b.equal(moment("2020-01-01",["YYYY-MM-DD","DD-MM-YYYY"]).isValid(),true,"valid on first");b.equal(moment("2020-01-01",["DD-MM-YYYY","YYYY-MM-DD"]).isValid(),true,"valid on last");b.equal(moment("2020-01-01",["YYYY-MM-DD","YYYY-DD-MM"]).isValid(),true,"valid on both");b.equal(moment("2020-13-01",["YYYY-MM-DD","YYYY-DD-MM"]).isValid(),true,"valid on last");b.equal(moment("12-13-2012",["DD-MM-YYYY","YYYY-MM-DD"]).isValid(),false,"month rollover");b.equal(moment("12-13-2012",["DD-MM-YYYY","DD-MM-YYYY"]).isValid(),false,"month rollover");b.equal(moment("38-12-2012",["DD-MM-YYYY"]).isValid(),false,"day rollover");b.done()},"string nonsensical with format":function(b){b.expect(2);b.equal(moment("fail","MM-DD-YYYY").isValid(),false,"string 'fail' with format 'MM-DD-YYYY'");b.equal(moment("xx-xx-2001","DD-MM-YYY").isValid(),true,"string 'xx-xx-2001' with format 'MM-DD-YYYY'");b.done()},"string with bad month name":function(b){moment.locale("en");b.equal(moment("01-Nam-2012","DD-MMM-YYYY").isValid(),false,"'Nam' is an invalid month");b.equal(moment("01-Aug-2012","DD-MMM-YYYY").isValid(),true,"'Aug' is a valid month");b.done()},"string with spaceless format":function(b){b.expect(1);b.equal(moment("10Sep2001","DDMMMYYYY").isValid(),true,"Parsing 10Sep2001 should result in a valid date");b.done()},"invalid string iso 8601":function(f){var d=["2010-00-00","2010-01-00","2010-01-40","2010-01-01T24","2010-01-01T23:60","2010-01-01T23:59:60"],e;f.expect(d.length*2);for(e=0;e<d.length;e++){f.equal(moment(d[e]).isValid(),false,d[e]+" should be invalid");f.equal(moment.utc(d[e]).isValid(),false,d[e]+" should be invalid")}f.done()},"invalid string iso 8601 + timezone":function(f){var d=["2010-00-00T+00:00","2010-01-00T+00:00","2010-01-40T+00:00","2010-01-40T24+00:00","2010-01-40T23:60+00:00","2010-01-40T23:59:60+00:00","2010-01-40T23:59:59.9999+00:00"],e;f.expect(d.length*2);for(e=0;e<d.length;e++){f.equal(moment(d[e]).isValid(),false,d[e]+" should be invalid");f.equal(moment.utc(d[e]).isValid(),false,d[e]+" should be invalid")}f.done()},"valid string iso 8601 + timezone":function(f){var d=["2010-01-01","2010-01-30","2010-01-30T23+00:00","2010-01-30T23:59+00:00","2010-01-30T23:59:59+00:00","2010-01-30T23:59:59.999+00:00","2010-01-30T23:59:59.999-07:00","2010-01-30T00:00:00.000+07:00","2010-01-30T00:00:00.000+07"],e;f.expect(d.length*2);for(e=0;e<d.length;e++){f.equal(moment(d[e]).isValid(),true,d[e]+" should be valid");f.equal(moment.utc(d[e]).isValid(),true,d[e]+" should be valid")}f.done()},invalidAt:function(b){b.expect(7);b.equal(moment([2000,12]).invalidAt(),1,"month 12 is invalid: 0-11");b.equal(moment([2000,1,30]).invalidAt(),2,"30 is not a valid february day");b.equal(moment([2000,1,29,24]).invalidAt(),3,"24 is invalid hour");b.equal(moment([2000,1,29,23,60]).invalidAt(),4,"60 is invalid minute");b.equal(moment([2000,1,29,23,59,60]).invalidAt(),5,"60 is invalid second");b.equal(moment([2000,1,29,23,59,59,1000]).invalidAt(),6,"1000 is invalid millisecond");b.equal(moment([2000,1,29,23,59,59,999]).invalidAt(),-1,"-1 if everything is fine");b.done()},"valid Unix timestamp":function(b){b.expect(21);b.equal(moment(1371065286,"X").isValid(),true,"number integer");b.equal(moment(1379066897,"X").isValid(),true,"number whole 1dp");b.equal(moment(1379066897.7,"X").isValid(),true,"number 1dp");b.equal(moment(1379066897,"X").isValid(),true,"number whole 2dp");b.equal(moment(1379066897.07,"X").isValid(),true,"number 2dp");b.equal(moment(1379066897.17,"X").isValid(),true,"number 2dp");b.equal(moment(1379066897,"X").isValid(),true,"number whole 3dp");b.equal(moment(1379066897.007,"X").isValid(),true,"number 3dp");b.equal(moment(1379066897.017,"X").isValid(),true,"number 3dp");b.equal(moment(1379066897.157,"X").isValid(),true,"number 3dp");b.equal(moment("1371065286","X").isValid(),true,"string integer");b.equal(moment("1379066897.","X").isValid(),true,"string trailing .");b.equal(moment("1379066897.0","X").isValid(),true,"string whole 1dp");b.equal(moment("1379066897.7","X").isValid(),true,"string 1dp");b.equal(moment("1379066897.00","X").isValid(),true,"string whole 2dp");b.equal(moment("1379066897.07","X").isValid(),true,"string 2dp");b.equal(moment("1379066897.17","X").isValid(),true,"string 2dp");b.equal(moment("1379066897.000","X").isValid(),true,"string whole 3dp");b.equal(moment("1379066897.007","X").isValid(),true,"string 3dp");b.equal(moment("1379066897.017","X").isValid(),true,"string 3dp");b.equal(moment("1379066897.157","X").isValid(),true,"string 3dp");b.done()},"invalid Unix timestamp":function(c){c.expect(8);c.equal(moment(undefined,"X").isValid(),false,"undefined");c.equal(moment("undefined","X").isValid(),false,"string undefined");try{c.equal(moment(null,"X").isValid(),false,"null")}catch(d){c.ok(true,"null")}c.equal(moment("null","X").isValid(),false,"string null");c.equal(moment([],"X").isValid(),false,"array");c.equal(moment("{}","X").isValid(),false,"object");try{c.equal(moment("","X").isValid(),false,"string empty")}catch(d){c.ok(true,"string empty")}c.equal(moment(" ","X").isValid(),false,"string space");c.done()},empty:function(b){b.equal(moment(null).isValid(),false,"null");b.equal(moment("").isValid(),false,"empty string");b.equal(moment(null,"YYYY").isValid(),false,"format + null");b.equal(moment("","YYYY").isValid(),false,"format + empty string");b.equal(moment(" ","YYYY").isValid(),false,"format + empty when trimmed");b.done()},"days of the year":function(b){b.equal(moment("2010 300","YYYY DDDD").isValid(),true,"day 300 of year valid");b.equal(moment("2010 365","YYYY DDDD").isValid(),true,"day 365 of year valid");b.equal(moment("2010 366","YYYY DDDD").isValid(),false,"day 366 of year invalid");b.equal(moment("2012 365","YYYY DDDD").isValid(),true,"day 365 of leap year valid");b.equal(moment("2012 366","YYYY DDDD").isValid(),true,"day 366 of leap year valid");b.equal(moment("2012 367","YYYY DDDD").isValid(),false,"day 367 of leap year invalid");b.done()},"oddball permissiveness":function(b){b.ok(moment("2010-10-3199",["MM/DD/YYYY","MM-DD-YYYY","YYYY-MM-DD"]).isValid());b.ok(moment("3:25",["h:mma","hh:mma","H:mm","HH:mm"]).isValid());b.done()}};