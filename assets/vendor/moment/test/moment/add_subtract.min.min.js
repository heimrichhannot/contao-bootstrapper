var moment=require("../../moment");exports.add={setUp:function(b){moment.createFromInputFallback=function(){throw new Error("input not handled by moment")};b()},"add short reverse args":function(a){a.expect(16);var d=moment(),j,b,c;d.year(2011);d.month(9);d.date(12);d.hours(6);d.minutes(7);d.seconds(8);d.milliseconds(500);a.equal(d.add({ms:50}).milliseconds(),550,"Add milliseconds");a.equal(d.add({s:1}).seconds(),9,"Add seconds");a.equal(d.add({m:1}).minutes(),8,"Add minutes");a.equal(d.add({h:1}).hours(),7,"Add hours");a.equal(d.add({d:1}).date(),13,"Add date");a.equal(d.add({w:1}).date(),20,"Add week");a.equal(d.add({M:1}).month(),10,"Add month");a.equal(d.add({y:1}).year(),2012,"Add year");a.equal(d.add({Q:1}).month(),1,"Add quarter");j=moment([2010,0,31]).add({M:1});b=moment([2010,1,28]).subtract({M:1});c=moment([2010,1,28]).subtract({Q:1});a.equal(j.month(),1,"add month, jan 31st to feb 28th");a.equal(j.date(),28,"add month, jan 31st to feb 28th");a.equal(b.month(),0,"subtract month, feb 28th to jan 28th");a.equal(b.date(),28,"subtract month, feb 28th to jan 28th");a.equal(c.month(),10,"subtract quarter, feb 28th 2010 to nov 28th 2009");a.equal(c.date(),28,"subtract quarter, feb 28th 2010 to nov 28th 2009");a.equal(c.year(),2009,"subtract quarter, feb 28th 2010 to nov 28th 2009");a.done()},"add long reverse args":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add({milliseconds:50}).milliseconds(),550,"Add milliseconds");d.equal(a.add({seconds:1}).seconds(),9,"Add seconds");d.equal(a.add({minutes:1}).minutes(),8,"Add minutes");d.equal(a.add({hours:1}).hours(),7,"Add hours");d.equal(a.add({days:1}).date(),13,"Add date");d.equal(a.add({weeks:1}).date(),20,"Add week");d.equal(a.add({months:1}).month(),10,"Add month");d.equal(a.add({years:1}).year(),2012,"Add year");d.equal(a.add({quarters:1}).month(),1,"Add quarter");d.done()},"add long singular reverse args":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add({millisecond:50}).milliseconds(),550,"Add milliseconds");d.equal(a.add({second:1}).seconds(),9,"Add seconds");d.equal(a.add({minute:1}).minutes(),8,"Add minutes");d.equal(a.add({hour:1}).hours(),7,"Add hours");d.equal(a.add({day:1}).date(),13,"Add date");d.equal(a.add({week:1}).date(),20,"Add week");d.equal(a.add({month:1}).month(),10,"Add month");d.equal(a.add({year:1}).year(),2012,"Add year");d.equal(a.add({quarter:1}).month(),1,"Add quarter");d.done()},"add string long reverse args":function(a){a.expect(10);var b=moment(),f;b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);f=b.clone();a.equal(b.add("millisecond",50).milliseconds(),550,"Add milliseconds");a.equal(b.add("second",1).seconds(),9,"Add seconds");a.equal(b.add("minute",1).minutes(),8,"Add minutes");a.equal(b.add("hour",1).hours(),7,"Add hours");a.equal(b.add("day",1).date(),13,"Add date");a.equal(b.add("week",1).date(),20,"Add week");a.equal(b.add("month",1).month(),10,"Add month");a.equal(b.add("year",1).year(),2012,"Add year");a.equal(f.add("day","01").date(),13,"Add date");a.equal(b.add("quarter",1).month(),1,"Add quarter");a.done()},"add string long singular reverse args":function(a){a.expect(10);var b=moment(),f;b.year(2011);b.month(9);b.date(12);b.hours(6);b.minutes(7);b.seconds(8);b.milliseconds(500);f=b.clone();a.equal(b.add("milliseconds",50).milliseconds(),550,"Add milliseconds");a.equal(b.add("seconds",1).seconds(),9,"Add seconds");a.equal(b.add("minutes",1).minutes(),8,"Add minutes");a.equal(b.add("hours",1).hours(),7,"Add hours");a.equal(b.add("days",1).date(),13,"Add date");a.equal(b.add("weeks",1).date(),20,"Add week");a.equal(b.add("months",1).month(),10,"Add month");a.equal(b.add("years",1).year(),2012,"Add year");a.equal(f.add("days","01").date(),13,"Add date");a.equal(b.add("quarters",1).month(),1,"Add quarter");a.done()},"add string short reverse args":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add("ms",50).milliseconds(),550,"Add milliseconds");d.equal(a.add("s",1).seconds(),9,"Add seconds");d.equal(a.add("m",1).minutes(),8,"Add minutes");d.equal(a.add("h",1).hours(),7,"Add hours");d.equal(a.add("d",1).date(),13,"Add date");d.equal(a.add("w",1).date(),20,"Add week");d.equal(a.add("M",1).month(),10,"Add month");d.equal(a.add("y",1).year(),2012,"Add year");d.equal(a.add("Q",1).month(),1,"Add quarter");d.done()},"add string long":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add(50,"millisecond").milliseconds(),550,"Add milliseconds");d.equal(a.add(1,"second").seconds(),9,"Add seconds");d.equal(a.add(1,"minute").minutes(),8,"Add minutes");d.equal(a.add(1,"hour").hours(),7,"Add hours");d.equal(a.add(1,"day").date(),13,"Add date");d.equal(a.add(1,"week").date(),20,"Add week");d.equal(a.add(1,"month").month(),10,"Add month");d.equal(a.add(1,"year").year(),2012,"Add year");d.equal(a.add(1,"quarter").month(),1,"Add quarter");d.done()},"add string long singular":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add(50,"milliseconds").milliseconds(),550,"Add milliseconds");d.equal(a.add(1,"seconds").seconds(),9,"Add seconds");d.equal(a.add(1,"minutes").minutes(),8,"Add minutes");d.equal(a.add(1,"hours").hours(),7,"Add hours");d.equal(a.add(1,"days").date(),13,"Add date");d.equal(a.add(1,"weeks").date(),20,"Add week");d.equal(a.add(1,"months").month(),10,"Add month");d.equal(a.add(1,"years").year(),2012,"Add year");d.equal(a.add(1,"quarters").month(),1,"Add quarter");d.done()},"add string short":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add(50,"ms").milliseconds(),550,"Add milliseconds");d.equal(a.add(1,"s").seconds(),9,"Add seconds");d.equal(a.add(1,"m").minutes(),8,"Add minutes");d.equal(a.add(1,"h").hours(),7,"Add hours");d.equal(a.add(1,"d").date(),13,"Add date");d.equal(a.add(1,"w").date(),20,"Add week");d.equal(a.add(1,"M").month(),10,"Add month");d.equal(a.add(1,"y").year(),2012,"Add year");d.equal(a.add(1,"Q").month(),1,"Add quarter");d.done()},"add strings string short args":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add("ms","50").milliseconds(),550,"Add milliseconds");d.equal(a.add("s","1").seconds(),9,"Add seconds");d.equal(a.add("m","1").minutes(),8,"Add minutes");d.equal(a.add("h","1").hours(),7,"Add hours");d.equal(a.add("d","1").date(),13,"Add date");d.equal(a.add("w","1").date(),20,"Add week");d.equal(a.add("M","1").month(),10,"Add month");d.equal(a.add("y","1").year(),2012,"Add year");d.equal(a.add("Q","1").month(),1,"Add quarter");d.done()},"subtract strings string short args":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.subtract("ms","50").milliseconds(),450,"Subtract milliseconds");d.equal(a.subtract("s","1").seconds(),7,"Subtract seconds");d.equal(a.subtract("m","1").minutes(),6,"Subtract minutes");d.equal(a.subtract("h","1").hours(),5,"Subtract hours");d.equal(a.subtract("d","1").date(),11,"Subtract date");d.equal(a.subtract("w","1").date(),4,"Subtract week");d.equal(a.subtract("M","1").month(),8,"Subtract month");d.equal(a.subtract("y","1").year(),2010,"Subtract year");d.equal(a.subtract("Q","1").month(),5,"Subtract quarter");d.done()},"add strings string short":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.add("50","ms").milliseconds(),550,"Add milliseconds");d.equal(a.add("1","s").seconds(),9,"Add seconds");d.equal(a.add("1","m").minutes(),8,"Add minutes");d.equal(a.add("1","h").hours(),7,"Add hours");d.equal(a.add("1","d").date(),13,"Add date");d.equal(a.add("1","w").date(),20,"Add week");d.equal(a.add("1","M").month(),10,"Add month");d.equal(a.add("1","y").year(),2012,"Add year");d.equal(a.add("1","Q").month(),1,"Add quarter");d.done()},"subtract strings string short":function(d){d.expect(9);var a=moment();a.year(2011);a.month(9);a.date(12);a.hours(6);a.minutes(7);a.seconds(8);a.milliseconds(500);d.equal(a.subtract("50","ms").milliseconds(),450,"Subtract milliseconds");d.equal(a.subtract("1","s").seconds(),7,"Subtract seconds");d.equal(a.subtract("1","m").minutes(),6,"Subtract minutes");d.equal(a.subtract("1","h").hours(),5,"Subtract hours");d.equal(a.subtract("1","d").date(),11,"Subtract date");d.equal(a.subtract("1","w").date(),4,"Subtract week");d.equal(a.subtract("1","M").month(),8,"Subtract month");d.equal(a.subtract("1","y").year(),2010,"Subtract year");d.equal(a.subtract("1","Q").month(),5,"Subtract quarter");d.done()},"add across DST":function(a){if(new Date(2011,2,13,5,0,0).getHours()!==5){a.done();return}var e=moment(new Date(2011,2,12,5,0,0)),l=moment(new Date(2011,2,12,5,0,0)),b=moment(new Date(2011,2,12,5,0,0)),c=moment(new Date(2011,2,12,5,0,0)),d=moment(new Date(2011,2,12,5,0,0));e.add(1,"days");l.add(24,"hours");b.add(1,"months");d.add(1,"quarter");a.equal(e.hours(),5,"adding days over DST difference should result in the same hour");if(l.isDST()&&!c.isDST()){a.equal(l.hours(),6,"adding hours over DST difference should result in a different hour")}else{if(!l.isDST()&&c.isDST()){a.equal(l.hours(),4,"adding hours over DST difference should result in a different hour")}else{a.equal(l.hours(),5,"adding hours over DST difference should result in a same hour if the timezone does not have daylight savings time")}}a.equal(b.hours(),5,"adding months over DST difference should result in the same hour");a.equal(d.hours(),5,"adding quarters over DST difference should result in the same hour");a.done()}};