var moment=require("../../moment");exports.isValid={setUp:function(a){moment.createFromInputFallback=function(){throw new Error("input not handled by moment")};a()},"array bad month":function(a){a.expect(2);a.equal(moment([2010,-1]).isValid(),false,"month -1 invalid");a.equal(moment([2100,12]).isValid(),false,"month 12 invalid");a.done()},"array good month":function(b){b.expect(12*2);for(var a=0;a<12;a++){b.equal(moment([2010,a]).isValid(),true,"month "+a);b.equal(moment.utc([2010,a]).isValid(),true,"month "+a)}b.done()},"array bad date":function(d){var c=[moment([2010,0,0]),moment([2100,0,32]),moment.utc([2010,0,0]),moment.utc([2100,0,32])],b,a;d.expect(c.length);for(b in c){a=c[b];d.equal(a.isValid(),false)}d.done()},"array bad date leap year":function(a){a.expect(8);a.equal(moment([2010,1,29]).isValid(),false,"2010 feb 29");a.equal(moment([2100,1,29]).isValid(),false,"2100 feb 29");a.equal(moment([2008,1,30]).isValid(),false,"2008 feb 30");a.equal(moment([2000,1,30]).isValid(),false,"2000 feb 30");a.equal(moment.utc([2010,1,29]).isValid(),false,"utc 2010 feb 29");a.equal(moment.utc([2100,1,29]).isValid(),false,"utc 2100 feb 29");a.equal(moment.utc([2008,1,30]).isValid(),false,"utc 2008 feb 30");a.equal(moment.utc([2000,1,30]).isValid(),false,"utc 2000 feb 30");a.done()},"string + formats bad date":function(a){a.equal(moment("2020-00-00",[]).isValid(),false,"invalid on empty array");a.equal(moment("2020-00-00",["YYYY-MM-DD","DD-MM-YYYY"]).isValid(),false,"invalid on all in array");a.equal(moment("2020-00-00",["DD-MM-YYYY","YYYY-MM-DD"]).isValid(),false,"invalid on all in array");a.equal(moment("2020-01-01",["YYYY-MM-DD","DD-MM-YYYY"]).isValid(),true,"valid on first");a.equal(moment("2020-01-01",["DD-MM-YYYY","YYYY-MM-DD"]).isValid(),true,"valid on last");a.equal(moment("2020-01-01",["YYYY-MM-DD","YYYY-DD-MM"]).isValid(),true,"valid on both");a.equal(moment("2020-13-01",["YYYY-MM-DD","YYYY-DD-MM"]).isValid(),true,"valid on last");a.equal(moment("12-13-2012",["DD-MM-YYYY","YYYY-MM-DD"]).isValid(),false,"month rollover");a.equal(moment("12-13-2012",["DD-MM-YYYY","DD-MM-YYYY"]).isValid(),false,"month rollover");a.equal(moment("38-12-2012",["DD-MM-YYYY"]).isValid(),false,"day rollover");a.done()},"string nonsensical with format":function(a){a.expect(2);a.equal(moment("fail","MM-DD-YYYY").isValid(),false,"string 'fail' with format 'MM-DD-YYYY'");a.equal(moment("xx-xx-2001","DD-MM-YYY").isValid(),true,"string 'xx-xx-2001' with format 'MM-DD-YYYY'");a.done()},"string with bad month name":function(a){moment.locale("en");a.equal(moment("01-Nam-2012","DD-MMM-YYYY").isValid(),false,"'Nam' is an invalid month");a.equal(moment("01-Aug-2012","DD-MMM-YYYY").isValid(),true,"'Aug' is a valid month");a.done()},"string with spaceless format":function(a){a.expect(1);a.equal(moment("10Sep2001","DDMMMYYYY").isValid(),true,"Parsing 10Sep2001 should result in a valid date");a.done()},"invalid string iso 8601":function(c){var b=["2010-00-00","2010-01-00","2010-01-40","2010-01-01T24","2010-01-01T23:60","2010-01-01T23:59:60"],a;c.expect(b.length*2);for(a=0;a<b.length;a++){c.equal(moment(b[a]).isValid(),false,b[a]+" should be invalid");c.equal(moment.utc(b[a]).isValid(),false,b[a]+" should be invalid")}c.done()},"invalid string iso 8601 + timezone":function(c){var b=["2010-00-00T+00:00","2010-01-00T+00:00","2010-01-40T+00:00","2010-01-40T24+00:00","2010-01-40T23:60+00:00","2010-01-40T23:59:60+00:00","2010-01-40T23:59:59.9999+00:00"],a;c.expect(b.length*2);for(a=0;a<b.length;a++){c.equal(moment(b[a]).isValid(),false,b[a]+" should be invalid");c.equal(moment.utc(b[a]).isValid(),false,b[a]+" should be invalid")}c.done()},"valid string iso 8601 + timezone":function(c){var b=["2010-01-01","2010-01-30","2010-01-30T23+00:00","2010-01-30T23:59+00:00","2010-01-30T23:59:59+00:00","2010-01-30T23:59:59.999+00:00","2010-01-30T23:59:59.999-07:00","2010-01-30T00:00:00.000+07:00","2010-01-30T00:00:00.000+07"],a;c.expect(b.length*2);for(a=0;a<b.length;a++){c.equal(moment(b[a]).isValid(),true,b[a]+" should be valid");c.equal(moment.utc(b[a]).isValid(),true,b[a]+" should be valid")}c.done()},invalidAt:function(a){a.expect(7);a.equal(moment([2000,12]).invalidAt(),1,"month 12 is invalid: 0-11");a.equal(moment([2000,1,30]).invalidAt(),2,"30 is not a valid february day");a.equal(moment([2000,1,29,24]).invalidAt(),3,"24 is invalid hour");a.equal(moment([2000,1,29,23,60]).invalidAt(),4,"60 is invalid minute");a.equal(moment([2000,1,29,23,59,60]).invalidAt(),5,"60 is invalid second");a.equal(moment([2000,1,29,23,59,59,1000]).invalidAt(),6,"1000 is invalid millisecond");a.equal(moment([2000,1,29,23,59,59,999]).invalidAt(),-1,"-1 if everything is fine");a.done()},"valid Unix timestamp":function(a){a.expect(21);a.equal(moment(1371065286,"X").isValid(),true,"number integer");a.equal(moment(1379066897,"X").isValid(),true,"number whole 1dp");a.equal(moment(1379066897.7,"X").isValid(),true,"number 1dp");a.equal(moment(1379066897,"X").isValid(),true,"number whole 2dp");a.equal(moment(1379066897.07,"X").isValid(),true,"number 2dp");a.equal(moment(1379066897.17,"X").isValid(),true,"number 2dp");a.equal(moment(1379066897,"X").isValid(),true,"number whole 3dp");a.equal(moment(1379066897.007,"X").isValid(),true,"number 3dp");a.equal(moment(1379066897.017,"X").isValid(),true,"number 3dp");a.equal(moment(1379066897.157,"X").isValid(),true,"number 3dp");a.equal(moment("1371065286","X").isValid(),true,"string integer");a.equal(moment("1379066897.","X").isValid(),true,"string trailing .");a.equal(moment("1379066897.0","X").isValid(),true,"string whole 1dp");a.equal(moment("1379066897.7","X").isValid(),true,"string 1dp");a.equal(moment("1379066897.00","X").isValid(),true,"string whole 2dp");a.equal(moment("1379066897.07","X").isValid(),true,"string 2dp");a.equal(moment("1379066897.17","X").isValid(),true,"string 2dp");a.equal(moment("1379066897.000","X").isValid(),true,"string whole 3dp");a.equal(moment("1379066897.007","X").isValid(),true,"string 3dp");a.equal(moment("1379066897.017","X").isValid(),true,"string 3dp");a.equal(moment("1379066897.157","X").isValid(),true,"string 3dp");a.done()},"invalid Unix timestamp":function(b){b.expect(8);b.equal(moment(undefined,"X").isValid(),false,"undefined");b.equal(moment("undefined","X").isValid(),false,"string undefined");try{b.equal(moment(null,"X").isValid(),false,"null")}catch(a){b.ok(true,"null")}b.equal(moment("null","X").isValid(),false,"string null");b.equal(moment([],"X").isValid(),false,"array");b.equal(moment("{}","X").isValid(),false,"object");try{b.equal(moment("","X").isValid(),false,"string empty")}catch(a){b.ok(true,"string empty")}b.equal(moment(" ","X").isValid(),false,"string space");b.done()},empty:function(a){a.equal(moment(null).isValid(),false,"null");a.equal(moment("").isValid(),false,"empty string");a.equal(moment(null,"YYYY").isValid(),false,"format + null");a.equal(moment("","YYYY").isValid(),false,"format + empty string");a.equal(moment(" ","YYYY").isValid(),false,"format + empty when trimmed");a.done()},"days of the year":function(a){a.equal(moment("2010 300","YYYY DDDD").isValid(),true,"day 300 of year valid");a.equal(moment("2010 365","YYYY DDDD").isValid(),true,"day 365 of year valid");a.equal(moment("2010 366","YYYY DDDD").isValid(),false,"day 366 of year invalid");a.equal(moment("2012 365","YYYY DDDD").isValid(),true,"day 365 of leap year valid");a.equal(moment("2012 366","YYYY DDDD").isValid(),true,"day 366 of leap year valid");a.equal(moment("2012 367","YYYY DDDD").isValid(),false,"day 367 of leap year invalid");a.done()},"oddball permissiveness":function(a){a.ok(moment("2010-10-3199",["MM/DD/YYYY","MM-DD-YYYY","YYYY-MM-DD"]).isValid());a.ok(moment("3:25",["h:mma","hh:mma","H:mm","HH:mm"]).isValid());a.done()}};