(function(){function c(o){var n=c.resolve(o),m=c.modules[n];if(!m){throw new Error('failed to require "'+o+'"')}if(!m.exports){m.exports={};m.call(m.exports,m,m.exports,c.relative(n))}return m.exports}c.modules={};c.resolve=function(o){var p=o,n=o+".js",m=o+"/index.js";return c.modules[n]&&n||c.modules[m]&&m||p};c.register=function(n,m){c.modules[n]=m};c.relative=function(m){return function(s){if("."!=s.charAt(0)){return c(s)}var r=m.split("/"),o=s.split("/");r.pop();for(var q=0;q<o.length;q++){var n=o[q];if(".."==n){r.pop()}else{if("."!=n){r.push(n)}}}return c(r.join("/"))}};c.register("browser/debug.js",function(o,m,n){o.exports=function(p){return function(){}}});c.register("browser/diff.js",function(o,m,n){var p=(function(){function t(y){return{newPos:y.newPos,components:y.components.slice(0)}}function x(A){var y=[];for(var z=0;z<A.length;z++){if(A[z]){y.push(A[z])}}return y}function v(y){var z=y;z=z.replace(/&/g,"&amp;");z=z.replace(/</g,"&lt;");z=z.replace(/>/g,"&gt;");z=z.replace(/"/g,"&quot;");return z}var w=function(y){this.ignoreWhitespace=y};w.prototype={diff:function(D,F){if(F==D){return[{value:F}]}if(!F){return[{value:D,removed:true}]}if(!D){return[{value:F,added:true}]}F=this.tokenize(F);D=this.tokenize(D);var C=F.length,z=D.length;var H=C+z;var G=[{newPos:-1,components:[]}];var B=this.extractCommon(G[0],F,D,0);if(G[0].newPos+1>=C&&B+1>=z){return G[0].components}for(var y=1;y<=H;y++){for(var I=-1*y;I<=y;I+=2){var L;var K=G[I-1],J=G[I+1];B=(J?J.newPos:0)-I;if(K){G[I-1]=undefined}var A=K&&K.newPos+1<C;var E=J&&0<=B&&B<z;if(!A&&!E){G[I]=undefined;continue}if(!A||(E&&K.newPos<J.newPos)){L=t(J);this.pushComponent(L.components,D[B],undefined,true)}else{L=t(K);L.newPos++;this.pushComponent(L.components,F[L.newPos],true,undefined)}var B=this.extractCommon(L,F,D,I);if(L.newPos+1>=C&&B+1>=z){return L.components}else{G[I]=L}}}},pushComponent:function(A,B,y,C){var z=A[A.length-1];if(z&&z.added===y&&z.removed===C){A[A.length-1]={value:this.join(z.value,B),added:y,removed:C}}else{A.push({value:B,added:y,removed:C})}},extractCommon:function(F,D,z,y){var E=D.length,C=z.length,B=F.newPos,A=B-y;while(B+1<E&&A+1<C&&this.equals(D[B+1],z[A+1])){B++;A++;this.pushComponent(F.components,D[B],undefined,undefined)}F.newPos=B;return A},equals:function(A,z){var y=/\S/;if(this.ignoreWhitespace&&!y.test(A)&&!y.test(z)){return true}else{return A==z}},join:function(z,y){return z+y},tokenize:function(y){return y}};var s=new w();var u=new w(true);u.tokenize=function(y){return x(y.split(/(\s+|\b)/))};var r=new w(true);r.tokenize=function(y){return x(y.split(/([{}:;,]|\s+)/))};var q=new w();q.tokenize=function(y){return y.split(/^/m)};return{diffChars:function(y,z){return s.diff(y,z)},diffWords:function(y,z){return u.diff(y,z)},diffLines:function(y,z){return q.diff(y,z)},diffCss:function(y,z){return r.diff(y,z)},createPatch:function(P,z,F,H,N){var Q=[];Q.push("Index: "+P);Q.push("===================================================================");Q.push("--- "+P+(typeof H==="undefined"?"":"\t"+H));Q.push("+++ "+P+(typeof N==="undefined"?"":"\t"+N));var G=q.diff(z,F);if(!G[G.length-1].value){G.pop()}G.push({value:"",lines:[]});function B(R){return R.map(function(S){return" "+S})}function A(S,T,W){var U=G[G.length-2],V=T===G.length-2,R=T===G.length-3&&(W.added===!U.added||W.removed===!U.removed);if(!/\n$/.test(W.value)&&(V||R)){S.push("\\ No newline at end of file")}}var M=0,C=0,K=[],D=1,O=1;for(var L=0;L<G.length;L++){var J=G[L],y=J.lines||J.value.replace(/\n$/,"").split("\n");J.lines=y;if(J.added||J.removed){if(!M){var I=G[L-1];M=D;C=O;if(I){K=B(I.lines.slice(-4));M-=K.length;C-=K.length}}K.push.apply(K,y.map(function(R){return(J.added?"+":"-")+R}));A(K,L,J);if(J.added){O+=y.length}else{D+=y.length}}else{if(M){if(y.length<=8&&L<G.length-2){K.push.apply(K,B(y))}else{var E=Math.min(y.length,4);Q.push("@@ -"+M+","+(D-M+E)+" +"+C+","+(O-C+E)+" @@");Q.push.apply(Q,K);Q.push.apply(Q,B(y.slice(0,E)));if(y.length<=4){A(Q,L,J)}M=0;C=0;K=[]}}D+=y.length;O+=y.length}}return Q.join("\n")+"\n"},convertChangesToXML:function(A){var y=[];for(var z=0;z<A.length;z++){var B=A[z];if(B.added){y.push("<ins>")}else{if(B.removed){y.push("<del>")}}y.push(v(B.value));if(B.added){y.push("</ins>")}else{if(B.removed){y.push("</del>")}}}return y.join("")}}})();if(typeof o!=="undefined"){o.exports=p}});c.register("browser/events.js",function(p,n,o){n.EventEmitter=q;function m(r){return"[object Array]"=={}.toString.call(r)}function q(){}q.prototype.on=function(r,s){if(!this.$events){this.$events={}}if(!this.$events[r]){this.$events[r]=s}else{if(m(this.$events[r])){this.$events[r].push(s)}else{this.$events[r]=[this.$events[r],s]}}return this};q.prototype.addListener=q.prototype.on;q.prototype.once=function(t,u){var s=this;function r(){s.removeListener(t,r);u.apply(this,arguments)}r.listener=u;this.on(t,r);return this};q.prototype.removeListener=function(s,u){if(this.$events&&this.$events[s]){var v=this.$events[s];if(m(v)){var w=-1;for(var t=0,r=v.length;t<r;t++){if(v[t]===u||(v[t].listener&&v[t].listener===u)){w=t;break}}if(w<0){return this}v.splice(w,1);if(!v.length){delete this.$events[s]}}else{if(v===u||(v.listener&&v.listener===u)){delete this.$events[s]}}}return this};q.prototype.removeAllListeners=function(r){if(r===undefined){this.$events={};return this}if(this.$events&&this.$events[r]){this.$events[r]=null}return this};q.prototype.listeners=function(r){if(!this.$events){this.$events={}}if(!this.$events[r]){this.$events[r]=[]}if(!m(this.$events[r])){this.$events[r]=[this.$events[r]]}return this.$events[r]};q.prototype.emit=function(t){if(!this.$events){return false}var w=this.$events[t];if(!w){return false}var s=[].slice.call(arguments,1);if("function"==typeof w){w.apply(this,s)}else{if(m(w)){var v=w.slice();for(var u=0,r=v.length;u<r;u++){v[u].apply(this,s)}}else{return false}}return true}});c.register("browser/fs.js",function(o,m,n){});c.register("browser/path.js",function(o,m,n){});c.register("browser/progress.js",function(p,m,n){p.exports=o;function o(){this.percent=0;this.size(0);this.fontSize(11);this.font("helvetica, arial, sans-serif")}o.prototype.size=function(q){this._size=q;return this};o.prototype.text=function(q){this._text=q;return this};o.prototype.fontSize=function(q){this._fontSize=q;return this};o.prototype.font=function(q){this._font=q;return this};o.prototype.update=function(q){this.percent=q;return this};o.prototype.draw=function(B){var r=Math.min(this.percent,100),D=this._size,A=D/2,u=A,t=A,s=A-1,C=this._fontSize;B.font=C+"px "+this._font;var q=Math.PI*2*(r/100);B.clearRect(0,0,D,D);B.strokeStyle="#9f9f9f";B.beginPath();B.arc(u,t,s,0,q,false);B.stroke();B.strokeStyle="#eee";B.beginPath();B.arc(u,t,s-1,0,q,true);B.stroke();var z=this._text||(r|0)+"%",v=B.measureText(z).width;B.fillText(z,u-v/2+1,t+C/2-1);return this}});c.register("browser/tty.js",function(o,m,n){m.isatty=function(){return true};m.getWindowSize=function(){return[window.innerHeight,window.innerWidth]}});c.register("context.js",function(p,n,o){p.exports=m;function m(){}m.prototype.runnable=function(q){if(0==arguments.length){return this._runnable}this.test=this._runnable=q;return this};m.prototype.timeout=function(q){this.runnable().timeout(q);return this};m.prototype.slow=function(q){this.runnable().slow(q);return this};m.prototype.inspect=function(){return JSON.stringify(this,function(q,r){if("_runnable"==q){return}if("test"==q){return}return r},2)}});c.register("hook.js",function(p,m,n){var r=n("./runnable");p.exports=o;function o(t,s){r.call(this,t,s);this.type="hook"}function q(){}q.prototype=r.prototype;o.prototype=new q;o.prototype.constructor=o;o.prototype.error=function(s){if(0==arguments.length){var s=this._error;this._error=null;return s}this._error=s}});c.register("interfaces/bdd.js",function(p,n,o){var m=o("../suite"),q=o("../test");p.exports=function(r){var s=[r];r.on("pre-require",function(v,u,t){v.before=function(w){s[0].beforeAll(w)};v.after=function(w){s[0].afterAll(w)};v.beforeEach=function(w){s[0].beforeEach(w)};v.afterEach=function(w){s[0].afterEach(w)};v.describe=v.context=function(y,x){var w=m.create(s[0],y);s.unshift(w);x.call(w);s.shift();return w};v.xdescribe=v.xcontext=v.describe.skip=function(y,x){var w=m.create(s[0],y);w.pending=true;s.unshift(w);x.call(w);s.shift()};v.describe.only=function(y,x){var w=v.describe(y,x);t.grep(w.fullTitle())};v.it=v.specify=function(y,x){var w=s[0];if(w.pending){var x=null}var z=new q(y,x);w.addTest(z);return z};v.it.only=function(x,w){var y=v.it(x,w);t.grep(y.fullTitle())};v.xit=v.xspecify=v.it.skip=function(w){v.it(w)}})}});c.register("interfaces/exports.js",function(p,n,o){var m=o("../suite"),q=o("../test");p.exports=function(s){var t=[s];s.on("require",r);function r(x){var w;for(var u in x){if("function"==typeof x[u]){var v=x[u];switch(u){case"before":t[0].beforeAll(v);break;case"after":t[0].afterAll(v);break;case"beforeEach":t[0].beforeEach(v);break;case"afterEach":t[0].afterEach(v);break;default:t[0].addTest(new q(u,v))}}else{var w=m.create(t[0],u);t.unshift(w);r(x[u]);t.shift()}}}}});c.register("interfaces/index.js",function(o,m,n){m.bdd=n("./bdd");m.tdd=n("./tdd");m.qunit=n("./qunit");m.exports=n("./exports")});c.register("interfaces/qunit.js",function(p,n,o){var m=o("../suite"),q=o("../test");p.exports=function(r){var s=[r];r.on("pre-require",function(v,u,t){v.before=function(w){s[0].beforeAll(w)};v.after=function(w){s[0].afterAll(w)};v.beforeEach=function(w){s[0].beforeEach(w)};v.afterEach=function(w){s[0].afterEach(w)};v.suite=function(x){if(s.length>1){s.shift()}var w=m.create(s[0],x);s.unshift(w);return w};v.suite.only=function(y,x){var w=v.suite(y,x);t.grep(w.fullTitle())};v.test=function(x,w){var y=new q(x,w);s[0].addTest(y);return y};v.test.only=function(x,w){var y=v.test(x,w);t.grep(y.fullTitle())};v.test.skip=function(w){v.test(w)}})}});c.register("interfaces/tdd.js",function(p,n,o){var m=o("../suite"),q=o("../test");p.exports=function(r){var s=[r];r.on("pre-require",function(v,u,t){v.setup=function(w){s[0].beforeEach(w)};v.teardown=function(w){s[0].afterEach(w)};v.suiteSetup=function(w){s[0].beforeAll(w)};v.suiteTeardown=function(w){s[0].afterAll(w)};v.suite=function(y,x){var w=m.create(s[0],y);s.unshift(w);x.call(w);s.shift();return w};v.suite.only=function(y,x){var w=v.suite(y,x);t.grep(w.fullTitle())};v.test=function(x,w){var y=new q(x,w);s[0].addTest(y);return y};v.test.only=function(x,w){var y=v.test(x,w);t.grep(y.fullTitle())};v.test.skip=function(w){v.test(w)}})}});c.register("mocha.js",function(p,n,o){
/*
 * mocha
 * Copyright(c) 2011 TJ Holowaychuk <tj@vision-media.ca>
 * MIT Licensed
 */
var s=o("browser/path"),m=o("./utils");n=p.exports=q;n.utils=m;n.interfaces=o("./interfaces");n.reporters=o("./reporters");n.Runnable=o("./runnable");n.Context=o("./context");n.Runner=o("./runner");n.Suite=o("./suite");n.Hook=o("./hook");n.Test=o("./test");function r(t){return __dirname+"/../images/"+t+".png"}function q(t){t=t||{};this.files=[];this.options=t;this.grep(t.grep);this.suite=new n.Suite("",new n.Context);this.ui(t.ui);this.bail(t.bail);this.reporter(t.reporter);if(t.timeout){this.timeout(t.timeout)}if(t.slow){this.slow(t.slow)}}q.prototype.bail=function(t){if(0==arguments.length){t=true}this.suite.bail(t);return this};q.prototype.addFile=function(t){this.files.push(t);return this};q.prototype.reporter=function(t){if("function"==typeof t){this._reporter=t}else{t=t||"dot";try{this._reporter=o("./reporters/"+t)}catch(u){this._reporter=o(t)}if(!this._reporter){throw new Error('invalid reporter "'+t+'"')}}return this};q.prototype.ui=function(t){t=t||"bdd";this._ui=n.interfaces[t];if(!this._ui){throw new Error('invalid interface "'+t+'"')}this._ui=this._ui(this.suite);return this};q.prototype.loadFiles=function(v){var t=this;var u=this.suite;var w=this.files.length;this.files.forEach(function(x){x=s.resolve(x);u.emit("pre-require",global,x,t);u.emit("require",o(x),x,t);u.emit("post-require",global,x,t);--w||(v&&v())})};q.prototype._growl=function(v,t){var u=o("growl");v.on("end",function(){var w=t.stats;if(w.failures){var x=w.failures+" of "+v.total+" tests failed";u(x,{name:"mocha",title:"Failed",image:r("error")})}else{u(w.passes+" tests passed in "+w.duration+"ms",{name:"mocha",title:"Passed",image:r("ok")})}})};q.prototype.grep=function(t){this.options.grep="string"==typeof t?new RegExp(m.escapeRegexp(t)):t;return this};q.prototype.invert=function(){this.options.invert=true;return this};q.prototype.ignoreLeaks=function(){this.options.ignoreLeaks=true;return this};q.prototype.checkLeaks=function(){this.options.ignoreLeaks=false;return this};q.prototype.growl=function(){this.options.growl=true;return this};q.prototype.globals=function(t){this.options.globals=(this.options.globals||[]).concat(t);return this};q.prototype.timeout=function(t){this.suite.timeout(t);return this};q.prototype.slow=function(t){this.suite.slow(t);return this};q.prototype.asyncOnly=function(){this.options.asyncOnly=true;return this};q.prototype.run=function(w){if(this.files.length){this.loadFiles()}var v=this.suite;var u=this.options;var x=new n.Runner(v);var t=new this._reporter(x);x.ignoreLeaks=false!==u.ignoreLeaks;x.asyncOnly=u.asyncOnly;if(u.grep){x.grep(u.grep,u.invert)}if(u.globals){x.globals(u.globals)}if(u.growl){this._growl(x,t)}return x.run(w)}});c.register("ms.js",function(n,r,o){var w=1000;var p=w*60;var t=p*60;var u=t*24;n.exports=function(m){if("string"==typeof m){return q(m)}return v(m)};function q(y){var s=/^((?:\d+)?\.?\d+) *(ms|seconds?|s|minutes?|m|hours?|h|days?|d|years?|y)?$/i.exec(y);if(!s){return}var z=parseFloat(s[1]);var x=(s[2]||"ms").toLowerCase();switch(x){case"years":case"year":case"y":return z*31557600000;case"days":case"day":case"d":return z*86400000;case"hours":case"hour":case"h":return z*3600000;case"minutes":case"minute":case"m":return z*60000;case"seconds":case"second":case"s":return z*1000;case"ms":return z}}function v(m){if(m==u){return Math.round(m/u)+" day"}if(m>u){return Math.round(m/u)+" days"}if(m==t){return Math.round(m/t)+" hour"}if(m>t){return Math.round(m/t)+" hours"}if(m==p){return Math.round(m/p)+" minute"}if(m>p){return Math.round(m/p)+" minutes"}if(m==w){return Math.round(m/w)+" second"}if(m>w){return Math.round(m/w)+" seconds"}return m+" ms"}});c.register("reporters/base.js",function(n,t,q){var y=q("browser/tty"),B=q("browser/diff"),m=q("../ms");var z=global.Date,s=global.setTimeout,x=global.setInterval,A=global.clearTimeout,C=global.clearInterval;var w=y.isatty(1)&&y.isatty(2);t=n.exports=v;t.useColors=w;t.colors={pass:90,fail:31,"bright pass":92,"bright fail":91,"bright yellow":93,pending:36,suite:0,"error title":0,"error message":31,"error stack":90,checkmark:32,fast:90,medium:33,slow:31,green:32,light:90,"diff gutter":90,"diff added":42,"diff removed":41};t.symbols={ok:"✓",err:"✖",dot:"․"};if("win32"==a.platform){t.symbols.ok="\u221A";t.symbols.err="\u00D7";t.symbols.dot="."}var r=t.color=function(D,E){if(!t.useColors){return E}return"\u001b["+t.colors[D]+"m"+E+"\u001b[0m"};t.window={width:w?a.stdout.getWindowSize?a.stdout.getWindowSize(1)[0]:y.getWindowSize()[1]:75};t.cursor={hide:function(){a.stdout.write("\u001b[?25l")},show:function(){a.stdout.write("\u001b[?25h")},deleteLine:function(){a.stdout.write("\u001b[2K")},beginningOfLine:function(){a.stdout.write("\u001b[0G")},CR:function(){t.cursor.deleteLine();t.cursor.beginningOfLine()}};t.list=function(D){console.error();D.forEach(function(L,I){var G=r("error title","  %s) %s:\n")+r("error message","     %s")+r("error stack","\n%s\n");var H=L.err,Q=H.message||"",M=H.stack||Q,K=M.indexOf(Q)+Q.length,F=M.slice(0,K),O=H.actual,J=H.expected,N=true;if(H.showDiff){N=false;H.actual=O=JSON.stringify(O,null,2);H.expected=J=JSON.stringify(J,null,2)}if("string"==typeof O&&"string"==typeof J){F=u(H,"Words",N);var P=F.split("\n");if(P.length>4){var E=String(P.length).length;F=P.map(function(S,R){return p(++R,E)+" | "+S}).join("\n")}F="\n"+r("diff removed","actual")+" "+r("diff added","expected")+"\n\n"+F+"\n";F=F.replace(/^/gm,"      ");G=r("error title","  %s) %s:\n%s")+r("error stack","\n%s\n")}M=M.slice(K?K+1:K).replace(/^/gm,"  ");console.error(G,(I+1),L.fullTitle(),F,M)})};function v(G){var D=this,E=this.stats={suites:0,tests:0,passes:0,pending:0,failures:0},F=this.failures=[];if(!G){return}this.runner=G;G.stats=E;G.on("start",function(){E.start=new z});G.on("suite",function(H){E.suites=E.suites||0;H.root||E.suites++});G.on("test end",function(H){E.tests=E.tests||0;E.tests++});G.on("pass",function(I){E.passes=E.passes||0;var H=I.slow()/2;I.speed=I.duration>I.slow()?"slow":I.duration>H?"medium":"fast";E.passes++});G.on("fail",function(I,H){E.failures=E.failures||0;E.failures++;I.err=H;F.push(I)});G.on("end",function(){E.end=new z;E.duration=new z-E.start});G.on("pending",function(){E.pending++})}v.prototype.epilogue=function(){var E=this.stats,D,G;console.log();function F(H){return 1==H?"test":"tests"}if(E.failures){D=r("bright fail","  "+t.symbols.err)+r("fail"," %d of %d %s failed")+r("light",":");console.error(D,E.failures,this.runner.total,F(this.runner.total));v.list(this.failures);console.error();return}D=r("bright pass"," ")+r("green"," %d %s complete")+r("light"," (%s)");console.log(D,E.tests||0,F(E.tests),m(E.duration));if(E.pending){D=r("pending"," ")+r("pending"," %d %s pending");console.log(D,E.pending,F(E.pending))}console.log()};function p(E,D){E=String(E);return Array(D-E.length+1).join(" ")+E}function u(F,D,E){return B["diff"+D](F.actual,F.expected).map(function(G){if(E){G.value=G.value.replace(/\t/g,"<tab>").replace(/\r/g,"<CR>").replace(/\n/g,"<LF>\n")}if(G.added){return o("diff added",G.value)}if(G.removed){return o("diff removed",G.value)}return G.value}).join("")}function o(D,E){return E.split("\n").map(function(F){return r(D,F)}).join("\n")}});c.register("reporters/doc.js",function(r,n,o){var q=o("./base"),m=o("../utils");n=r.exports=p;function p(w){q.call(this,w);var t=this,u=this.stats,v=w.total,x=2;function s(){return Array(x).join("  ")}w.on("suite",function(y){if(y.root){return}++x;console.log('%s<section class="suite">',s());++x;console.log("%s<h1>%s</h1>",s(),m.escape(y.title));console.log("%s<dl>",s())});w.on("suite end",function(y){if(y.root){return}console.log("%s</dl>",s());--x;console.log("%s</section>",s());--x});w.on("pass",function(z){console.log("%s  <dt>%s</dt>",s(),m.escape(z.title));var y=m.escape(m.clean(z.fn.toString()));console.log("%s  <dd><pre><code>%s</code></pre></dd>",s(),y)})}});c.register("reporters/dot.js",function(q,n,o){var p=o("./base"),m=p.color;n=q.exports=s;function s(w){p.call(this,w);var t=this,u=this.stats,v=p.window.width*0.75|0,x=0;w.on("start",function(){a.stdout.write("\n  ")});w.on("pending",function(y){a.stdout.write(m("pending",p.symbols.dot))});w.on("pass",function(y){if(++x%v==0){a.stdout.write("\n  ")}if("slow"==y.speed){a.stdout.write(m("bright yellow",p.symbols.dot))}else{a.stdout.write(m(y.speed,p.symbols.dot))}});w.on("fail",function(z,y){if(++x%v==0){a.stdout.write("\n  ")}a.stdout.write(m("fail",p.symbols.dot))});w.on("end",function(){console.log();t.epilogue()})}function r(){}r.prototype=p.prototype;s.prototype=new r;s.prototype.constructor=s});c.register("reporters/html-cov.js",function(r,o,p){var q=p("./json-cov"),m=p("browser/fs");o=r.exports=n;function n(w){var x=p("jade"),u=__dirname+"/templates/coverage.jade",y=m.readFileSync(u,"utf8"),v=x.compile(y,{filename:u}),t=this;q.call(this,w,false);w.on("end",function(){a.stdout.write(v({cov:t.cov,coverageClass:s}))})}function s(t){if(t>=75){return"high"}if(t>=50){return"medium"}if(t>=25){return"low"}return"terrible"}});c.register("reporters/html.js",function(p,F,t){var v=t("./base"),E=t("../utils"),s=t("../browser/progress"),y=E.escape;var q=global.Date,o=global.setTimeout,m=global.setInterval,r=global.clearTimeout,w=global.clearInterval;F=p.exports=D;var B='<ul id="mocha-stats"><li class="progress"><canvas width="40" height="40"></canvas></li><li class="passes"><a href="#">passes:</a> <em>0</em></li><li class="failures"><a href="#">failures:</a> <em>0</em></li><li class="duration">duration: <em>0</em>s</li></ul>';function D(N,S){v.call(this,N);var O=this,W=this.stats,X=N.total,V=n(B),P=V.getElementsByTagName("li"),J=P[1].getElementsByTagName("em")[0],U=P[1].getElementsByTagName("a")[0],H=P[2].getElementsByTagName("em")[0],Q=P[2].getElementsByTagName("a")[0],G=P[3].getElementsByTagName("em")[0],I=V.getElementsByTagName("canvas")[0],T=n('<ul id="mocha-report"></ul>'),L=[T],K,R;S=S||document.getElementById("mocha");if(I.getContext){var M=window.devicePixelRatio||1;I.style.width=I.width;I.style.height=I.height;I.width*=M;I.height*=M;R=I.getContext("2d");R.scale(M,M);K=new s}if(!S){return A("#mocha div missing, add it to your document")}u(U,"click",function(){z();var Y=/pass/.test(T.className)?"":" pass";T.className=T.className.replace(/fail|pass/g,"")+Y;if(T.className.trim()){C("test pass")}});u(Q,"click",function(){z();var Y=/fail/.test(T.className)?"":" fail";T.className=T.className.replace(/fail|pass/g,"")+Y;if(T.className.trim()){C("test fail")}});S.appendChild(V);S.appendChild(T);if(K){K.size(40)}N.on("suite",function(aa){if(aa.root){return}var Y="?grep="+encodeURIComponent(aa.fullTitle());var Z=n('<li class="suite"><h1><a href="%s">%s</a></h1></li>',Y,y(aa.title));L[0].appendChild(Z);L.unshift(document.createElement("ul"));Z.appendChild(L[0])});N.on("suite end",function(Y){if(Y.root){return}L.shift()});N.on("fail",function(Z,Y){if("hook"==Z.type){N.emit("test end",Z)}});N.on("test end",function(ae){var ab=W.tests/this.total*100|0;if(K){K.update(ab).draw(R)}var Z=new q-W.start;x(J,W.passes);x(H,W.failures);x(G,(Z/1000).toFixed(2));if("passed"==ae.state){var aa=n('<li class="test pass %e"><h2>%e<span class="duration">%ems</span> <a href="?grep=%e" class="replay">‣</a></h2></li>',ae.speed,ae.title,ae.duration,encodeURIComponent(ae.fullTitle()))}else{if(ae.pending){var aa=n('<li class="test pass pending"><h2>%e</h2></li>',ae.title)}else{var aa=n('<li class="test fail"><h2>%e <a href="?grep=%e" class="replay">‣</a></h2></li>',ae.title,encodeURIComponent(ae.fullTitle()));var ad=ae.err.stack||ae.err.toString();if(!~ad.indexOf(ae.err.message)){ad=ae.err.message+"\n"+ad}if("[object Error]"==ad){ad=ae.err.message}if(!ae.err.stack&&ae.err.sourceURL&&ae.err.line!==undefined){ad+="\n("+ae.err.sourceURL+":"+ae.err.line+")"}aa.appendChild(n('<pre class="error">%e</pre>',ad))}}if(!ae.pending){var Y=aa.getElementsByTagName("h2")[0];u(Y,"click",function(){ac.style.display="none"==ac.style.display?"block":"none"});var ac=n("<pre><code>%e</code></pre>",E.clean(ae.fn.toString()));aa.appendChild(ac);ac.style.display="none"}if(L[0]){L[0].appendChild(aa)}})}function A(G){document.body.appendChild(n('<div id="mocha-error">%s</div>',G))}function n(I){var G=arguments,J=document.createElement("div"),H=1;J.innerHTML=I.replace(/%([se])/g,function(K,L){switch(L){case"s":return String(G[H++]);case"e":return y(G[H++])}});return J.firstChild}function C(J){var I=document.getElementsByClassName("suite");for(var H=0;H<I.length;H++){var G=I[H].getElementsByClassName(J);if(0==G.length){I[H].className+=" hidden"}}}function z(){var H=document.getElementsByClassName("suite hidden");for(var G=0;G<H.length;++G){H[G].className=H[G].className.replace("suite hidden","suite")}}function x(G,H){if(G.textContent){G.textContent=H}else{G.innerText=H}}function u(H,I,G){if(H.addEventListener){H.addEventListener(I,G,false)}else{H.attachEvent("on"+I,G)}}});c.register("reporters/index.js",function(o,m,n){m.Base=n("./base");m.Dot=n("./dot");m.Doc=n("./doc");m.TAP=n("./tap");m.JSON=n("./json");m.HTML=n("./html");m.List=n("./list");m.Min=n("./min");m.Spec=n("./spec");m.Nyan=n("./nyan");m.XUnit=n("./xunit");m.Markdown=n("./markdown");m.Progress=n("./progress");m.Landing=n("./landing");m.JSONCov=n("./json-cov");m.HTMLCov=n("./html-cov");m.JSONStream=n("./json-stream");m.Teamcity=n("./teamcity")});c.register("reporters/json-cov.js",function(r,m,n){var q=n("./base");m=r.exports=p;function p(z,v){var u=this,v=1==arguments.length?true:v;q.call(this,z);var x=[],w=[],y=[];z.on("test end",function(A){x.push(A)});z.on("pass",function(A){y.push(A)});z.on("fail",function(A){w.push(A)});z.on("end",function(){var B=global._$jscoverage||{};var A=u.cov=t(B);A.stats=u.stats;A.tests=x.map(o);A.failures=w.map(o);A.passes=y.map(o);if(!v){return}a.stdout.write(JSON.stringify(A,null,2))})}function t(w){var v={instrumentation:"node-jscoverage",sloc:0,hits:0,misses:0,coverage:0,files:[]};for(var u in w){var x=s(u,w[u]);v.files.push(x);v.hits+=x.hits;v.misses+=x.misses;v.sloc+=x.sloc}v.files.sort(function(z,y){return z.filename.localeCompare(y.filename)});if(v.sloc>0){v.coverage=(v.hits/v.sloc)*100}return v}function s(u,w){var v={filename:u,coverage:0,hits:0,misses:0,sloc:0,source:{}};w.source.forEach(function(x,y){y++;if(w[y]===0){v.misses++;v.sloc++}else{if(w[y]!==undefined){v.hits++;v.sloc++}}v.source[y]={source:x,coverage:w[y]===undefined?"":w[y]}});v.coverage=v.hits/v.sloc*100;return v}function o(u){return{title:u.title,fullTitle:u.fullTitle(),duration:u.duration}}});c.register("reporters/json-stream.js",function(s,n,o){var r=o("./base"),m=r.color;n=s.exports=q;function q(w){r.call(this,w);var t=this,u=this.stats,v=w.total;w.on("start",function(){console.log(JSON.stringify(["start",{total:v}]))});w.on("pass",function(x){console.log(JSON.stringify(["pass",p(x)]))});w.on("fail",function(y,x){console.log(JSON.stringify(["fail",p(y)]))});w.on("end",function(){a.stdout.write(JSON.stringify(["end",t.stats]))})}function p(t){return{title:t.title,fullTitle:t.fullTitle(),duration:t.duration}}});c.register("reporters/json.js",function(s,o,p){var r=p("./base"),t=r.cursor,n=r.color;o=s.exports=m;function m(y){var u=this;r.call(this,y);var w=[],v=[],x=[];y.on("test end",function(z){w.push(z)});y.on("pass",function(z){x.push(z)});y.on("fail",function(z){v.push(z)});y.on("end",function(){var z={stats:u.stats,tests:w.map(q),failures:v.map(q),passes:x.map(q)};a.stdout.write(JSON.stringify(z,null,2))})}function q(u){return{title:u.title,fullTitle:u.fullTitle(),duration:u.duration}}});c.register("reporters/landing.js",function(q,n,o){var p=o("./base"),s=p.cursor,m=p.color;n=q.exports=t;p.colors.plane=0;p.colors["plane crash"]=31;p.colors.runway=90;function t(B){p.call(this,B);var D=this,x=this.stats,u=p.window.width*0.75|0,z=B.total,A=a.stdout,y=m("plane","✈"),w=-1,v=0;function C(){var E=Array(u).join("-");return"  "+m("runway",E)}B.on("start",function(){A.write("\n  ");s.hide()});B.on("test end",function(F){var E=-1==w?u*++v/z|0:w;if("failed"==F.state){y=m("plane crash","✈");w=E}A.write("\u001b[4F\n\n");A.write(C());A.write("\n  ");A.write(m("runway",Array(E).join("⋅")));A.write(y);A.write(m("runway",Array(u-E).join("⋅")+"\n"));A.write(C());A.write("\u001b[0m")});B.on("end",function(){s.show();console.log();D.epilogue()})}function r(){}r.prototype=p.prototype;t.prototype=new r;t.prototype.constructor=t});c.register("reporters/list.js",function(r,n,o){var q=o("./base"),t=q.cursor,m=q.color;n=r.exports=p;function p(w){q.call(this,w);var u=this,v=this.stats,x=0;w.on("start",function(){console.log()});w.on("test",function(y){a.stdout.write(m("pass","    "+y.fullTitle()+": "))});w.on("pending",function(z){var y=m("checkmark","  -")+m("pending"," %s");console.log(y,z.fullTitle())});w.on("pass",function(z){var y=m("checkmark","  "+q.symbols.dot)+m("pass"," %s: ")+m(z.speed,"%dms");t.CR();console.log(y,z.fullTitle(),z.duration)});w.on("fail",function(z,y){t.CR();console.log(m("fail","  %d) %s"),++x,z.fullTitle())});w.on("end",u.epilogue.bind(u))}function s(){}s.prototype=q.prototype;p.prototype=new s;p.prototype.constructor=p});c.register("reporters/markdown.js",function(q,n,o){var p=o("./base"),m=o("../utils");n=q.exports=r;function r(A){p.call(this,A);var B=this,w=this.stats,t=0,u="";function z(C){return Array(t).join("#")+" "+C}function v(){return Array(t).join("  ")}function y(D,E){var C=E;E=E[D.title]=E[D.title]||{suite:D};D.suites.forEach(function(F){y(F,E)});return C}function x(F,G){++G;var C="";var E;for(var D in F){if("suite"==D){continue}if(D){E=" - ["+D+"](#"+m.slug(F[D].suite.fullTitle())+")\n"}if(D){C+=Array(G).join("  ")+E}C+=x(F[D],G)}--G;return C}function s(C){var D=y(C,{});return x(D,0)}s(A.suite);A.on("suite",function(D){++t;var C=m.slug(D.fullTitle());u+='<a name="'+C+'"></a>\n';u+=z(D.title)+"\n"});A.on("suite end",function(C){--t});A.on("pass",function(D){var C=m.clean(D.fn.toString());u+=D.title+".\n";u+="\n```js\n";u+=C+"\n";u+="```\n\n"});A.on("end",function(){a.stdout.write("# TOC\n");a.stdout.write(s(A.suite));a.stdout.write(u)})}});c.register("reporters/min.js",function(q,n,o){var p=o("./base");n=q.exports=m;function m(s){p.call(this,s);s.on("start",function(){a.stdout.write("\u001b[2J");a.stdout.write("\u001b[1;3H")});s.on("end",this.epilogue.bind(this))}function r(){}r.prototype=p.prototype;m.prototype=new r;m.prototype.constructor=m});c.register("reporters/nyan.js",function(q,n,o){var p=o("./base"),m=p.color;n=q.exports=t;function t(E){p.call(this,E);var G=this,B=this.stats,v=p.window.width*0.75|0,y=this.rainbowColors=G.generateColors(),D=this.colorIndex=0,C=this.numberOfLines=4,F=this.trajectories=[[],[],[],[]],u=this.nyanCatWidth=11,x=this.trajectoryWidthMax=(v-u),z=this.scoreboardWidth=5,A=this.tick=0,w=0;E.on("start",function(){p.cursor.hide();G.draw("start")});E.on("pending",function(H){G.draw("pending")});E.on("pass",function(H){G.draw("pass")});E.on("fail",function(I,H){G.draw("fail")});E.on("end",function(){p.cursor.show();for(var H=0;H<G.numberOfLines;H++){r("\n")}G.epilogue()})}t.prototype.draw=function(u){this.appendRainbow();this.drawScoreboard();this.drawRainbow();this.drawNyanCat(u);this.tick=!this.tick};t.prototype.drawScoreboard=function(){var w=this.stats;var v=p.colors;function u(x,y){r(" ");r("\u001b["+x+"m"+y+"\u001b[0m");r("\n")}u(v.green,w.passes);u(v.fail,w.failures);u(v.pending,w.pending);r("\n");this.cursorUp(this.numberOfLines)};t.prototype.appendRainbow=function(){var x=this.tick?"_":"-";var u=this.rainbowify(x);for(var w=0;w<this.numberOfLines;w++){var v=this.trajectories[w];if(v.length>=this.trajectoryWidthMax){v.shift()}v.push(u)}};t.prototype.drawRainbow=function(){var u=this;this.trajectories.forEach(function(v,w){r("\u001b["+u.scoreboardWidth+"C");r(v.join(""));r("\n")});this.cursorUp(this.numberOfLines)};t.prototype.drawNyanCat=function(v){var x=this;var u=this.scoreboardWidth+this.trajectories[0].length;var w="\u001b["+u+"C";var A="";r(w);r("_,------,");r("\n");r(w);A=x.tick?"  ":"   ";r("_|"+A+"/\\_/\\ ");r("\n");r(w);A=x.tick?"_":"__";var y=x.tick?"~":"^";var z;switch(v){case"pass":z="( ^ .^)";break;case"fail":z="( o .o)";break;default:z="( - .-)"}r(y+"|"+A+z+" ");r("\n");r(w);A=x.tick?" ":"  ";r(A+'""  "" ');r("\n");this.cursorUp(this.numberOfLines)};t.prototype.cursorUp=function(u){r("\u001b["+u+"A")};t.prototype.cursorDown=function(u){r("\u001b["+u+"B")};t.prototype.generateColors=function(){var v=[];for(var w=0;w<(6*7);w++){var z=Math.floor(Math.PI/3);var A=(w*(1/6));var y=Math.floor(3*Math.sin(A)+3);var x=Math.floor(3*Math.sin(A+2*z)+3);var u=Math.floor(3*Math.sin(A+4*z)+3);v.push(36*y+6*x+u+16)}return v};t.prototype.rainbowify=function(v){var u=this.rainbowColors[this.colorIndex%this.rainbowColors.length];this.colorIndex+=1;return"\u001b[38;5;"+u+"m"+v+"\u001b[0m"};function r(u){a.stdout.write(u)}function s(){}s.prototype=p.prototype;t.prototype=new s;t.prototype.constructor=t});c.register("reporters/progress.js",function(r,n,o){var q=o("./base"),t=q.cursor,m=q.color;n=r.exports=p;q.colors.progress=90;function p(B,x){q.call(this,B);var w=this,x=x||{},y=this.stats,z=q.window.width*0.5|0,A=B.total,v=0,u=Math.max;x.open=x.open||"[";x.complete=x.complete||"▬";x.incomplete=x.incomplete||q.symbols.dot;x.close=x.close||"]";x.verbose=false;B.on("start",function(){console.log();t.hide()});B.on("test end",function(){v++;var C=A-v,E=v/A,F=z*E|0,D=z-F;t.CR();a.stdout.write("\u001b[J");a.stdout.write(m("progress","  "+x.open));a.stdout.write(Array(F).join(x.complete));a.stdout.write(Array(D).join(x.incomplete));a.stdout.write(m("progress",x.close));if(x.verbose){a.stdout.write(m("progress"," "+v+" of "+A))}});B.on("end",function(){t.show();console.log();w.epilogue()})}function s(){}s.prototype=q.prototype;p.prototype=new s;p.prototype.constructor=p});c.register("reporters/spec.js",function(q,n,o){var p=o("./base"),s=p.cursor,m=p.color;n=q.exports=t;function t(x){p.call(this,x);var v=this,w=this.stats,y=0,z=0;function u(){return Array(y).join("  ")}x.on("start",function(){console.log()});x.on("suite",function(A){++y;console.log(m("suite","%s%s"),u(),A.title)});x.on("suite end",function(A){--y;if(1==y){console.log()}});x.on("test",function(A){a.stdout.write(u()+m("pass","  ◦ "+A.title+": "))});x.on("pending",function(B){var A=u()+m("pending","  - %s");console.log(A,B.title)});x.on("pass",function(B){if("fast"==B.speed){var A=u()+m("checkmark","  "+p.symbols.ok)+m("pass"," %s ");s.CR();console.log(A,B.title)}else{var A=u()+m("checkmark","  "+p.symbols.ok)+m("pass"," %s ")+m(B.speed,"(%dms)");s.CR();console.log(A,B.title,B.duration)}});x.on("fail",function(B,A){s.CR();console.log(u()+m("fail","  %d) %s"),++z,B.title)});x.on("end",v.epilogue.bind(v))}function r(){}r.prototype=p.prototype;t.prototype=new r;t.prototype.constructor=t});c.register("reporters/tap.js",function(q,n,o){var p=o("./base"),s=p.cursor,m=p.color;n=q.exports=t;function t(y){p.call(this,y);var u=this,v=this.stats,z=1,x=0,w=0;y.on("start",function(){var A=y.grepTotal(y.suite);console.log("%d..%d",1,A)});y.on("test end",function(){++z});y.on("pending",function(A){console.log("ok %d %s # SKIP -",z,r(A))});y.on("pass",function(A){x++;console.log("ok %d %s",z,r(A))});y.on("fail",function(B,A){w++;console.log("not ok %d %s",z,r(B));if(A.stack){console.log(A.stack.replace(/^/gm,"  "))}});y.on("end",function(){console.log("# tests "+(x+w));console.log("# pass "+x);console.log("# fail "+w)})}function r(u){return u.fullTitle().replace(/#/g,"")}});c.register("reporters/teamcity.js",function(p,m,n){var o=n("./base");m=p.exports=r;function r(t){o.call(this,t);var s=this.stats;t.on("start",function(){console.log("##teamcity[testSuiteStarted name='mocha.suite']")});t.on("test",function(u){console.log("##teamcity[testStarted name='"+q(u.fullTitle())+"']")});t.on("fail",function(v,u){console.log("##teamcity[testFailed name='"+q(v.fullTitle())+"' message='"+q(u.message)+"']")});t.on("pending",function(u){console.log("##teamcity[testIgnored name='"+q(u.fullTitle())+"' message='pending']")});t.on("test end",function(u){console.log("##teamcity[testFinished name='"+q(u.fullTitle())+"' duration='"+u.duration+"']")});t.on("end",function(){console.log("##teamcity[testSuiteFinished name='mocha.suite' duration='"+s.duration+"']")})}function q(s){return s.replace(/\|/g,"||").replace(/\n/g,"|n").replace(/\r/g,"|r").replace(/\[/g,"|[").replace(/\]/g,"|]").replace(/\u0085/g,"|x").replace(/\u2028/g,"|l").replace(/\u2029/g,"|p").replace(/'/g,"|'")}});c.register("reporters/xunit.js",function(m,p,n){var q=n("./base"),x=n("../utils"),z=x.escape;var t=global.Date,o=global.setTimeout,s=global.setInterval,v=global.clearTimeout,y=global.clearInterval;p=m.exports=r;function r(F){q.call(this,F);var D=this.stats,E=[],C=this;F.on("pass",function(G){E.push(G)});F.on("fail",function(G){E.push(G)});F.on("end",function(){console.log(B("testsuite",{name:"Mocha Tests",tests:D.tests,failures:D.failures,errors:D.failures,skip:D.tests-D.failures-D.passes,timestamp:(new t).toUTCString(),time:D.duration/1000},false));E.forEach(u);console.log("</testsuite>")})}function A(){}A.prototype=q.prototype;r.prototype=new A;r.prototype.constructor=r;function u(E){var C={classname:E.parent.fullTitle(),name:E.title,time:E.duration/1000};if("failed"==E.state){var D=E.err;C.message=z(D.message);console.log(B("testcase",C,false,B("failure",C,false,w(D.stack))))}else{if(E.pending){console.log(B("testcase",C,false,B("skipped",{},true)))}else{console.log(B("testcase",C,true))}}}function B(F,E,J,H){var D=J?"/>":">",I=[],C;for(var G in E){I.push(G+'="'+z(E[G])+'"')}C="<"+F+(I.length?" "+I.join(" "):"")+D;if(H){C+=H+"</"+F+D}return C}function w(C){return"<![CDATA["+z(C)+"]]>"}});c.register("runnable.js",function(o,s,p){var z=p("browser/events").EventEmitter,m=p("browser/debug")("mocha:runnable"),q=p("./ms");var u=global.Date,r=global.setTimeout,t=global.setInterval,v=global.clearTimeout,w=global.clearInterval;var n=Object.prototype.toString;o.exports=y;function y(B,A){this.title=B;this.fn=A;this.async=A&&A.length;this.sync=!this.async;this._timeout=2000;this._slow=75;this.timedOut=false}function x(){}x.prototype=z.prototype;y.prototype=new x;y.prototype.constructor=y;y.prototype.timeout=function(A){if(0==arguments.length){return this._timeout}if("string"==typeof A){A=q(A)}m("timeout %d",A);this._timeout=A;if(this.timer){this.resetTimeout()}return this};y.prototype.slow=function(A){if(0===arguments.length){return this._slow}if("string"==typeof A){A=q(A)}m("timeout %d",A);this._slow=A;return this};y.prototype.fullTitle=function(){return this.parent.fullTitle()+" "+this.title};y.prototype.clearTimeout=function(){v(this.timer)};y.prototype.inspect=function(){return JSON.stringify(this,function(A,B){if("_"==A[0]){return}if("parent"==A){return"#<Suite>"}if("ctx"==A){return"#<Context>"}return B},2)};y.prototype.resetTimeout=function(){var A=this,B=this.timeout();this.clearTimeout();if(B){this.timer=r(function(){A.callback(new Error("timeout of "+B+"ms exceeded"));A.timedOut=true},B)}};y.prototype.run=function(G){var H=this,A=this.timeout(),B=new u,I=this.ctx,D,F;if(I){I.runnable(this)}if(this.async){if(A){this.timer=r(function(){E(new Error("timeout of "+A+"ms exceeded"));H.timedOut=true},A)}}function J(K){if(F){return}F=true;H.emit("error",K||new Error("done() called multiple times"))}function E(K){if(H.timedOut){return}if(D){return J(K)}H.clearTimeout();H.duration=new u-B;D=true;G(K)}this.callback=E;if(this.async){try{this.fn.call(I,function(K){if(K instanceof Error||n.call(K)==="[object Error]"){return E(K)}if(null!=K){return E(new Error("done() invoked with non-Error: "+K))}E()})}catch(C){E(C)}return}if(this.asyncOnly){return E(new Error("--async-only option in use without declaring `done()`"))}try{if(!this.pending){this.fn.call(I)}this.duration=new u-B;G()}catch(C){G(C)}}});c.register("runner.js",function(p,r,q){var y=q("browser/events").EventEmitter,m=q("browser/debug")("mocha:runner"),x=q("./test"),t=q("./utils"),n=t.filter,v=t.keys;var s=["setTimeout","clearTimeout","setInterval","clearInterval","XMLHttpRequest","Date"];p.exports=o;function o(A){var z=this;this._globals=[];this.suite=A;this.total=A.total();this.failures=0;this.on("test end",function(B){z.checkGlobals(B)});this.on("hook end",function(B){z.checkGlobals(B)});this.grep(/.*/);this.globals(this.globalProps().concat(["errno"]))}o.immediately=global.setImmediate||a.nextTick;function u(){}u.prototype=y.prototype;o.prototype=new u;o.prototype.constructor=o;o.prototype.grep=function(z,A){m("grep %s",z);this._grep=z;this._invert=A;this.total=this.grepTotal(this.suite);return this};o.prototype.grepTotal=function(A){var z=this;var B=0;A.eachTest(function(D){var C=z._grep.test(D.fullTitle());if(z._invert){C=!C}if(C){B++}});return B};o.prototype.globalProps=function(){var A=t.keys(global);for(var z=0;z<s.length;++z){if(~t.indexOf(A,s[z])){continue}A.push(s[z])}return A};o.prototype.globals=function(z){if(0==arguments.length){return this._globals}m("globals %j",z);t.forEach(z,function(A){this._globals.push(A)},this);return this};o.prototype.checkGlobals=function(D){if(this.ignoreLeaks){return}var A=this._globals;var B=this.globalProps();var C=a.kill;var z;if(C&&1==A.length-B.length){return}else{if(2==A.length-B.length){return}}z=w(A,B);this._globals=this._globals.concat(z);if(z.length>1){this.fail(D,new Error("global leaks detected: "+z.join(", ")+""))}else{if(z.length){this.fail(D,new Error("global leak detected: "+z[0]))}}};o.prototype.fail=function(A,z){++this.failures;A.state="failed";if("string"==typeof z){z=new Error('the string "'+z+'" was thrown, throw an Error :)')}this.emit("fail",A,z)};o.prototype.failHook=function(A,z){this.fail(A,z);this.emit("end")};o.prototype.hook=function(B,E){var D=this.suite,z=D["_"+B],A=this,F;function C(G){var H=z[G];if(!H){return E()}A.currentRunnable=H;A.emit("hook",H);H.on("error",function(I){A.failHook(H,I)});H.run(function(J){H.removeAllListeners("error");var I=H.error();if(I){A.fail(A.test,I)}if(J){return A.failHook(H,J)}A.emit("hook end",H);C(++G)})}o.immediately(function(){C(0)})};o.prototype.hooks=function(A,D,C){var z=this,E=this.suite;function B(F){z.suite=F;if(!F){z.suite=E;return C()}z.hook(A,function(G){if(G){z.suite=E;return C(G)}B(D.pop())})}B(D.pop())};o.prototype.hookUp=function(z,A){var B=[this.suite].concat(this.parents()).reverse();this.hooks(z,B,A)};o.prototype.hookDown=function(z,A){var B=[this.suite].concat(this.parents());this.hooks(z,B,A)};o.prototype.parents=function(){var z=this.suite,A=[];while(z=z.parent){A.push(z)}return A};o.prototype.runTest=function(A){var C=this.test,z=this;if(this.asyncOnly){C.asyncOnly=true}try{C.on("error",function(D){z.fail(C,D)});C.run(A)}catch(B){A(B)}};o.prototype.runTests=function(D,C){var z=this,B=D.tests.slice(),E;function A(G){if(z.failures&&D._bail){return C()}E=B.shift();if(!E){return C()}var F=z._grep.test(E.fullTitle());if(z._invert){F=!F}if(!F){return A()}if(E.pending){z.emit("pending",E);z.emit("test end",E);return A()}z.emit("test",z.test=E);z.hookDown("beforeEach",function(){z.currentRunnable=z.test;z.runTest(function(H){E=z.test;if(H){z.fail(E,H);z.emit("test end",E);return z.hookUp("afterEach",A)}E.state="passed";z.emit("pass",E);z.emit("test end",E);z.hookUp("afterEach",A)})})}this.next=A;A()};o.prototype.runSuite=function(E,D){var F=this.grepTotal(E),A=this,B=0;m("run suite %s",E.fullTitle());if(!F){return D()}this.emit("suite",this.suite=E);function C(){var G=E.suites[B++];if(!G){return z()}A.runSuite(G,C)}function z(){A.suite=E;A.hook("afterAll",function(){A.emit("suite end",E);D()})}this.hook("beforeAll",function(){A.runTests(E,C)})};o.prototype.uncaught=function(z){m("uncaught exception %s",z.message);var A=this.currentRunnable;if(!A||"failed"==A.state){return}A.clearTimeout();z.uncaught=true;this.fail(A,z);if("test"==A.type){this.emit("test end",A);this.hookUp("afterEach",this.next);return}this.emit("end")};o.prototype.run=function(B){var A=this,B=B||function(){};function z(C){A.uncaught(C)}m("start");this.on("end",function(){m("end");a.removeListener("uncaughtException",z);B(A.failures)});this.emit("start");this.runSuite(this.suite,function(){m("finished running");A.emit("end")});a.on("uncaughtException",z);return this};function w(z,A){return n(A,function(C){if(/^d+/.test(C)){return false}var B=n(z,function(D){if(~D.indexOf("*")){return 0==C.indexOf(D.split("*")[0])}if(/^mocha-/.test(C)){return true}return C==D});return B.length==0&&(!global.navigator||"onerror"!==C)})}});c.register("suite.js",function(o,s,p){var v=p("browser/events").EventEmitter,n=p("browser/debug")("mocha:suite"),q=p("./ms"),t=p("./utils"),m=p("./hook");s=o.exports=r;s.create=function(x,y){var w=new r(y,x.ctx);w.parent=x;if(x.pending){w.pending=true}y=w.fullTitle();x.addSuite(w);return w};function r(x,w){this.title=x;this.ctx=w;this.suites=[];this.tests=[];this.pending=false;this._beforeEach=[];this._beforeAll=[];this._afterEach=[];this._afterAll=[];this.root=!x;this._timeout=2000;this._slow=75;this._bail=false}function u(){}u.prototype=v.prototype;r.prototype=new u;r.prototype.constructor=r;r.prototype.clone=function(){var w=new r(this.title);n("clone");w.ctx=this.ctx;w.timeout(this.timeout());w.slow(this.slow());w.bail(this.bail());return w};r.prototype.timeout=function(w){if(0==arguments.length){return this._timeout}if("string"==typeof w){w=q(w)}n("timeout %d",w);this._timeout=parseInt(w,10);return this};r.prototype.slow=function(w){if(0===arguments.length){return this._slow}if("string"==typeof w){w=q(w)}n("slow %d",w);this._slow=w;return this};r.prototype.bail=function(w){if(0==arguments.length){return this._bail}n("bail %s",w);this._bail=w;return this};r.prototype.beforeAll=function(w){if(this.pending){return this}var x=new m('"before all" hook',w);x.parent=this;x.timeout(this.timeout());x.slow(this.slow());x.ctx=this.ctx;this._beforeAll.push(x);this.emit("beforeAll",x);return this};r.prototype.afterAll=function(w){if(this.pending){return this}var x=new m('"after all" hook',w);x.parent=this;x.timeout(this.timeout());x.slow(this.slow());x.ctx=this.ctx;this._afterAll.push(x);this.emit("afterAll",x);return this};r.prototype.beforeEach=function(w){if(this.pending){return this}var x=new m('"before each" hook',w);x.parent=this;x.timeout(this.timeout());x.slow(this.slow());x.ctx=this.ctx;this._beforeEach.push(x);this.emit("beforeEach",x);return this};r.prototype.afterEach=function(w){if(this.pending){return this}var x=new m('"after each" hook',w);x.parent=this;x.timeout(this.timeout());x.slow(this.slow());x.ctx=this.ctx;this._afterEach.push(x);this.emit("afterEach",x);return this};r.prototype.addSuite=function(w){w.parent=this;w.timeout(this.timeout());w.slow(this.slow());w.bail(this.bail());this.suites.push(w);this.emit("suite",w);return this};r.prototype.addTest=function(w){w.parent=this;w.timeout(this.timeout());w.slow(this.slow());w.ctx=this.ctx;this.tests.push(w);this.emit("test",w);return this};r.prototype.fullTitle=function(){if(this.parent){var w=this.parent.fullTitle();if(w){return w+" "+this.title}}return this.title};r.prototype.total=function(){return t.reduce(this.suites,function(x,w){return x+w.total()},0)+this.tests.length};r.prototype.eachTest=function(w){t.forEach(this.tests,w);t.forEach(this.suites,function(x){x.eachTest(w)});return this}});c.register("test.js",function(o,m,n){var r=n("./runnable");o.exports=q;function q(t,s){r.call(this,t,s);this.pending=!s;this.type="test"}function p(){}p.prototype=r.prototype;q.prototype=new p;q.prototype.constructor=q});c.register("utils.js",function(o,s,r){var t=r("browser/fs"),v=r("browser/path"),n=v.join,m=r("browser/debug")("mocha:watch");var u=["node_modules",".git"];s.escape=function(w){return String(w).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};s.forEach=function(w,A,z){for(var y=0,x=w.length;y<x;y++){A.call(z,w[y],y)}};s.indexOf=function(w,z,A){for(var y=A||0,x=w.length;y<x;y++){if(w[y]===z){return y}}return -1};s.reduce=function(w,z,B){var A=B;for(var y=0,x=w.length;y<x;y++){A=z(A,w[y],y,w)}return A};s.filter=function(w,A){var y=[];for(var z=0,x=w.length;z<x;z++){var B=w[z];if(A(B,z,w)){y.push(B)}}return y};s.keys=Object.keys||function(z){var y=[],w=Object.prototype.hasOwnProperty;for(var x in z){if(w.call(z,x)){y.push(x)}}return y};s.watch=function(y,x){var w={interval:100};y.forEach(function(z){m("file %s",z);t.watchFile(z,w,function(B,A){if(A.mtime<B.mtime){x(z)}})})};function q(w){return !~u.indexOf(w)}s.files=function(x,w){w=w||[];t.readdirSync(x).filter(q).forEach(function(y){y=n(x,y);if(t.statSync(y).isDirectory()){s.files(y,w)}else{if(y.match(/\.(js|coffee)$/)){w.push(y)}}});return w};s.slug=function(w){return w.toLowerCase().replace(/ +/g,"-").replace(/[^-\w]/g,"")};s.clean=function(y){y=y.replace(/^function *\(.*\) *{/,"").replace(/\s+\}$/,"");var w=y.match(/^\n?( *)/)[1].length,x=new RegExp("^ {"+w+"}","gm");y=y.replace(x,"");return s.trim(y)};s.escapeRegexp=function(w){return w.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};s.trim=function(w){return w.replace(/^\s+|\s+$/g,"")};s.parseQuery=function(w){return s.reduce(w.replace("?","").split("&"),function(z,B){var y=B.indexOf("="),x=B.slice(0,y),A=B.slice(++y);z[x]=decodeURIComponent(A);return z},{})};function p(w){return w.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\/\/(.*)/gm,'<span class="comment">//$1</span>').replace(/('.*?')/gm,'<span class="string">$1</span>').replace(/(\d+\.\d+)/gm,'<span class="number">$1</span>').replace(/(\d+)/gm,'<span class="number">$1</span>').replace(/\bnew *(\w+)/gm,'<span class="keyword">new</span> <span class="init">$1</span>').replace(/\b(function|new|throw|return|var|if|else)\b/gm,'<span class="keyword">$1</span>')}s.highlightTags=function(x){var z=document.getElementsByTagName(x);for(var y=0,w=z.length;y<w;++y){z[y].innerHTML=p(z[y].innerHTML)}}});var i=window.Date;var e=window.setTimeout;var g=window.setInterval;var k=window.clearTimeout;var l=window.clearInterval;var a={};a.exit=function(m){};a.stdout={};global=window;a.removeListener=function(m){if("uncaughtException"==m){window.onerror=null}};a.on=function(n,m){if("uncaughtException"==n){window.onerror=function(q,p,o){m(new Error(q+" ("+p+":"+o+")"))}}};var f=window.Mocha=c("mocha"),j=window.mocha=new f({reporter:"html"});var b=[],h;function d(){var m=new i().getTime();while(b.length&&(new i().getTime()-m)<100){b.shift()()}if(b.length){h=e(d,0)}else{h=null}}f.Runner.immediately=function(m){b.push(m);if(!h){h=e(d,0)}};j.ui=function(m){f.prototype.ui.call(this,m);this.suite.emit("pre-require",window,null,this);return this};j.setup=function(n){if("string"==typeof n){n={ui:n}}for(var m in n){this[m](n[m])}return this};j.run=function(n){var m=j.options;j.globals("location");var o=f.utils.parseQuery(window.location.search||"");if(o.grep){j.grep(o.grep)}if(o.invert){j.invert()}return f.prototype.run.call(j,function(){f.utils.highlightTags("code");if(n){n()}})}})();