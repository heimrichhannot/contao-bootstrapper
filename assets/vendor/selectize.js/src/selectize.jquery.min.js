$.fn.selectize=function(g){var c=$.fn.selectize.defaults;var b=$.extend({},c,g);var d=b.dataAttr;var j=b.labelField;var k=b.valueField;var i=b.optgroupField;var e=b.optgroupLabelField;var f=b.optgroupValueField;var a=function(s,q){var m,r,l,o,p=$.trim(s.val()||"");if(!b.allowEmptyOption&&!p.length){return}l=p.split(b.delimiter);for(m=0,r=l.length;m<r;m++){o={};o[j]=l[m];o[k]=l[m];q.options[l[m]]=o}q.items=l};var h=function(t,r){var s,o,p,v,q=0;var w=r.options;var l=function(n){var x=d&&n.attr(d);if(typeof x==="string"&&x.length){return JSON.parse(x)}return null};var u=function(z,y){var x,n;z=$(z);x=z.attr("value")||"";if(!x.length&&!b.allowEmptyOption){return}if(w.hasOwnProperty(x)){if(y){if(!w[x].optgroup){w[x].optgroup=y}else{if(!$.isArray(w[x].optgroup)){w[x].optgroup=[w[x].optgroup,y]}else{w[x].optgroup.push(y)}}}return}n=l(z)||{};n[j]=n[j]||z.text();n[k]=n[k]||x;n[i]=n[i]||y;n.$order=++q;w[x]=n;if(z.is(":selected")){r.items.push(x)}};var m=function(y){var A,C,B,z,x;y=$(y);B=y.attr("label");if(B){z=l(y)||{};z[e]=B;z[f]=B;r.optgroups[B]=z}x=$("option",y);for(A=0,C=x.length;A<C;A++){u(x[A],B)}};r.maxItems=t.attr("multiple")?null:1;v=t.children();for(s=0,o=v.length;s<o;s++){p=v[s].tagName.toLowerCase();if(p==="optgroup"){m(v[s])}else{if(p==="option"){u(v[s])}}}};return this.each(function(){if(this.selectize){return}var l;var p=$(this);var o=this.tagName.toLowerCase();var n=p.attr("placeholder")||p.attr("data-placeholder");if(!n&&!b.allowEmptyOption){n=p.children('option[value=""]').text()}var m={placeholder:n,options:{},optgroups:{},items:[]};if(o==="select"){h(p,m)}else{a(p,m)}l=new Selectize(p,$.extend(true,{},c,m,g))})};$.fn.selectize.defaults=Selectize.defaults;