var isset=function(a){return typeof a!=="undefined"};var hash_key=function(a){if(typeof a==="undefined"||a===null){return null}if(typeof a==="boolean"){return a?"1":"0"}return a+""};var escape_html=function(a){return(a+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")};var escape_replace=function(a){return(a+"").replace(/\$/g,"$$$$")};var hook={};hook.before=function(a,d,c){var b=a[d];a[d]=function(){c.apply(a,arguments);return b.apply(a,arguments)}};hook.after=function(a,d,c){var b=a[d];a[d]=function(){var e=b.apply(a,arguments);c.apply(a,arguments);return e}};var build_hash_table=function(b,d){if(!$.isArray(d)){return d}var a,e,c={};for(a=0,e=d.length;a<e;a++){if(d[a].hasOwnProperty(b)){c[d[a][b]]=d[a]}}return c};var once=function(a){var b=false;return function(){if(b){return}b=true;a.apply(this,arguments)}};var debounce=function(b,a){var c;return function(){var d=this;var e=arguments;window.clearTimeout(c);c=window.setTimeout(function(){b.apply(d,e)},a)}};var debounce_events=function(a,c,e){var d;var b=a.trigger;var f={};a.trigger=function(){var g=arguments[0];if(c.indexOf(g)!==-1){f[g]=arguments}else{return b.apply(a,arguments)}};e.apply(a,[]);a.trigger=b;for(d in f){if(f.hasOwnProperty(d)){b.apply(a,f[d])}}};var watchChildEvent=function(d,c,a,b){d.on(c,a,function(f){var g=f.target;while(g&&g.parentNode!==d[0]){g=g.parentNode}f.currentTarget=g;return b.apply(this,[f])})};var getSelection=function(c){var b={};if("selectionStart" in c){b.start=c.selectionStart;b.length=c.selectionEnd-b.start}else{if(document.selection){c.focus();var d=document.selection.createRange();var a=document.selection.createRange().text.length;d.moveStart("character",-c.value.length);b.start=d.text.length-a;b.length=a}}return b};var transferStyles=function(d,e,b){var a,f,c={};if(b){for(a=0,f=b.length;a<f;a++){c[b[a]]=d.css(b[a])}}else{c=d.css()}e.css(c)};var measureString=function(d,c){if(!d){return 0}var b=$("<test>").css({position:"absolute",top:-99999,left:-99999,width:"auto",padding:0,whiteSpace:"pre"}).text(d).appendTo("body");transferStyles(c,b,["letterSpacing","fontSize","fontFamily","fontWeight","textTransform"]);var a=b.width();b.remove();return a};var autoGrow=function(c){var a=null;var b=function(h,n){var l,m,i,k,d;var f,g,j;h=h||window.event||{};n=n||{};if(h.metaKey||h.altKey){return}if(!n.force&&c.data("grow")===false){return}l=c.val();if(h.type&&h.type.toLowerCase()==="keydown"){m=h.keyCode;i=((m>=97&&m<=122)||(m>=65&&m<=90)||(m>=48&&m<=57)||m===32);if(m===KEY_DELETE||m===KEY_BACKSPACE){j=getSelection(c[0]);if(j.length){l=l.substring(0,j.start)+l.substring(j.start+j.length)}else{if(m===KEY_BACKSPACE&&j.start){l=l.substring(0,j.start-1)+l.substring(j.start+1)}else{if(m===KEY_DELETE&&typeof j.start!=="undefined"){l=l.substring(0,j.start)+l.substring(j.start+1)}}}}else{if(i){f=h.shiftKey;g=String.fromCharCode(h.keyCode);if(f){g=g.toUpperCase()}else{g=g.toLowerCase()}l+=g}}}k=c.attr("placeholder");if(!l&&k){l=k}d=measureString(l,c)+4;if(d!==a){a=d;c.width(d);c.triggerHandler("resize")}};c.on("keydown keyup update blur",b);b()};