!function(e,n,t){var o=e();e.fn.dropdownHover=function(t){return"ontouchstart"in document?this:(o=o.add(this.parent()),this.each(function(){var r,a,i=e(this),s=i.parent(),d={delayClose:e(this).data("delay-close"),delayOpen:e(this).data("delay-open"),delaySwitch:e(this).data("delay-switch"),instantlyCloseOthers:e(this).data("close-others")},l="show.bs.dropdown",h="hide.bs.dropdown",u=e.extend(!0,{},{delayClose:1e3,delayOpen:300,delaySwitch:100,instantlyCloseOthers:!0},t,d);s.hover(function(e){if(s.hasClass("open")&&!i.is(e.target))return!0;var t=s.parents(".dropdown-menu").length,d=s.siblings().hasClass("open");n.clearTimeout(a),r=n.setTimeout(function(){!function(e){o.find(":focus").blur(),!0===u.instantlyCloseOthers&&(i.parents(".dropdown-menu").length&&i.siblings().parent().hasClass("open")?i.siblings().parent().removeClass("open"):i.parent("li").siblings().removeClass("open"));n.clearTimeout(a),s.addClass("open"),i.trigger(l)}()},d||t?u.delaySwitch:u.delayOpen)},function(){clearTimeout(r);var e=s.parents(".dropdown-menu").length;a=n.setTimeout(function(){s.removeClass("open"),i.trigger(h)},r&&!e?u.delayClose:u.delaySwitch)}),o.find(".dropdown-menu").hover(function(){n.clearTimeout(a)},function(){if(e(this).parents(".dropdown-menu").length)return!0;a=n.setTimeout(function(){s.removeClass("open"),i.trigger(h)},r>0?u.delayClose:0)}),i.hover(function(e){if(s.hasClass("open")&&!s.is(e.target))return!0}),s.find(".dropdown-submenu").each(function(){var t,o=e(this);o.hover(function(){n.clearTimeout(t),o.children(".dropdown-menu").show(),o.siblings().children(".dropdown-menu").hide()},function(){var e=o.children(".dropdown-menu");t=n.setTimeout(function(){e.hide()},r>0?u.delayClose:0)})})}))},jQuery(document).ready(function(){if(Modernizr.touchevents){var n=e('[data-hover="dropdown"]'),t=e('[data-hover="dropdown"].trail, [data-hover="dropdown"].active'),o=Modernizr.mq("screen and (max-width: 767px)");return n.attr("data-toggle","dropdown"),n.removeAttr("data-hover",""),o&&t.parent().addClass("open"),n.parent().on("hide.bs.dropdown",function(n){var t=e(this);(t.hasClass("trail")||t.hasClass("active"))&&n.preventDefault()}),n.on("click",function(n){e(this).parent().siblings().removeClass("open")}),!1}e('[data-hover="dropdown"]').dropdownHover()})}(jQuery,this),window.MooTools&&window.addEvent("domready",function(){Element.prototype.hide=function(){if("dropdown"==$(this).getAttribute("data-hover"))return this;this.setStyle("display","none")}});
