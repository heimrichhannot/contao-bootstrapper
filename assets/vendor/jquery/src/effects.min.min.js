define(["./core","./var/pnum","./css/var/cssExpand","./css/var/isHidden","./css/defaultDisplay","./data/var/data_priv","./core/init","./effects/Tween","./queue","./css","./deferred","./traversing"],function(A,K,I,F,D,t){var G,B,J=/^(?:toggle|show|hide)$/,H=new RegExp("^(?:([+-])=|)("+K+")([a-z%]*)$","i"),z=/queueHooks$/,E=[C],L={"*":[function(i,c){var a=this.createTween(i,c),e=a.cur(),f=H.exec(c),b=f&&f[3]||(A.cssNumber[i]?"":"px"),h=(A.cssNumber[i]||b!=="px"&&+e)&&H.exec(A.css(a.elem,i)),g=1,d=20;if(h&&h[3]!==b){b=b||h[3];f=f||[];h=+e||1;do{g=g||".5";h=h/g;A.style(a.elem,i,h+b)}while(g!==(g=a.cur()/e)&&g!==1&&--d)}if(f){h=a.start=+h||+e||0;a.unit=b;a.end=f[1]?h+(f[1]+1)*f[2]:+f[2]}return a}]};function y(){setTimeout(function(){G=undefined});return(G=A.now())}function w(c,a){var b,d=0,e={height:c};a=a?1:0;for(;d<4;d+=2-a){b=I[d];e["margin"+b]=e["padding"+b]=c}if(a){e.opacity=e.width=c}return e}function x(a,f,b){var d,g=(L[f]||[]).concat(L["*"]),e=0,c=g.length;for(;e<c;e++){if((d=g[e].call(b,f,a))){return d}}}function C(i,c,o){var k,p,f,j,h,n,d,a,g=this,b={},m=i.style,e=i.nodeType&&F(i),l=t.get(i,"fxshow");if(!o.queue){h=A._queueHooks(i,"fx");if(h.unqueued==null){h.unqueued=0;n=h.empty.fire;h.empty.fire=function(){if(!h.unqueued){n()}}}h.unqueued++;g.always(function(){g.always(function(){h.unqueued--;if(!A.queue(i,"fx").length){h.empty.fire()}})})}if(i.nodeType===1&&("height" in c||"width" in c)){o.overflow=[m.overflow,m.overflowX,m.overflowY];d=A.css(i,"display");a=d==="none"?t.get(i,"olddisplay")||D(i.nodeName):d;if(a==="inline"&&A.css(i,"float")==="none"){m.display="inline-block"}}if(o.overflow){m.overflow="hidden";g.always(function(){m.overflow=o.overflow[0];m.overflowX=o.overflow[1];m.overflowY=o.overflow[2]})}for(k in c){p=c[k];if(J.exec(p)){delete c[k];f=f||p==="toggle";if(p===(e?"hide":"show")){if(p==="show"&&l&&l[k]!==undefined){e=true}else{continue}}b[k]=l&&l[k]||A.style(i,k)}else{d=undefined}}if(!A.isEmptyObject(b)){if(l){if("hidden" in l){e=l.hidden}}else{l=t.access(i,"fxshow",{})}if(f){l.hidden=!e}if(e){A(i).show()}else{g.done(function(){A(i).hide()})}g.done(function(){var q;t.remove(i,"fxshow");for(q in b){A.style(i,q,b[q])}});for(k in b){j=x(e?l[k]:0,k,g);if(!(k in l)){l[k]=j.start;if(e){j.end=j.start;j.start=k==="width"||k==="height"?1:0}}}}else{if((d==="none"?D(i.nodeName):d)==="inline"){m.display=d}}}function v(b,g){var c,d,f,a,e;for(c in b){d=A.camelCase(c);f=g[d];a=b[c];if(A.isArray(a)){f=a[1];a=b[c]=a[0]}if(c!==d){b[d]=a;delete b[c]}e=A.cssHooks[d];if(e&&"expand" in e){a=e.expand(a);delete b[d];for(c in a){if(!(c in b)){b[c]=a[c];g[c]=f}}}else{g[d]=f}}}function u(i,e,b){var a,k,f=0,j=E.length,c=A.Deferred().always(function(){delete g.elem}),g=function(){if(k){return false}var l=G||y(),o=Math.max(0,h.startTime+h.duration-l),q=o/h.duration||0,m=1-q,p=0,n=h.tweens.length;for(;p<n;p++){h.tweens[p].run(m)}c.notifyWith(i,[h,m,o]);if(m<1&&n){return o}else{c.resolveWith(i,[h]);return false}},h=c.promise({elem:i,props:A.extend({},e),opts:A.extend(true,{specialEasing:{}},b),originalProperties:e,originalOptions:b,startTime:G||y(),duration:b.duration,tweens:[],createTween:function(l,n){var m=A.Tween(i,h.opts,l,n,h.opts.specialEasing[l]||h.opts.easing);h.tweens.push(m);return m},stop:function(m){var n=0,l=m?h.tweens.length:0;if(k){return this}k=true;for(;n<l;n++){h.tweens[n].run(1)}if(m){c.resolveWith(i,[h,m])}else{c.rejectWith(i,[h,m])}return this}}),d=h.props;v(d,h.opts.specialEasing);for(;f<j;f++){a=E[f].call(h,i,d,h.opts);if(a){return a}}A.map(d,x,h);if(A.isFunction(h.opts.start)){h.opts.start.call(i,h)}A.fx.timer(A.extend(g,{elem:i,anim:h,queue:h.opts.queue}));return h.progress(h.opts.progress).done(h.opts.done,h.opts.complete).fail(h.opts.fail).always(h.opts.always)}A.Animation=A.extend(u,{tweener:function(d,a){if(A.isFunction(d)){a=d;d=["*"]}else{d=d.split(" ")}var b,e=0,c=d.length;for(;e<c;e++){b=d[e];L[b]=L[b]||[];L[b].unshift(a)}},prefilter:function(a,b){if(b){E.unshift(a)}else{E.push(a)}}});A.speed=function(b,a,c){var d=b&&typeof b==="object"?A.extend({},b):{complete:c||!c&&a||A.isFunction(b)&&b,duration:b,easing:c&&a||a&&!A.isFunction(a)&&a};d.duration=A.fx.off?0:typeof d.duration==="number"?d.duration:d.duration in A.fx.speeds?A.fx.speeds[d.duration]:A.fx.speeds._default;if(d.queue==null||d.queue===true){d.queue="fx"}d.old=d.complete;d.complete=function(){if(A.isFunction(d.old)){d.old.call(this)}if(d.queue){A.dequeue(this,d.queue)}};return d};A.fn.extend({fadeTo:function(d,a,b,c){return this.filter(F).css("opacity",0).show().end().animate({opacity:a},d,b,c)},animate:function(f,b,g,a){var c=A.isEmptyObject(f),e=A.speed(b,g,a),d=function(){var h=u(this,A.extend({},f),e);if(c||t.get(this,"finish")){h.stop(true)}};d.finish=d;return c||e.queue===false?this.each(d):this.queue(e.queue,d)},stop:function(b,c,d){var a=function(e){var f=e.stop;delete e.stop;f(d)};if(typeof b!=="string"){d=c;c=b;b=undefined}if(c&&b!==false){this.queue(b||"fx",[])}return this.each(function(){var f=true,e=b!=null&&b+"queueHooks",g=A.timers,h=t.get(this);if(e){if(h[e]&&h[e].stop){a(h[e])}}else{for(e in h){if(h[e]&&h[e].stop&&z.test(e)){a(h[e])}}}for(e=g.length;e--;){if(g[e].elem===this&&(b==null||g[e].queue===b)){g[e].anim.stop(d);f=false;g.splice(e,1)}}if(f||!d){A.dequeue(this,b)}})},finish:function(a){if(a!==false){a=a||"fx"}return this.each(function(){var c,f=t.get(this),d=f[a+"queue"],e=f[a+"queueHooks"],g=A.timers,b=d?d.length:0;f.finish=true;A.queue(this,a,[]);if(e&&e.stop){e.stop.call(this,true)}for(c=g.length;c--;){if(g[c].elem===this&&g[c].queue===a){g[c].anim.stop(true);g.splice(c,1)}}for(c=0;c<b;c++){if(d[c]&&d[c].finish){d[c].finish.call(this)}}delete f.finish})}});A.each(["toggle","show","hide"],function(b,c){var a=A.fn[c];A.fn[c]=function(e,f,d){return e==null||typeof e==="boolean"?a.apply(this,arguments):this.animate(w(c,true),e,f,d)}});A.each({slideDown:w("show"),slideUp:w("hide"),slideToggle:w("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(b,a){A.fn[b]=function(e,c,d){return this.animate(a,e,c,d)}});A.timers=[];A.fx.tick=function(){var a,c=0,b=A.timers;G=A.now();for(;c<b.length;c++){a=b[c];if(!a()&&b[c]===a){b.splice(c--,1)}}if(!b.length){A.fx.stop()}G=undefined};A.fx.timer=function(a){A.timers.push(a);if(a()){A.fx.start()}else{A.timers.pop()}};A.fx.interval=13;A.fx.start=function(){if(!B){B=setInterval(A.fx.tick,A.fx.interval)}};A.fx.stop=function(){clearInterval(B);B=null};A.fx.speeds={slow:600,fast:200,_default:400};return A});