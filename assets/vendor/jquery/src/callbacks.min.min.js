define(["./core","./var/rnotwhite"],function(g,e){var h={};function f(a){var b=h[a]={};g.each(a.match(e)||[],function(c,d){b[d]=true});return b}g.Callbacks=function(a){a=typeof a==="string"?(h[a]||f(a)):g.extend({},a);var s,v,r,t,q,p,d=[],c=!a.once&&[],u=function(i){s=a.memory&&i;v=true;p=t||0;t=0;q=d.length;r=true;for(;d&&p<q;p++){if(d[p].apply(i[0],i[1])===false&&a.stopOnFalse){s=false;break}}r=false;if(d){if(c){if(c.length){u(c.shift())}}else{if(s){d=[]}else{b.disable()}}}},b={add:function(){if(d){var i=d.length;(function j(k){g.each(k,function(m,n){var l=g.type(n);if(l==="function"){if(!a.unique||!b.has(n)){d.push(n)}}else{if(n&&n.length&&l!=="string"){j(n)}}})})(arguments);if(r){q=d.length}else{if(s){t=i;u(s)}}}return this},remove:function(){if(d){g.each(arguments,function(i,k){var j;while((j=g.inArray(k,d,j))>-1){d.splice(j,1);if(r){if(j<=q){q--}if(j<=p){p--}}}})}return this},has:function(i){return i?g.inArray(i,d)>-1:!!(d&&d.length)},empty:function(){d=[];q=0;return this},disable:function(){d=c=s=undefined;return this},disabled:function(){return !d},lock:function(){c=undefined;if(!s){b.disable()}return this},locked:function(){return !c},fireWith:function(i,j){if(d&&(!v||c)){j=j||[];j=[i,j.slice?j.slice():j];if(r){c.push(j)}else{u(j)}}return this},fire:function(){b.fireWith(this,arguments);return this},fired:function(){return !!v}};return b};return g});