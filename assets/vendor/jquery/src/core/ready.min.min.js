define(["../core","../core/init","../deferred"],function(d){var f;d.fn.ready=function(a){d.ready.promise().done(a);return this};d.extend({isReady:false,readyWait:1,holdReady:function(a){if(a){d.readyWait++}else{d.ready(true)}},ready:function(a){if(a===true?--d.readyWait:d.isReady){return}d.isReady=true;if(a!==true&&--d.readyWait>0){return}f.resolveWith(document,[d]);if(d.fn.triggerHandler){d(document).triggerHandler("ready");d(document).off("ready")}}});function e(){document.removeEventListener("DOMContentLoaded",e,false);window.removeEventListener("load",e,false);d.ready()}d.ready.promise=function(a){if(!f){f=d.Deferred();if(document.readyState==="complete"){setTimeout(d.ready)}else{document.addEventListener("DOMContentLoaded",e,false);window.addEventListener("load",e,false)}}return f.promise(a)};d.ready.promise()});