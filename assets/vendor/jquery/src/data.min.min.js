define(["./core","./var/rnotwhite","./core/access","./data/var/data_priv","./data/var/data_user"],function(k,p,i,m,o){var n=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,j=/([A-Z])/g;function l(c,d,b){var e;if(b===undefined&&c.nodeType===1){e="data-"+d.replace(j,"-$1").toLowerCase();b=c.getAttribute(e);if(typeof b==="string"){try{b=b==="true"?true:b==="false"?false:b==="null"?null:+b+""===b?+b:n.test(b)?k.parseJSON(b):b}catch(a){}o.set(c,d,b)}else{b=undefined}}return b}k.extend({hasData:function(a){return o.hasData(a)||m.hasData(a)},data:function(b,c,a){return o.access(b,c,a)},removeData:function(a,b){o.remove(a,b)},_data:function(b,c,a){return m.access(b,c,a)},_removeData:function(a,b){m.remove(a,b)}});k.fn.extend({data:function(a,e){var b,c,f,g=this[0],d=g&&g.attributes;if(a===undefined){if(this.length){f=o.get(g);if(g.nodeType===1&&!m.get(g,"hasDataAttrs")){b=d.length;while(b--){if(d[b]){c=d[b].name;if(c.indexOf("data-")===0){c=k.camelCase(c.slice(5));l(g,c,f[c])}}}m.set(g,"hasDataAttrs",true)}}return f}if(typeof a==="object"){return this.each(function(){o.set(this,a)})}return i(this,function(s){var t,h=k.camelCase(a);if(g&&s===undefined){t=o.get(g,a);if(t!==undefined){return t}t=o.get(g,h);if(t!==undefined){return t}t=l(g,h,undefined);if(t!==undefined){return t}return}this.each(function(){var q=o.get(this,h);o.set(this,h,s);if(a.indexOf("-")!==-1&&q!==undefined){o.set(this,a,s)}})},null,e,arguments.length>1,null,true)},removeData:function(a){return this.each(function(){o.remove(this,a)})}});return k});