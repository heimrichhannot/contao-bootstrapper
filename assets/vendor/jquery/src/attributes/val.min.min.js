define(["../core","./support","../core/init"],function(f,e){var d=/\r/g;f.fn.extend({val:function(b){var j,i,a,c=this[0];if(!arguments.length){if(c){j=f.valHooks[c.type]||f.valHooks[c.nodeName.toLowerCase()];if(j&&"get" in j&&(i=j.get(c,"value"))!==undefined){return i}i=c.value;return typeof i==="string"?i.replace(d,""):i==null?"":i}return}a=f.isFunction(b);return this.each(function(h){var g;if(this.nodeType!==1){return}if(a){g=b.call(this,h,f(this).val())}else{g=b}if(g==null){g=""}else{if(typeof g==="number"){g+=""}else{if(f.isArray(g)){g=f.map(g,function(k){return k==null?"":k+""})}}}j=f.valHooks[this.type]||f.valHooks[this.nodeName.toLowerCase()];if(!j||!("set" in j)||j.set(this,g,"value")===undefined){this.value=g}})}});f.extend({valHooks:{option:{get:function(b){var a=f.find.attr(b,"value");return a!=null?a:f.trim(f.text(b))}},select:{get:function(r){var c,p,a=r.options,n=r.selectedIndex,o=r.type==="select-one"||n<0,b=o?null:[],i=o?n+1:a.length,q=n<0?i:o?n:0;for(;q<i;q++){p=a[q];if((p.selected||q===n)&&(e.optDisabled?!p.disabled:p.getAttribute("disabled")===null)&&(!p.parentNode.disabled||!f.nodeName(p.parentNode,"optgroup"))){c=f(p).val();if(o){return c}b.push(c)}}return b},set:function(c,b){var a,i,m=c.options,n=f.makeArray(b),l=m.length;while(l--){i=m[l];if((i.selected=f.inArray(i.value,n)>=0)){a=true}}if(!a){c.selectedIndex=-1}return n}}}});f.each(["radio","checkbox"],function(){f.valHooks[this]={set:function(b,a){if(f.isArray(a)){return(b.checked=f.inArray(f(b).val(),a)>=0)}}};if(!e.checkOn){f.valHooks[this].get=function(a){return a.getAttribute("value")===null?"on":a.value}}})});