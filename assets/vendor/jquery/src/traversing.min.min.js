define(["./core","./var/indexOf","./traversing/var/rneedsContext","./core/init","./traversing/findFilter","./selector"],function(j,k,i){var l=/^(?:parents|prev(?:Until|All))/,h={children:true,contents:true,next:true,prev:true};j.extend({dir:function(b,d,a){var e=[],c=a!==undefined;while((b=b[d])&&b.nodeType!==9){if(b.nodeType===1){if(c&&j(b).is(a)){break}e.push(b)}}return e},sibling:function(a,b){var c=[];for(;a;a=a.nextSibling){if(a.nodeType===1&&a!==b){c.push(a)}}return c}});j.fn.extend({has:function(a){var b=j(a,this),c=b.length;return this.filter(function(){var d=0;for(;d<c;d++){if(j.contains(this,b[d])){return true}}})},closest:function(a,b){var p,c=0,d=this.length,e=[],f=i.test(a)||typeof a!=="string"?j(a,b||this.context):0;for(;c<d;c++){for(p=this[c];p&&p!==b;p=p.parentNode){if(p.nodeType<11&&(f?f.index(p)>-1:p.nodeType===1&&j.find.matchesSelector(p,a))){e.push(p);break}}}return this.pushStack(e.length>1?j.unique(e):e)},index:function(a){if(!a){return(this[0]&&this[0].parentNode)?this.first().prevAll().length:-1}if(typeof a==="string"){return k.call(j(a),this[0])}return k.call(this,a.jquery?a[0]:a)},add:function(b,a){return this.pushStack(j.unique(j.merge(this.get(),j(b,a))))},addBack:function(a){return this.add(a==null?this.prevObject:this.prevObject.filter(a))}});function g(a,b){while((a=a[b])&&a.nodeType!==1){}return a}j.each({parent:function(a){var b=a.parentNode;return b&&b.nodeType!==11?b:null},parents:function(a){return j.dir(a,"parentNode")},parentsUntil:function(b,c,a){return j.dir(b,"parentNode",a)},next:function(a){return g(a,"nextSibling")},prev:function(a){return g(a,"previousSibling")},nextAll:function(a){return j.dir(a,"nextSibling")},prevAll:function(a){return j.dir(a,"previousSibling")},nextUntil:function(b,c,a){return j.dir(b,"nextSibling",a)},prevUntil:function(b,c,a){return j.dir(b,"previousSibling",a)},siblings:function(a){return j.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return j.sibling(a.firstChild)},contents:function(a){return a.contentDocument||j.merge([],a.childNodes)}},function(b,a){j.fn[b]=function(c,d){var e=j.map(this,a,c);if(b.slice(-5)!=="Until"){d=c}if(d&&typeof d==="string"){e=j.filter(d,e)}if(this.length>1){if(!h[b]){j.unique(e)}if(l.test(b)){e.reverse()}}return this.pushStack(e)}});return j});