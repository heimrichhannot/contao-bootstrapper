define(["../core","../var/rnotwhite","./accepts"],function(f,d){function e(){Object.defineProperty(this.cache={},0,{get:function(){return{}}});this.expando=f.expando+e.uid++}e.uid=1;e.accepts=f.acceptData;e.prototype={key:function(i){if(!e.accepts(i)){return 0}var b={},a=i[this.expando];if(!a){a=e.uid++;try{b[this.expando]={value:a};Object.defineProperties(i,b)}catch(c){b[this.expando]=a;f.extend(i,b)}}if(!this.cache[a]){this.cache[a]={}}return a},set:function(l,c,j){var a,b=this.key(l),k=this.cache[b];if(typeof c==="string"){k[c]=j}else{if(f.isEmptyObject(k)){f.extend(this.cache[b],c)}else{for(a in c){k[a]=c[a]}}}return k},get:function(c,a){var b=this.cache[this.key(c)];return a===undefined?b:b[a]},access:function(h,c,a){var b;if(c===undefined||((c&&typeof c==="string")&&a===undefined)){b=this.get(h,c);return b!==undefined?b:this.get(h,f.camelCase(c))}this.set(h,c,a);return a!==undefined?a:c},remove:function(n,b){var c,l,i,a=this.key(n),m=this.cache[a];if(b===undefined){this.cache[a]={}}else{if(f.isArray(b)){l=b.concat(b.map(f.camelCase))}else{i=f.camelCase(b);if(b in m){l=[b,i]}else{l=i;l=l in m?[l]:(l.match(d)||[])}}c=l.length;while(c--){delete m[l[c]]}}},hasData:function(a){return !f.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){if(a[this.expando]){delete this.cache[a[this.expando]]}}};return e});