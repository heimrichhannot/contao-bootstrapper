(function(l){var k={formatInvalidInputErrorMsg:function(a){return"Invalid input value '"+a+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"};var m=function(g,a){var r=this.element=l(g).hide();var d=l(g)[0].style.width;var f=false;var e=this.element.parent();if(e.hasClass("slider")===true){f=true;this.picker=e}else{this.picker=l('<div class="slider"><div class="slider-track"><div class="slider-selection"></div><div class="slider-handle min-slider-handle"></div><div class="slider-handle max-slider-handle"></div></div><div id="tooltip" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_min" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div><div id="tooltip_max" class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div></div>').insertBefore(this.element).append(this.element)}this.id=this.element.data("slider-id")||a.id;if(this.id){this.picker[0].id=this.id}if(("ontouchstart" in window)||window.DocumentTouch&&document instanceof window.DocumentTouch){this.touchCapable=true}var b=this.element.data("slider-tooltip")||a.tooltip;this.tooltip=this.picker.find("#tooltip");this.tooltipInner=this.tooltip.find("div.tooltip-inner");this.tooltip_min=this.picker.find("#tooltip_min");this.tooltipInner_min=this.tooltip_min.find("div.tooltip-inner");this.tooltip_max=this.picker.find("#tooltip_max");this.tooltipInner_max=this.tooltip_max.find("div.tooltip-inner");if(f===true){this.picker.removeClass("slider-horizontal");this.picker.removeClass("slider-vertical");this.tooltip.removeClass("hide");this.tooltip_min.removeClass("hide");this.tooltip_max.removeClass("hide")}this.orientation=this.element.data("slider-orientation")||a.orientation;switch(this.orientation){case"vertical":this.picker.addClass("slider-vertical");this.stylePos="top";this.mousePos="pageY";this.sizePos="offsetHeight";this.tooltip.addClass("right")[0].style.left="100%";this.tooltip_min.addClass("right")[0].style.left="100%";this.tooltip_max.addClass("right")[0].style.left="100%";break;default:this.picker.addClass("slider-horizontal").css("width",d);this.orientation="horizontal";this.stylePos="left";this.mousePos="pageX";this.sizePos="offsetWidth";this.tooltip.addClass("top")[0].style.top=-this.tooltip.outerHeight()-14+"px";this.tooltip_min.addClass("top")[0].style.top=-this.tooltip_min.outerHeight()-14+"px";this.tooltip_max.addClass("top")[0].style.top=-this.tooltip_max.outerHeight()-14+"px";break}var c=this;l.each(["min","max","step","precision","value","reversed","handle"],function(o,p){if(typeof r.data("slider-"+p)!=="undefined"){c[p]=r.data("slider-"+p)}else{if(typeof a[p]!=="undefined"){c[p]=a[p]}else{if(typeof r.prop(p)!=="undefined"){c[p]=r.prop(p)}else{c[p]=0}}}});if(this.value instanceof Array){if(f&&!this.range){this.value=this.value[0]}else{this.range=true}}else{if(this.range){this.value=[this.value,this.max]}}this.selection=this.element.data("slider-selection")||a.selection;this.selectionEl=this.picker.find(".slider-selection");if(this.selection==="none"){this.selectionEl.addClass("hide")}this.selectionElStyle=this.selectionEl[0].style;this.handle1=this.picker.find(".slider-handle:first");this.handle1Stype=this.handle1[0].style;this.handle2=this.picker.find(".slider-handle:last");this.handle2Stype=this.handle2[0].style;if(f===true){this.handle1.removeClass("round triangle");this.handle2.removeClass("round triangle hide")}var q=["round","triangle","custom"];if(q.indexOf(this.handle)!==-1){this.handle1.addClass(this.handle);this.handle2.addClass(this.handle)}this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];this.formater=a.formater;this.tooltip_separator=a.tooltip_separator;this.tooltip_split=a.tooltip_split;this.setValue(this.value);this.handle1.on({keydown:l.proxy(this.keydown,this,0)});this.handle2.on({keydown:l.proxy(this.keydown,this,1)});if(this.touchCapable){this.picker.on({touchstart:l.proxy(this.mousedown,this)})}this.picker.on({mousedown:l.proxy(this.mousedown,this)});if(b==="hide"){this.tooltip.addClass("hide");this.tooltip_min.addClass("hide");this.tooltip_max.addClass("hide")}else{if(b==="always"){this.showTooltip();this.alwaysShowTooltip=true}else{this.picker.on({mouseenter:l.proxy(this.showTooltip,this),mouseleave:l.proxy(this.hideTooltip,this)});this.handle1.on({focus:l.proxy(this.showTooltip,this),blur:l.proxy(this.hideTooltip,this)});this.handle2.on({focus:l.proxy(this.showTooltip,this),blur:l.proxy(this.hideTooltip,this)})}}this.enabled=a.enabled&&(this.element.data("slider-enabled")===undefined||this.element.data("slider-enabled")===true);if(this.enabled){this.enable()}else{this.disable()}this.natural_arrow_keys=this.element.data("slider-natural_arrow_keys")||a.natural_arrow_keys};m.prototype={constructor:m,over:false,inDrag:false,showTooltip:function(){if(this.tooltip_split===false){this.tooltip.addClass("in")}else{this.tooltip_min.addClass("in");this.tooltip_max.addClass("in")}this.over=true},hideTooltip:function(){if(this.inDrag===false&&this.alwaysShowTooltip!==true){this.tooltip.removeClass("in");this.tooltip_min.removeClass("in");this.tooltip_max.removeClass("in")}this.over=false},layout:function(){var a;if(this.reversed){a=[100-this.percentage[0],this.percentage[1]]}else{a=[this.percentage[0],this.percentage[1]]}this.handle1Stype[this.stylePos]=a[0]+"%";this.handle2Stype[this.stylePos]=a[1]+"%";if(this.orientation==="vertical"){this.selectionElStyle.top=Math.min(a[0],a[1])+"%";this.selectionElStyle.height=Math.abs(a[0]-a[1])+"%"}else{this.selectionElStyle.left=Math.min(a[0],a[1])+"%";this.selectionElStyle.width=Math.abs(a[0]-a[1])+"%";var b=this.tooltip_min[0].getBoundingClientRect();var c=this.tooltip_max[0].getBoundingClientRect();if(b.right>c.left){this.tooltip_max.removeClass("top");this.tooltip_max.addClass("bottom")[0].style.top=18+"px"}else{this.tooltip_max.removeClass("bottom");this.tooltip_max.addClass("top")[0].style.top=-30+"px"}}if(this.range){this.tooltipInner.text(this.formater(this.value[0])+this.tooltip_separator+this.formater(this.value[1]));this.tooltip[0].style[this.stylePos]=(a[1]+a[0])/2+"%";if(this.orientation==="vertical"){this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px")}else{this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px")}if(this.orientation==="vertical"){this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px")}else{this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px")}this.tooltipInner_min.text(this.formater(this.value[0]));this.tooltipInner_max.text(this.formater(this.value[1]));this.tooltip_min[0].style[this.stylePos]=a[0]+"%";if(this.orientation==="vertical"){this.tooltip_min.css("margin-top",-this.tooltip_min.outerHeight()/2+"px")}else{this.tooltip_min.css("margin-left",-this.tooltip_min.outerWidth()/2+"px")}this.tooltip_max[0].style[this.stylePos]=a[1]+"%";if(this.orientation==="vertical"){this.tooltip_max.css("margin-top",-this.tooltip_max.outerHeight()/2+"px")}else{this.tooltip_max.css("margin-left",-this.tooltip_max.outerWidth()/2+"px")}}else{this.tooltipInner.text(this.formater(this.value[0]));this.tooltip[0].style[this.stylePos]=a[0]+"%";if(this.orientation==="vertical"){this.tooltip.css("margin-top",-this.tooltip.outerHeight()/2+"px")}else{this.tooltip.css("margin-left",-this.tooltip.outerWidth()/2+"px")}}},mousedown:function(d){if(!this.isEnabled()){return false}if(this.touchCapable&&d.type==="touchstart"){d=d.originalEvent}this.triggerFocusOnHandle();this.offset=this.picker.offset();this.size=this.picker[0][this.sizePos];var e=this.getPercentage(d);if(this.range){var a=Math.abs(this.percentage[0]-e);var c=Math.abs(this.percentage[1]-e);this.dragged=(a<c)?0:1}else{this.dragged=0}this.percentage[this.dragged]=this.reversed?100-e:e;this.layout();if(this.touchCapable){l(document).on({touchmove:l.proxy(this.mousemove,this),touchend:l.proxy(this.mouseup,this)})}l(document).on({mousemove:l.proxy(this.mousemove,this),mouseup:l.proxy(this.mouseup,this)});this.inDrag=true;var b=this.calculateValue();this.element.trigger({type:"slideStart",value:b}).data("value",b).prop("value",b);this.setValue(b);return true},triggerFocusOnHandle:function(a){if(a===0){this.handle1.focus()}if(a===1){this.handle2.focus()}},keydown:function(c,d){if(!this.isEnabled()){return false}var e;switch(d.which){case 37:case 40:e=-1;break;case 39:case 38:e=1;break}if(!e){return}if(this.natural_arrow_keys){if((this.orientation==="vertical"&&!this.reversed)||(this.orientation==="horizontal"&&this.reversed)){e=e*-1}}var a=e*this.percentage[2];var f=this.percentage[c]+a;if(f>100){f=100}else{if(f<0){f=0}}this.dragged=c;this.adjustPercentageForRangeSliders(f);this.percentage[this.dragged]=f;this.layout();var b=this.calculateValue();this.element.trigger({type:"slideStart",value:b}).data("value",b).prop("value",b);this.setValue(b,true);this.element.trigger({type:"slideStop",value:b}).data("value",b).prop("value",b);return false},mousemove:function(b){if(!this.isEnabled()){return false}if(this.touchCapable&&b.type==="touchmove"){b=b.originalEvent}var c=this.getPercentage(b);this.adjustPercentageForRangeSliders(c);this.percentage[this.dragged]=this.reversed?100-c:c;this.layout();var a=this.calculateValue();this.setValue(a,true);return false},adjustPercentageForRangeSliders:function(a){if(this.range){if(this.dragged===0&&this.percentage[1]<a){this.percentage[0]=this.percentage[1];this.dragged=1}else{if(this.dragged===1&&this.percentage[0]>a){this.percentage[1]=this.percentage[0];this.dragged=0}}}},mouseup:function(){if(!this.isEnabled()){return false}if(this.touchCapable){l(document).off({touchmove:this.mousemove,touchend:this.mouseup})}l(document).off({mousemove:this.mousemove,mouseup:this.mouseup});this.inDrag=false;if(this.over===false){this.hideTooltip()}var a=this.calculateValue();this.layout();this.element.data("value",a).prop("value",a).trigger({type:"slideStop",value:a});return false},calculateValue:function(){var a;if(this.range){a=[this.min,this.max];if(this.percentage[0]!==0){a[0]=(Math.max(this.min,this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step));a[0]=this.applyPrecision(a[0])}if(this.percentage[1]!==100){a[1]=(Math.min(this.max,this.min+Math.round((this.diff*this.percentage[1]/100)/this.step)*this.step));a[1]=this.applyPrecision(a[1])}this.value=a}else{a=(this.min+Math.round((this.diff*this.percentage[0]/100)/this.step)*this.step);if(a<this.min){a=this.min}else{if(a>this.max){a=this.max}}a=parseFloat(a);a=this.applyPrecision(a);this.value=[a,this.value[1]]}return a},applyPrecision:function(a){var b=this.precision||this.getNumDigitsAfterDecimalPlace(this.step);return this.applyToFixedAndParseFloat(a,b)},getNumDigitsAfterDecimalPlace:function(a){var b=(""+a).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);if(!b){return 0}return Math.max(0,(b[1]?b[1].length:0)-(b[2]?+b[2]:0))},applyToFixedAndParseFloat:function(b,c){var a=b.toFixed(c);return parseFloat(a)},getPercentage:function(a){if(this.touchCapable&&(a.type==="touchstart"||a.type==="touchmove")){a=a.touches[0]}var b=(a[this.mousePos]-this.offset[this.stylePos])*100/this.size;b=Math.round(b/this.percentage[2])*this.percentage[2];return Math.max(0,Math.min(100,b))},getValue:function(){if(this.range){return this.value}return this.value[0]},setValue:function(a,b){if(!a){a=0}this.value=this.validateInputValue(a);if(this.range){this.value[0]=this.applyPrecision(this.value[0]);this.value[1]=this.applyPrecision(this.value[1]);this.value[0]=Math.max(this.min,Math.min(this.max,this.value[0]));this.value[1]=Math.max(this.min,Math.min(this.max,this.value[1]))}else{this.value=this.applyPrecision(this.value);this.value=[Math.max(this.min,Math.min(this.max,this.value))];this.handle2.addClass("hide");if(this.selection==="after"){this.value[1]=this.max}else{this.value[1]=this.min}}this.diff=this.max-this.min;if(this.diff>0){this.percentage=[(this.value[0]-this.min)*100/this.diff,(this.value[1]-this.min)*100/this.diff,this.step*100/this.diff]}else{this.percentage=[0,0,100]}this.layout();if(b===true){var c=this.range?this.value:this.value[0];this.element.trigger({type:"slide",value:c}).data("value",c).prop("value",c)}},validateInputValue:function(a){if(typeof a==="number"){return a}else{if(a instanceof Array){l.each(a,function(b,c){if(typeof c!=="number"){throw new Error(k.formatInvalidInputErrorMsg(c))}});return a}else{throw new Error(k.formatInvalidInputErrorMsg(a))}}},destroy:function(){this.handle1.off();this.handle2.off();this.element.off().show().insertBefore(this.picker);this.picker.off().remove();l(this.element).removeData("slider")},disable:function(){this.enabled=false;this.handle1.removeAttr("tabindex");this.handle2.removeAttr("tabindex");this.picker.addClass("slider-disabled");this.element.trigger("slideDisabled")},enable:function(){this.enabled=true;this.handle1.attr("tabindex",0);this.handle2.attr("tabindex",0);this.picker.removeClass("slider-disabled");this.element.trigger("slideEnabled")},toggle:function(){if(this.enabled){this.disable()}else{this.enable()}},isEnabled:function(){return this.enabled},setAttribute:function(b,a){this[b]=a},getAttribute:function(a){return this[a]}};var h={getValue:m.prototype.getValue,setValue:m.prototype.setValue,setAttribute:m.prototype.setAttribute,getAttribute:m.prototype.getAttribute,destroy:m.prototype.destroy,disable:m.prototype.disable,enable:m.prototype.enable,toggle:m.prototype.toggle,isEnabled:m.prototype.isEnabled};l.fn.slider=function(a){if(typeof a==="string"&&a!=="refresh"){var b=Array.prototype.slice.call(arguments,1);return n.call(this,a,b)}else{return j.call(this,a)}};function n(b,a){if(h[b]){var c=i(this);var d=h[b].apply(c,a);if(typeof d==="undefined"){return l(this)}else{return d}}else{throw new Error("method '"+b+"()' does not exist for slider.")}}function i(a){var b=l(a).data("slider");if(b&&b instanceof m){return b}else{throw new Error(k.callingContextNotSliderInstance)}}function j(b){var a=l(this);a.each(function(){var c=l(this),d=c.data("slider"),e=typeof b==="object"&&b;if(d&&!e){e={};d.handle1.off();d.handle2.off();d.picker.off();l.each(l.fn.slider.defaults,function(f){e[f]=d[f]})}c.data("slider",(new m(this,l.extend({},l.fn.slider.defaults,e))))});return a}l.fn.slider.defaults={min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:false,selection:"before",tooltip:"show",tooltip_separator:":",tooltip_split:false,natural_arrow_keys:false,handle:"round",reversed:false,enabled:true,formater:function(a){return a}};l.fn.slider.Constructor=m})(window.jQuery);