describe("Keyboard Support Tests",function(){var f,d,b,e=0,c=10,a=1,g=5;describe("Clicking on slider handle automatically gives it focus",function(){beforeEach(function(){f=$("#testSlider1").slider({id:"testSlider"});d=$("#testSlider").find(".slider-track > .slider-handle:first")});it("clicking on handle1 gives focus to handle1",function(){var h=false;d.focus(function(){h=true;expect(h).toBeTruthy()});d.mousedown()})});describe("When slider handle has TAB focus",function(){it("should display it's tooltip if 'tooltip' option is set to 'show'",function(){f=$("#testSlider1").slider({id:"testSlider",tooltip:"show"});d=$("#testSlider").find(".slider-track > .slider-handle:first");var h=$("#testSlider").find("div.tooltip").hasClass("in");expect(h).toBeFalsy();d.focus();h=$("#testSlider").find("div.tooltip").hasClass("in");expect(h).toBeTruthy()});it("should not display it's tooltip if 'tooltip' option is set to 'hide'",function(){f=$("#testSlider1").slider({id:"testSlider",tooltip:"hide"});d=$("#testSlider").find(".slider-track > .slider-handle:first");var h=$("#testSlider1").siblings("div.tooltip").hasClass("hide");expect(h).toBeTruthy();d.focus();h=$("#testSlider1").siblings("div.tooltip").hasClass("hide");expect(h).toBeTruthy()});it("should not affect the tooltip display if 'tooltip' option is set to 'always'",function(){f=$("#testSlider1").slider({id:"testSlider",tooltip:"always"});d=$("#testSlider").find(".slider-track > .slider-handle:first");var h=$("#testSlider1").siblings("div.tooltip").hasClass("in");expect(h).toBeTruthy();d.focus();h=$("#testSlider1").siblings("div.tooltip").hasClass("in");expect(h).toBeTruthy()})});describe("For horizontal sliders where its handle has focus",function(){beforeEach(function(){f=$("#testSlider1").slider({id:"testSlider",orientation:"horizontal",min:e,max:c,step:a,value:g});d=$("#testSlider").find(".slider-track > .slider-handle:first");d.focus()});it("moves to the left by the 'step' value when the LEFT arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g-a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=37;d.trigger(h)});it("moves to the right by the 'step' value when the RIGHT arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g+a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=39;d.trigger(h)});it("moves to the left by the 'step' value when the DOWN arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g-a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=40;d.trigger(h)});it("moves to the right by the 'step' value when the UP arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g+a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=38;d.trigger(h)})});describe("For vertical sliders where its handle has focus",function(){beforeEach(function(){f=$("#testSlider1").slider({id:"testSlider",orientation:"vertical",min:e,max:c,step:a,value:g});d=$("#testSlider").find(".slider-track > .slider-handle:first");d.focus()});it("moves down by the 'step' value when the LEFT arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g-a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=37;d.trigger(h)});it("moves up by the 'step' value when the RIGHT arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g+a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=39;d.trigger(h)});it("moves down by the 'step' value when the DOWN arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g-a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=40;d.trigger(h)});it("moves up by the 'step' value when the UP arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g+a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=38;d.trigger(h)})});describe("For a reversed slider (regardless of 'orientation')",function(){beforeEach(function(){f=$("#testSlider1").slider({id:"testSlider",reversed:true,min:e,max:c,step:a,value:g});d=$("#testSlider").find(".slider-track > .slider-handle:first");d.focus()});it("moves to the left by the 'step' value when the LEFT arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g-a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=37;d.trigger(h)});it("moves to the right by the 'step' value when the RIGHT arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g+a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=39;d.trigger(h)});it("moves to the left by the 'step' value when the DOWN arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g-a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=40;d.trigger(h)});it("moves to the right by the 'step' value when the UP arrow key is pressed",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g+a;expect(j).toBe(i)});var h=$.Event("keydown");h.which=38;d.trigger(h)})});describe("For a range slider (regardless of 'orientation')",function(){beforeEach(function(){f=$("#testSlider1").slider({id:"testSlider",min:e,max:c,step:a,value:[g,g]})});describe("when handle1 tries to overtake handle2 from the left",function(){beforeEach(function(){d=$("#testSlider").find(".slider-track > .slider-handle:first");d.focus()});it("handle2 moves to the right by the step value",function(){d.on("keydown",function(){var j=f.slider("getValue");var i=g+a;expect(j[1]).toBe(i)});var h=$.Event("keydown");h.which=39;d.trigger(h)});it("handle1's value remains unchanged",function(){var i=f.slider("getValue");d.on("keydown",function(){expect(i[0]).toBe(g)});var h=$.Event("keydown");h.which=39;d.trigger(h)})});describe("when handle2 tries to overtake handle1 from the right",function(){beforeEach(function(){b=$("#testSlider").find(".slider-track > .slider-handle:eq( 1 )");b.focus()});it("handle1 moves to the left by the step value",function(){b.on("keydown",function(){var j=f.slider("getValue");var i=g-a;expect(j[0]).toBe(i)});var h=$.Event("keydown");h.which=37;b.trigger(h)});it("handle2's value remains unchanged",function(){var i=f.slider("getValue");b.on("keydown",function(){expect(i[1]).toBe(g)});var h=$.Event("keydown");h.which=37;b.trigger(h)})})});describe("For the natural arrow keys",function(){var h=[{reversed:false,keyEvent:37,expectedSliderValue:g-a,orientation:"horizontal",key:"left"},{reversed:true,keyEvent:37,expectedSliderValue:g+a,orientation:"horizontal",key:"left"},{reversed:false,keyEvent:39,expectedSliderValue:g+a,orientation:"horizontal",key:"right"},{reversed:true,keyEvent:39,expectedSliderValue:g-a,orientation:"horizontal",key:"right"},{reversed:false,keyEvent:38,expectedSliderValue:g-a,orientation:"vertical",key:"up"},{reversed:true,keyEvent:38,expectedSliderValue:g+a,orientation:"vertical",key:"up"},{reversed:false,keyEvent:40,expectedSliderValue:g+a,orientation:"vertical",key:"down"},{reversed:true,keyEvent:40,expectedSliderValue:g-a,orientation:"vertical",key:"down"}];h.forEach(function(i){describe("A"+((i.reversed)?" reversed":"")+i.orientation+" slider is used for the arrow keys",function(){beforeEach(function(){f=$("#testSlider1").slider({id:"testSlider",min:e,max:c,step:a,value:g,natural_arrow_keys:true,reversed:i.reversed,orientation:i.orientation});d=$("#testSlider").find(".slider-track > .slider-handle:first");d.focus()});it("moves to the "+i.key+" by the 'step' value when the "+i.key+" arrow key is pressed",function(){d.on("keydown",function(){var l=f.slider("getValue");var k=i.expectedSliderValue;expect(l).toBe(k)});var j=$.Event("keydown");j.which=i.keyEvent;d.trigger(j)})})})});afterEach(function(){if(f){f.slider("destroy")}})});