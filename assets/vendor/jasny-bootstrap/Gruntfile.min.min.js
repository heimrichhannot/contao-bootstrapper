module.exports=function(j){j.util.linefeed="\n";RegExp.quote=function(a){return a.replace(/[-\\^$*+?.()|[\]{}]/g,"\\$&")};var i=require("fs");var k=require("path");var h=require("./grunt/bs-lessdoc-parser.js");var l=require("./grunt/bs-raw-files-generator.js");var n=require("./grunt/shrinkwrap.js");j.initConfig({pkg:j.file.readJSON("package.json"),banner:'/*!\n * Jasny Bootstrap v<%= pkg.version %> (<%= pkg.homepage %>)\n * Copyright 2012-<%= grunt.template.today("yyyy") %> <%= pkg.author %>\n * Licensed under <%= pkg.license.type %> (<%= pkg.license.url %>)\n */\n',jqueryCheck:"if (typeof jQuery === 'undefined') { throw new Error('Jasny Bootstrap\\'s JavaScript requires jQuery') }\n\n",clean:{dist:["dist","docs/dist"],jekyll:["_gh_pages"],assets:["assets/css/*.min.css","assets/js/*.min.js"],jade:["jade/*.jade"]},jshint:{options:{jshintrc:"js/.jshintrc"},grunt:{options:{jshintrc:"grunt/.jshintrc"},src:["Gruntfile.js","grunt/*.js"]},src:{src:"js/*.js"},test:{src:"js/tests/unit/*.js"},assets:{src:["docs/assets/js/application.js","docs/assets/js/customizer.js"]}},jscs:{options:{config:"js/.jscs.json",},grunt:{src:["Gruntfile.js","grunt/*.js"]},src:{src:"js/*.js"},test:{src:"js/tests/unit/*.js"},assets:{src:["docs/assets/js/application.js","docs/assets/js/customizer.js"]}},csslint:{options:{csslintrc:"less/.csslintrc"},src:["dist/css/<%= pkg.name %>.css","docs/assets/css/docs.css","docs/examples/**/*.css"]},concat:{options:{banner:"<%= banner %>\n<%= jqueryCheck %>",stripBanners:false},bootstrap:{src:["js/transition.js","js/offcanvas.js","js/rowlink.js","js/inputmask.js","js/fileinput.js"],dest:"dist/js/<%= pkg.name %>.js"}},uglify:{options:{report:"min"},bootstrap:{options:{banner:"<%= banner %>"},src:"<%= concat.bootstrap.dest %>",dest:"dist/js/<%= pkg.name %>.min.js"},customize:{options:{preserveComments:"some"},src:["docs/assets/js/vendor/less.min.js","docs/assets/js/vendor/jszip.min.js","docs/assets/js/vendor/uglify.min.js","docs/assets/js/vendor/blob.js","docs/assets/js/vendor/filesaver.js","docs/assets/js/raw-files.min.js","docs/assets/js/customizer.js"],dest:"docs/assets/js/customize.min.js"},docsJs:{options:{preserveComments:"some"},src:["docs/assets/js/vendor/holder.js","docs/assets/js/application.js"],dest:"docs/assets/js/docs.min.js"}},less:{compileCore:{options:{strictMath:true,sourceMap:true,outputSourceFiles:true,sourceMapURL:"<%= pkg.name %>.css.map",sourceMapFilename:"dist/css/<%= pkg.name %>.css.map"},files:{"dist/css/<%= pkg.name %>.css":"less/build/<%= pkg.name %>.less"}},minify:{options:{cleancss:true,report:"min"},files:{"dist/css/<%= pkg.name %>.min.css":"dist/css/<%= pkg.name %>.css"}}},cssmin:{compress:{options:{keepSpecialComments:"*",noAdvanced:true,report:"min",selectorsMergeMode:"ie8"},src:["docs/assets/css/docs.css","docs/assets/css/pygments-manni.css"],dest:"docs/assets/css/docs.min.css"}},usebanner:{dist:{options:{position:"top",banner:"<%= banner %>"},files:{src:["dist/css/<%= pkg.name %>.css","dist/css/<%= pkg.name %>.min.css"]}}},csscomb:{options:{config:"less/.csscomb.json"},dist:{files:{"dist/css/<%= pkg.name %>.css":"dist/css/<%= pkg.name %>.css"}},examples:{expand:true,cwd:"docs/examples/",src:["**/*.css"],dest:"docs/examples/"}},copy:{docs:{expand:true,cwd:"./dist",src:["{css,js}/*.min.*","css/*.map"],dest:"docs/dist"}},qunit:{options:{inject:"js/tests/unit/phantom.js"},files:"js/tests/index.html"},connect:{server:{options:{port:3000,base:"."}}},jekyll:{docs:{}},jade:{compile:{options:{pretty:true,data:function(){var c=k.join(__dirname,"less/build/variables.less");var b=i.readFileSync(c,{encoding:"utf8"});var a=new h(b);return{sections:a.parseFile()}}},files:{"docs/_includes/customizer-variables.html":"docs/jade/customizer-variables.jade","docs/_includes/nav-customize.html":"docs/jade/customizer-nav.jade"}}},validation:{options:{charset:"utf-8",doctype:"HTML5",failHard:true,reset:true,relaxerror:["Bad value X-UA-Compatible for attribute http-equiv on element meta.","Element img is missing required attribute src."]},files:{src:"_gh_pages/**/*.html"}},watch:{src:{files:"<%= jshint.src.src %>",tasks:["jshint:src","qunit"]},test:{files:"<%= jshint.test.src %>",tasks:["jshint:test","qunit"]},less:{files:"less/*.less",tasks:"less"}},replace:{versionNumber:{src:["*.js","*.md","*.json","*.yml","js/*.js"],overwrite:true,replacements:[{from:j.option("oldver"),to:j.option("newver")}]}},"saucelabs-qunit":{all:{options:{build:process.env.TRAVIS_JOB_ID,concurrency:10,urls:["http://127.0.0.1:3000/js/tests/index.html"],browsers:j.file.readYAML("test-infra/sauce_browsers.yml")}}},exec:{npmUpdate:{command:"npm update --silent"},npmShrinkWrap:{command:"npm shrinkwrap --dev"}}});require("load-grunt-tasks")(j,{scope:"devDependencies"});j.registerTask("validate-html",["jekyll","validation"]);var m=[];if(!process.env.TWBS_TEST||process.env.TWBS_TEST==="core"){m=m.concat(["dist-css","csslint","jshint","jscs","qunit","build-customizer-html"])}if(!process.env.TWBS_TEST||process.env.TWBS_TEST==="validate-html"){m.push("validate-html")}if(typeof process.env.SAUCE_ACCESS_KEY!=="undefined"&&(!process.env.TWBS_TEST||process.env.TWBS_TEST==="sauce-js-unit")){m.push("connect");m.push("saucelabs-qunit")}j.registerTask("test",m);j.registerTask("dist-js",["concat","uglify"]);j.registerTask("dist-css",["less","cssmin","csscomb","usebanner"]);j.registerTask("dist-docs","copy:docs");j.registerTask("dist",["clean:dist","dist-css","dist-js","dist-docs"]);j.registerTask("default",["dist","build-customizer"]);j.registerTask("docs",["jekyll","dist-docs"]);j.registerTask("change-version-number","replace");j.registerTask("build-customizer",["build-customizer-html","build-raw-files"]);j.registerTask("build-customizer-html","jade");j.registerTask("build-raw-files","Add scripts/less files to customizer.",function(){var a=j.template.process("<%= banner %>");l(a)});j.registerTask("update-shrinkwrap",["exec:npmUpdate","exec:npmShrinkWrap","∆update-shrinkwrap"]);j.registerTask("∆update-shrinkwrap",function(){n.call(this,j)})};