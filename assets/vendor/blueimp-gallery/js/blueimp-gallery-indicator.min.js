(function(a){if(typeof define==="function"&&define.amd){define(["./blueimp-helper","./blueimp-gallery"],a)}else{a(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}}(function(g,h){g.extend(h.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:true});var e=h.prototype.initSlides,a=h.prototype.addSlide,d=h.prototype.resetSlides,b=h.prototype.handleClick,f=h.prototype.handleSlide,c=h.prototype.handleClose;g.extend(h.prototype,{createIndicator:function(l){var j=this.indicatorPrototype.cloneNode(false),m=this.getItemProperty(l,this.options.titleProperty),i=this.options.thumbnailProperty,k,n;if(this.options.thumbnailIndicators){if(i){k=this.getItemProperty(l,i)}if(k===undefined){n=l.getElementsByTagName&&g(l).find("img")[0];if(n){k=n.src}}if(k){j.style.backgroundImage='url("'+k+'")'}}if(m){j.title=m}return j},addIndicator:function(j){if(this.indicatorContainer.length){var i=this.createIndicator(this.list[j]);i.setAttribute("data-index",j);this.indicatorContainer[0].appendChild(i);this.indicators.push(i)}},setActiveIndicator:function(i){if(this.indicators){if(this.activeIndicator){this.activeIndicator.removeClass(this.options.activeIndicatorClass)}this.activeIndicator=g(this.indicators[i]);this.activeIndicator.addClass(this.options.activeIndicatorClass)}},initSlides:function(i){if(!i){this.indicatorContainer=this.container.find(this.options.indicatorContainer);if(this.indicatorContainer.length){this.indicatorPrototype=document.createElement("li");this.indicators=this.indicatorContainer[0].children}}e.call(this,i)},addSlide:function(i){a.call(this,i);this.addIndicator(i)},resetSlides:function(){d.call(this);this.indicatorContainer.empty();this.indicators=[]},handleClick:function(j){var k=j.target||j.srcElement,i=k.parentNode;if(i===this.indicatorContainer[0]){this.preventDefault(j);this.slide(this.getNodeIndex(k))}else{if(i.parentNode===this.indicatorContainer[0]){this.preventDefault(j);this.slide(this.getNodeIndex(i))}else{return b.call(this,j)}}},handleSlide:function(i){f.call(this,i);this.setActiveIndicator(i)},handleClose:function(){if(this.activeIndicator){this.activeIndicator.removeClass(this.options.activeIndicatorClass)}c.call(this)}});return h}));