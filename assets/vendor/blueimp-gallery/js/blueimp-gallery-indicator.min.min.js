(function(b){if(typeof define==="function"&&define.amd){define(["./blueimp-helper","./blueimp-gallery"],b)}else{b(window.blueimp.helper||window.jQuery,window.blueimp.Gallery)}}(function(l,k){l.extend(k.prototype.options,{indicatorContainer:"ol",activeIndicatorClass:"active",thumbnailProperty:"thumbnail",thumbnailIndicators:true});var n=k.prototype.initSlides,j=k.prototype.addSlide,o=k.prototype.resetSlides,i=k.prototype.handleClick,m=k.prototype.handleSlide,p=k.prototype.handleClose;l.extend(k.prototype,{createIndicator:function(b){var d=this.indicatorPrototype.cloneNode(false),a=this.getItemProperty(b,this.options.titleProperty),e=this.options.thumbnailProperty,c,f;if(this.options.thumbnailIndicators){if(e){c=this.getItemProperty(b,e)}if(c===undefined){f=b.getElementsByTagName&&l(b).find("img")[0];if(f){c=f.src}}if(c){d.style.backgroundImage='url("'+c+'")'}}if(a){d.title=a}return d},addIndicator:function(a){if(this.indicatorContainer.length){var b=this.createIndicator(this.list[a]);b.setAttribute("data-index",a);this.indicatorContainer[0].appendChild(b);this.indicators.push(b)}},setActiveIndicator:function(a){if(this.indicators){if(this.activeIndicator){this.activeIndicator.removeClass(this.options.activeIndicatorClass)}this.activeIndicator=l(this.indicators[a]);this.activeIndicator.addClass(this.options.activeIndicatorClass)}},initSlides:function(a){if(!a){this.indicatorContainer=this.container.find(this.options.indicatorContainer);if(this.indicatorContainer.length){this.indicatorPrototype=document.createElement("li");this.indicators=this.indicatorContainer[0].children}}n.call(this,a)},addSlide:function(a){j.call(this,a);this.addIndicator(a)},resetSlides:function(){o.call(this);this.indicatorContainer.empty();this.indicators=[]},handleClick:function(b){var a=b.target||b.srcElement,c=a.parentNode;if(c===this.indicatorContainer[0]){this.preventDefault(b);this.slide(this.getNodeIndex(a))}else{if(c.parentNode===this.indicatorContainer[0]){this.preventDefault(b);this.slide(this.getNodeIndex(c))}else{return i.call(this,b)}}},handleSlide:function(a){m.call(this,a);this.setActiveIndicator(a)},handleClose:function(){if(this.activeIndicator){this.activeIndicator.removeClass(this.options.activeIndicatorClass)}p.call(this)}});return k}));