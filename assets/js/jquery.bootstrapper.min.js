(function(b){var a={init:function(){this.initFastClick();this.toggleCollapseFromHash();this.openModalFromHash();this.toggleTabFromHash();this.initModalNavigation();this.initNavbar();this.navFollowLinkIfItemsOpen();this.supportNestedDropdowns();this.initSlider();this.loadModalFromUrl();this.onCloseModal();this.initCarouselProgressBar();this.addPlaceholderTagSupport();this.initJQueryValidation();this.initAjaxForms();this.initScrollClass();this.megaMenuEqualHeight();this.setHashFromCollapse();this.followAnchor();this.initFileUpload();this.slideUpCollapse();this.initIosLabelBugFix();b(document).ajaxComplete(b.proxy(this.ajaxComplete,this))},ajaxComplete:function(){},slideUpCollapse:function(){b(".collapse.slideup").on("show.bs.collapse",function(){b("html, body").animate({scrollTop:b(document).height()},"slow")})},initFileUpload:function(){b(".fileinput [data-dismiss]").on("click",function(){var c=b(this).parent(".fileinput");c.fileinput("clear");c.find("input[type=file]").attr("value","")})},megaMenuEqualHeight:function(){b('[data-equal-height="ul.nav"]').each(function(){var e=b(this),d=0,c=0;e.find(e.data("equal-height")).each(function(){var f=b(this).actual("innerHeight");actualOuterHeight=b(this).actual("outerHeight",{includeMargin:true});if(actualOuterHeight>c){c=actualOuterHeight}if(f>d){d=f}});e.height(c);e.find(".submenu-wrapper").height(d)})},supportNestedDropdowns:function(){b("ul.dropdown-menu").on("click",'a[data-toggle="dropdown"]',function(c){c.preventDefault();c.stopPropagation();b("ul.dropdown-menu [data-toggle=dropdown]").parent().removeClass("open");b(this).parent().addClass("open")})},initScrollClass:function(){b(window).on("scroll",function(d){var c=b(window).scrollTop();b('[data-spy="scroll"]').each(function(){var f=b(this),e=f.data("scrollclass"),g=f.data("offset")?f.data("offset"):1;if(e==null){return true}if(c>g){f.addClass(e)}else{f.removeClass(e)}})})},initNavbar:function(){b(".navbar-collapse").on("shown.bs.collapse",function(){b("body").addClass("navbar-xs-open")});b(".navbar-collapse").on("hide.bs.collapse",function(){b("body").removeClass("navbar-xs-open")})},addPlaceholderTagSupport:function(){if(!Modernizr.input.placeholder){b("input, textarea").placeholder()}},initJQueryValidation:function(){var c=b("form.jquery-validation");if(c.length>0){b.validator.addMethod("checkbox",function(g,e){var d=false,f=b(e).closest(".form-group");if(f.find(".control-label:first .mandatory").length>0){f.find("input[type=checkbox]").each(function(){if(this.checked){d=true;return false}});return d}return true},jQuery.validator.format("Dieses Feld ist ein Pflichtfeld."));c.each(function(){b(this).validate({errorClass:"error",focusInvalid:false,errorPlacement:function(d,e){d.appendTo(e.closest(".form-group"))}})})}},initAjaxForms:function(){b("body").on("submit",".ajax-form",function(f){var c=b(this),d=c.serializeArray();f.preventDefault();d.push({name:"isAjax",value:"1"});b.ajax(c.attr("action"),{data:d,method:b(this).attr("method"),success:function(h){var e,h="<div>"+h+"</div>";if(c.data("replace")){e=b(h).find(c.data("replace"));if(e!==undefined){b(c.data("replace")).html(e)}}else{e=b(h).find("#"+c.attr("id"));if(e.length<1){c.html(h);e=c}else{c.replaceWith(e)}}var i=e.find(".alert:first, .error:first");if(i.length>0){var g=i.offset();b("html,body").animate({scrollTop:parseInt(g.top)-70+"px"},500)}}})})},initCarouselProgressBar:function(){var i=0,h=b(".carousel-progress .progress-bar"),j=h.find(".sr-only"),g=b(".carousel"),d=200,f=Math.floor(d*100/parseInt(g.data("interval")));if(g.length<=0){return}function e(){if(i>0){h.removeClass("carousel-transition")}if(i>=100){j.text("100%");h.css({width:"100%"});i=100;g.carousel("next");h.addClass("carousel-transition");return false}h.css({width:i+"%"});j.text(i+"%");i+=f}var c=setInterval(e,d);g.carousel({interval:false,pause:false}).on("slide.bs.carousel",function(){clearInterval(c)}).on("slid.bs.carousel",function(){i=0;c=setInterval(e,d)});g.hover(function(){clearInterval(c)},function(){c=setInterval(e,d)});g.on("click",".carousel-control, .carousel-indicators",function(){i=0;clearInterval(c);h.addClass("carousel-transition").css({width:"0%"})})},initModal:function(){b('[data-toggle="modal"]').each(function(){var d=b(this),c=b(d.data("target"));d.data("href",d.attr("href"));d.attr("href","#");if(!c.hasClass("in")){c.data("history-base-filtered",window.location.href)}});b("body").on("click",'[data-toggle="modal"]',function(g){g.preventDefault();var f=b(this),d=b(f.data("target")),c=d.find(".modal-dialog");c.load(f.data("href"),function(h,i,e){history.pushState(null,null,f.data("href"))})})},onCloseModal:function(){b(".modal").on("hide.bs.modal",function(d){var c=b(this);c.find("iframe").each(function(){var e=b(this);e.attr("src",e.attr("src").replace("autoplay=1","autoplay=0"))});c.find("audio, video").each(function(){this.pause()});if(c.data("history-base-filtered")){history.pushState(null,null,c.data("history-base-filtered"))}else{history.pushState(null,null,c.data("history-base"))}})},loadModalFromUrl:function(){if(b(".modal.in").length>0){b(".modal.in").modal("show")}},initSlider:function(){b("input.slider:not([data-slider-type=ticks],[data-slider-type=range])").slider();b("input.slider[data-slider-type=range]").slider().on("slideStop",function(d){var f=b(this).parent().siblings(".slider-labels");if(b(this).data("slider-ticks-labels")!=""){var c=b(this).data("slider-ticks-labels");f.find(".slider-label-from").html(c[d.value[0]]);f.find(".slider-label-to").html(c[d.value[1]])}else{f.find(".slider-label-from").html(d.value[0]);f.find(".slider-label-to").html(d.value[1])}});b("input.slider[data-slider-type=ticks]").slider().on("slideStop",function(c){var d=b(this).data("slider-ticks-labels")[c.value];b(this).parent().siblings(".slider-labels").find(".slider-label-tick").html(d)})},setHashFromCollapse:function(){b(".collapse").on("show.bs.collapse",function(c){if(this.id){history.pushState({},document.title,location.href.replace(/#/g,"")+"#"+this.id)}});b(".collapse").on("hide.bs.collapse",function(c){if(this.id){history.replaceState({},document.title,"/")}})},followAnchor:function(){b("a[href*=#]:not([data-toggle])").on("click",function(){var d=document.createElement("a");d.href=b(this).attr("href");return c(d.hash)});function c(e){if(e==""){return true}var d=b(e);if(d.length>0){b("html,body").animate({scrollTop:d.offset().top},500);window.location.hash=e;return false}return true}},toggleCollapseFromHash:function(){var f=location.hash.replace(/#/g,"");if(!f){return false}var d=b("#"+f+".collapse"),c=b("[href='#"+f+"']");if(d.length<1){return false}var e=b(c.data("parent"));if(e.length>0){b(c.data("parent")).find(".collapse").removeClass("in");b(c.data("parent")).find("[data-toggle=collapse]").addClass("collapsed")}d.addClass("in");c.removeClass("collapsed");b("html,body").animate({scrollTop:d.offset().top},500)},openModalFromHash:function(){var d=location.hash.replace(/#/g,"").replace(/is/g,"or");if(!d){return false}var c=b("#"+d);if(c.length<1||!c.hasClass("modal")){return false}c.modal("show")},toggleTabFromHash:function(){var f=location.hash.replace(/#/g,"");if(!f){return false}var e=b("#"+f),d=b("[href='#"+f+"']");var g=d.closest(".tabcontrol_tabs"),c=e.closest(".tabcontrol_panes");if(g.length>0&&c.length>0){g.find("a").parent().removeClass("active");c.find(".tab-pane").removeClass("in").removeClass("active");e.addClass("active").addClass("in");d.parent().addClass("active")}},initModalNavigation:function(){b(".modal").on("click",".modal-next",function(c){c.preventDefault();window.location=b(this).attr("href")})},initModalRemoteUpdate:function(){b("body").on("hidden.bs.modal",".modal",function(){b(this).removeData("bs.modal")});b('a[data-toggle="modal"][data-remote]').on("click",function(f){f.preventDefault();var d=b(this),c=b(d.data("target"));b.ajax({url:d.attr("href")}).done(function(e){c.find(".modal-content").replaceWith(e).end().modal()});return false})},navFollowLinkIfItemsOpen:function(){b(".nav-collapse").on("click",'a[data-toggle="dropdown"]',function(f){var d=b(this),c=d.parent("li");if(this.href!==undefined&&c.hasClass("open")){if(this.target.length){window.open(this.href,this.target)}else{window.location=this.href}}})},initFastClick:function(){FastClick.attach(document.body)},initIosLabelBugFix:function(){b(".ios .checkbox-label, .ios .radio-label").each(function(){b(this).on("click",function(){b(this).siblings("input").trigger("click")})})},};b(document).ready(function(){a.init()})})(jQuery);