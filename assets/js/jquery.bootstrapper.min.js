!function(a){var t={init:function(){this.initFastClick(),this.toggleCollapseFromHash(),this.openModalFromHash(),this.toggleTabFromHash(),this.initModalNavigation(),this.initNavbar(),this.navFollowLinkIfItemsOpen(),this.supportNestedDropdowns(),this.initDateTimePicker(),this.initSlider(),this.initCarouselProgressBar(),this.addPlaceholderTagSupport(),this.initJQueryValidation(),this.initAjaxForms(),this.initScrollClass(),this.megaMenuEqualHeight(),this.setHashFromCollapse(),this.followAnchor(),this.initFileUpload(),this.slideUpCollapse(),this.initIosLabelBugFix(),a(document).ajaxComplete(a.proxy(this.ajaxComplete,this))},ajaxComplete:function(){this.initDateTimePicker()},slideUpCollapse:function(){a(".collapse.slideup").on("show.bs.collapse",function(){a("html, body").animate({scrollTop:a(document).height()},"slow")})},initFileUpload:function(){a(".fileinput [data-dismiss]").on("click",function(){var t=a(this).parent(".fileinput");t.fileinput("clear"),t.find("input[type=file]").attr("value","")})},megaMenuEqualHeight:function(){a('[data-equal-height="ul.nav"]').each(function(){var t=a(this),e=0,i=0;t.find(t.data("equal-height")).each(function(){var t=a(this).actual("innerHeight");actualOuterHeight=a(this).actual("outerHeight",{includeMargin:!0}),actualOuterHeight>i&&(i=actualOuterHeight),t>e&&(e=t)}),t.height(i),t.find(".submenu-wrapper").height(e)})},supportNestedDropdowns:function(){a("ul.dropdown-menu").on("click",'a[data-toggle="dropdown"]',function(t){t.preventDefault(),t.stopPropagation(),a("ul.dropdown-menu [data-toggle=dropdown]").parent().removeClass("open"),a(this).parent().addClass("open")})},initScrollClass:function(){a(window).on("scroll",function(t){var e=a(window).scrollTop();a('[data-spy="scroll"]').each(function(){var t=a(this),i=t.data("scrollclass"),o=t.data("offset")?t.data("offset"):1;return null==i?!0:void(e>o?t.addClass(i):t.removeClass(i))})})},initNavbar:function(){a(".navbar-collapse").on("shown.bs.collapse",function(){a("body").addClass("navbar-xs-open")}),a(".navbar-collapse").on("hide.bs.collapse",function(){a("body").removeClass("navbar-xs-open")})},addPlaceholderTagSupport:function(){Modernizr.input.placeholder||a("input, textarea").placeholder()},initJQueryValidation:function(){var t=a("form.jquery-validation");t.length>0&&(a.validator.addMethod("checkbox",function(t,e){var i=!1,o=a(e).closest(".form-group");return o.find(".control-label:first .mandatory").length>0?(o.find("input[type=checkbox]").each(function(){return this.checked?(i=!0,!1):void 0}),i):!0},jQuery.validator.format("Dieses Feld ist ein Pflichtfeld.")),t.each(function(){a(this).validate({errorClass:"error",focusInvalid:!1,errorPlacement:function(a,t){a.appendTo(t.closest(".form-group"))}})}))},initAjaxForms:function(){a("body").on("submit",".ajax-form",function(t){var e=a(this),i=e.serializeArray();t.preventDefault(),i.push({name:"isAjax",value:"1"}),a.ajax(e.attr("action"),{data:i,method:a(this).attr("method"),success:function(t){var i,t="<div>"+t+"</div>";e.data("replace")?(i=a(t).find(e.data("replace")),void 0!==i&&a(e.data("replace")).html(i)):(i=a(t).find("#"+e.attr("id")),i.length<1?(e.html(t),i=t):e.replaceWith(i));var o=i.find(".alert:first, .error:first");if(o.length>0){var n=o.offset();a("html,body").animate({scrollTop:parseInt(n.top)-70+"px"},500)}}})})},initCarouselProgressBar:function(){function t(){return e>0&&i.removeClass("carousel-transition"),e>=100?(o.text("100%"),i.css({width:"100%"}),e=100,n.carousel("next"),i.addClass("carousel-transition"),!1):(i.css({width:e+"%"}),o.text(e+"%"),void(e+=r))}var e=0,i=a(".carousel-progress .progress-bar"),o=i.find(".sr-only"),n=a(".carousel"),l=200,r=Math.floor(100*l/parseInt(n.data("interval")));if(!(n.length<=0)){var s=setInterval(t,l);n.carousel({interval:!1,pause:!1}).on("slide.bs.carousel",function(){clearInterval(s)}).on("slid.bs.carousel",function(){e=0,s=setInterval(t,l)}),n.hover(function(){clearInterval(s)},function(){s=setInterval(t,l)}),n.on("click",".carousel-control, .carousel-indicators",function(){e=0,clearInterval(s),i.addClass("carousel-transition").css({width:"0%"})})}},initModal:function(){a('[data-toggle="modal"]').each(function(){var t=a(this),e=a(t.data("target"));t.data("href",t.attr("href")),t.attr("href","#"),e.hasClass("in")||e.data("history-base-filtered",window.location.href)}),a("body").on("click",'[data-toggle="modal"]',function(t){t.preventDefault();var e=a(this),i=a(e.data("target")),o=i.find(".modal-dialog");o.load(e.data("href"),function(a,t,i){history.pushState(null,null,e.data("href"))})})},onCloseModal:function(){a(".modal").on("hide.bs.modal",function(t){var e=a(this);e.find("iframe").each(function(){var t=a(this);t.attr("src",t.attr("src").replace("autoplay=1","autoplay=0"))}),e.find("audio, video").each(function(){this.pause()}),e.data("history-base-filtered")?history.pushState(null,null,e.data("history-base-filtered")):history.pushState(null,null,e.data("history-base"))})},loadModalFromUrl:function(){a(".modal.in").length>0&&a(".modal.in").modal("show")},initDateTimePicker:function(){var t={locale:a("html").attr("lang"),icons:{time:"fa fa-time",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-screenshot",clear:"fa fa-trash"}};a(".datepicker, .timepicker").each(function(e,i){var o=a(this),n=o.find("input"),l=n.data("mindate"),r=n.data("maxdate"),s=1==n.data("linked-unlock"),d=a(n.data("linked-start")),c=a(n.data("linked-end"));o.datetimepicker(a.extend({format:n.data("format")},t)),moment(l,n.data("format")).isValid()&&o.data("DateTimePicker").minDate(moment(l,n.data("format"))),moment(r,n.data("format")).isValid()&&o.data("DateTimePicker").maxDate(moment(r,n.data("format"))),d.length>0&&(moment(d.val(),n.data("format")).isValid()&&o.data("DateTimePicker").minDate(moment(d.val(),n.data("format"))),o.on("dp.change",function(a){moment(a.date).isValid()&&(s?a.date.isBefore(d.closest(".datepicker").data("DateTimePicker").date())&&d.closest(".datepicker").data("DateTimePicker").date(a.date):d.closest(".datepicker").data("DateTimePicker").maxDate(a.date))})),c.length>0&&(moment(c.val(),n.data("format")).isValid()&&o.data("DateTimePicker").maxDate(moment(c.val(),n.data("format"))),o.on("dp.change",function(a){moment(a.date).isValid()&&(s?a.date.isAfter(c.closest(".datepicker").data("DateTimePicker").date())&&c.closest(".datepicker").data("DateTimePicker").date(a.date):c.closest(".datepicker").data("DateTimePicker").minDate(a.date))}))})},initSlider:function(){a("input.slider:not([data-slider-type=ticks],[data-slider-type=range])").slider(),a("input.slider[data-slider-type=range]").slider().on("slideStop",function(t){var e=a(this).parent().siblings(".slider-labels");if(""!=a(this).data("slider-ticks-labels")){var i=a(this).data("slider-ticks-labels");e.find(".slider-label-from").html(i[t.value[0]]),e.find(".slider-label-to").html(i[t.value[1]])}else e.find(".slider-label-from").html(t.value[0]),e.find(".slider-label-to").html(t.value[1])}),a("input.slider[data-slider-type=ticks]").slider().on("slideStop",function(t){var e=a(this).data("slider-ticks-labels")[t.value];a(this).parent().siblings(".slider-labels").find(".slider-label-tick").html(e)})},setHashFromCollapse:function(){a(".collapse").on("show.bs.collapse",function(a){this.id&&history.pushState({},document.title,location.href.replace(/#/g,"")+"#"+this.id)}),a(".collapse").on("hide.bs.collapse",function(a){this.id&&history.replaceState({},document.title,"/")})},followAnchor:function(){function t(t){if(""==t)return!0;var e=a(t);return e.length>0?(a("html,body").animate({scrollTop:e.offset().top},500),window.location.hash=t,!1):!0}a("a[href*=#]:not([data-toggle])").on("click",function(){var e=document.createElement("a");return e.href=a(this).attr("href"),t(e.hash)})},toggleCollapseFromHash:function(){var t=location.hash.replace(/#/g,"");if(!t)return!1;var e=a("#"+t+".collapse"),i=a("[href='#"+t+"']");if(e.length<1)return!1;var o=a(i.data("parent"));o.length>0&&(a(i.data("parent")).find(".collapse").removeClass("in"),a(i.data("parent")).find("[data-toggle=collapse]").addClass("collapsed")),e.addClass("in"),i.removeClass("collapsed"),a("html,body").animate({scrollTop:e.offset().top},500)},openModalFromHash:function(){var t=location.hash.replace(/#/g,"").replace(/is/g,"or");if(!t)return!1;var e=a("#"+t);return e.length<1||!e.hasClass("modal")?!1:void e.modal("show")},toggleTabFromHash:function(){var t=location.hash.replace(/#/g,"");if(!t)return!1;var e=a("#"+t),i=a("[href='#"+t+"']"),o=i.closest(".tabcontrol_tabs"),n=e.closest(".tabcontrol_panes");o.length>0&&n.length>0&&(o.find("a").parent().removeClass("active"),n.find(".tab-pane").removeClass("in").removeClass("active"),e.addClass("active").addClass("in"),i.parent().addClass("active"))},initModalNavigation:function(){a(".modal").on("click",".modal-next",function(t){t.preventDefault(),window.location=a(this).attr("href")})},initModalRemoteUpdate:function(){a("body").on("hidden.bs.modal",".modal",function(){a(this).removeData("bs.modal")}),a('a[data-toggle="modal"][data-remote]').on("click",function(t){t.preventDefault();var e=a(this),i=a(e.data("target"));return a.ajax({url:e.attr("href")}).done(function(a){i.find(".modal-content").replaceWith(a).end().modal()}),!1})},navFollowLinkIfItemsOpen:function(){a(".nav-collapse").on("click",'a[data-toggle="dropdown"]',function(t){var e=a(this),i=e.parent("li");void 0!==this.href&&i.hasClass("open")&&(this.target.length?window.open(this.href,this.target):window.location=this.href)})},initFastClick:function(){FastClick.attach(document.body)},initIosLabelBugFix:function(){a(".ios .checkbox-label, .ios .radio-label").each(function(){a(this).on("click",function(){a(this).siblings("input").trigger("click")})})}};a(document).ready(function(){t.init()})}(jQuery);