(function(b){var a={init:function(){this.initFastClick();this.toggleCollapseFromHash();this.openModalFromHash();this.toggleTabFromHash();this.initModalNavigation();this.initNavbar();this.navFollowLinkIfItemsOpen();this.supportNestedDropdowns();this.initDateTimePicker();this.initSlider();this.loadModalFromUrl();this.onCloseModal();this.initCarouselProgressBar();this.addPlaceholderTagSupport();this.initJQueryValidation();this.initAjaxForms();this.initScrollClass();this.megaMenuEqualHeight();this.setHashFromCollapse();this.followAnchor();this.initFileUpload();this.slideUpCollapse();b(document).ajaxComplete(b.proxy(this.ajaxComplete,this))},ajaxComplete:function(){this.initDateTimePicker()},slideUpCollapse:function(){b(".collapse.slideup").on("show.bs.collapse",function(){b("html, body").animate({scrollTop:b(document).height()},"slow")})},initFileUpload:function(){b(".fileinput [data-dismiss]").on("click",function(){var c=b(this).parent(".fileinput");c.fileinput("clear");c.find("input[type=file]").attr("value","")})},megaMenuEqualHeight:function(){b('[data-equal-height="ul.nav"]').each(function(){var e=b(this),d=0,c=0;e.find(e.data("equal-height")).each(function(){var f=b(this).actual("innerHeight");actualOuterHeight=b(this).actual("outerHeight",{includeMargin:true});if(actualOuterHeight>c){c=actualOuterHeight}if(f>d){d=f}});e.height(c);e.find(".submenu-wrapper").height(d)})},supportNestedDropdowns:function(){b("ul.dropdown-menu").on("click",'a[data-toggle="dropdown"]',function(c){c.preventDefault();c.stopPropagation();b("ul.dropdown-menu [data-toggle=dropdown]").parent().removeClass("open");b(this).parent().addClass("open")})},initScrollClass:function(){b(window).on("scroll",function(d){var c=b(window).scrollTop();b('[data-spy="scroll"]').each(function(){var f=b(this),e=f.data("scrollclass"),g=f.data("offset")?f.data("offset"):1;if(e==null){return true}if(c>g){f.addClass(e)}else{f.removeClass(e)}})})},initNavbar:function(){b(".navbar-collapse").on("shown.bs.collapse",function(){b("body").addClass("navbar-xs-open")});b(".navbar-collapse").on("hide.bs.collapse",function(){b("body").removeClass("navbar-xs-open")})},addPlaceholderTagSupport:function(){if(!Modernizr.input.placeholder){b("input, textarea").placeholder()}},initJQueryValidation:function(){var c=b("form.jquery-validation");if(c.length>0){c.each(function(){b(this).validate({errorClass:"error",focusInvalid:false,errorPlacement:function(d,e){if(e.attr("type")=="radio"||e.attr("type")=="checkbox"){d.appendTo(e.closest("fieldset"))}else{d.insertAfter(e)}}})})}},initAjaxForms:function(){b("body").on("submit",".ajax-form",function(f){var c=b(this),d=c.serializeArray();f.preventDefault();d.push({name:"isAjax",value:"1"});b.ajax(c.attr("action"),{data:d,method:b(this).attr("method"),success:function(h){var e,h="<div>"+h+"</div>";if(c.data("replace")){e=b(h).find(c.data("replace"));if(e!==undefined){b(c.data("replace")).html(e)}}else{e=b(h).find("#"+c.attr("id"));if(e.length<1){c.html(h);e=c}else{c.replaceWith(e)}}var i=e.find(".alert:first, .error:first");if(i.length>0){var g=i.offset();b("html,body").animate({scrollTop:parseInt(g.top)-70+"px"},500)}}})})},initCarouselProgressBar:function(){var i=0,h=b(".carousel-progress .progress-bar"),j=h.find(".sr-only"),g=b(".carousel"),d=200,f=Math.floor(d*100/parseInt(g.data("interval")));if(g.length<=0){return}function e(){if(i>0){h.removeClass("carousel-transition")}if(i>=100){j.text("100%");h.css({width:"100%"});i=100;g.carousel("next");h.addClass("carousel-transition");return false}h.css({width:i+"%"});j.text(i+"%");i+=f}var c=setInterval(e,d);g.carousel({interval:false,pause:false}).on("slide.bs.carousel",function(){clearInterval(c)}).on("slid.bs.carousel",function(){i=0;c=setInterval(e,d)});g.hover(function(){clearInterval(c)},function(){c=setInterval(e,d)});g.on("click",".carousel-control, .carousel-indicators",function(){i=0;clearInterval(c);h.addClass("carousel-transition").css({width:"0%"})})},onCloseModal:function(){b(".modal").on("hide.bs.modal",function(d){var c=b(this);c.find("iframe").each(function(){var e=b(this);e.attr("src",e.attr("src").replace("autoplay=1","autoplay=0"))});c.find("audio, video").each(function(){this.pause()})})},setUrlHistoryFromModalLink:function(){b('[data-toggle="modal"]').on("click",function(f){var d=b(this),c=b(b(this).data("target"));c.data("history-back",window.location);history.pushState(null,null,d.attr("href"))})},loadModalFromUrl:function(){if(b(".modal.in").length>0){b(".modal.in").modal("show")}},initDateTimePicker:function(){var c={locale:b("html").attr("lang"),icons:{time:"fa fa-time",date:"fa fa-calendar",up:"fa fa-chevron-up",down:"fa fa-chevron-down",previous:"fa fa-chevron-left",next:"fa fa-chevron-right",today:"fa fa-screenshot",clear:"fa fa-trash"}};b(".datepicker, .timepicker").each(function(e,m){var i=b(this),j=i.find("input"),f=j.data("mindate"),d=j.data("maxdate"),l=j.data("linked-unlock")==true,g=b(j.data("linked-start")),h=b(j.data("linked-end"));i.datetimepicker(b.extend({format:j.data("format")},c));if(moment(f,j.data("format")).isValid()){i.data("DateTimePicker").minDate(moment(f,j.data("format")))}if(moment(d,j.data("format")).isValid()){i.data("DateTimePicker").maxDate(moment(d,j.data("format")))}if(g.length>0){if(moment(g.val(),j.data("format")).isValid()){i.data("DateTimePicker").minDate(moment(g.val(),j.data("format")))}i.on("dp.change",function(k){if(moment(k.date).isValid()){if(l){if(k.date.isBefore(g.closest(".datepicker").data("DateTimePicker").date())){g.closest(".datepicker").data("DateTimePicker").date(k.date)}}else{g.closest(".datepicker").data("DateTimePicker").maxDate(k.date)}}})}if(h.length>0){if(moment(h.val(),j.data("format")).isValid()){i.data("DateTimePicker").maxDate(moment(h.val(),j.data("format")))}i.on("dp.change",function(k){if(moment(k.date).isValid()){if(l){if(k.date.isAfter(h.closest(".datepicker").data("DateTimePicker").date())){h.closest(".datepicker").data("DateTimePicker").date(k.date)}}else{h.closest(".datepicker").data("DateTimePicker").minDate(k.date)}}})}})},initSlider:function(){b("input.slider").slider()},setHashFromCollapse:function(){var d=b(".collapse");var c="";d.on("show.bs.collapse",function(){if(this.id){history.pushState(null,null,location.href.replace(location.hash,"")+"#"+this.id);c=this.id;var e=b(b(this).prev(".toggler").find("[data-toggle=collapse]").data("parent")).find(".panel-collapse");e.each(function(){if(this.id!=c){b(this).collapse("hide")}})}});d.on("hide.bs.collapse",function(){if(this.id){if(c==this.id){history.replaceState({},document.title,location.href.replace(location.hash,""))}else{history.replaceState({},document.title,location.href.replace(location.hash,"")+"#"+c)}}})},followAnchor:function(){b("a[href*=#]:not([data-toggle])").on("click",function(){var d=b(this).attr("href").replace(/#/g,"");c(d)});function c(e){if(e==""){return true}var d=b("#"+e);if(d.length>0){b("html,body").animate({scrollTop:d.offset().top},500);window.location.hash="#"+e;return false}}},toggleCollapseFromHash:function(){var f=location.hash.replace(/#/g,"");if(!f){return false}var d=b("#"+f+".collapse"),c=b("[href='#"+f+"']");if(d.length<1){return false}var e=b(c.data("parent"));if(e.length>0){b(c.data("parent")).find(".collapse").removeClass("in")}d.addClass("in");b("html,body").animate({scrollTop:d.offset().top},500)},openModalFromHash:function(){var d=location.hash.replace(/#/g,"").replace(/is/g,"or");if(!d){return false}var c=b("#"+d);if(c.length<1||!c.hasClass("modal")){return false}c.modal("show")},toggleTabFromHash:function(){var f=location.hash.replace(/#/g,"");if(!f){return false}var e=b("#"+f),d=b("[href='#"+f+"']");var g=d.closest(".tabcontrol_tabs"),c=e.closest(".tabcontrol_panes");if(g.length>0&&c.length>0){g.find("a").parent().removeClass("active");c.find(".tab-pane").removeClass("in").removeClass("active");e.addClass("active").addClass("in");d.parent().addClass("active")}},initModalNavigation:function(){b(".modal").on("click",".modal-next",function(c){c.preventDefault();window.location=b(this).attr("href")})},initModalRemoteUpdate:function(){b("body").on("hidden.bs.modal",".modal",function(){b(this).removeData("bs.modal")});b('a[data-toggle="modal"][data-remote]').on("click",function(f){f.preventDefault();var d=b(this),c=b(d.data("target"));b.ajax({url:d.attr("href")}).done(function(e){c.find(".modal-content").replaceWith(e).end().modal()});return false})},navFollowLinkIfItemsOpen:function(){b(".nav-collapse").on("click",'a[data-toggle="dropdown"]',function(f){var d=b(this),c=d.parent("li");if(this.href!==undefined&&c.hasClass("open")){if(this.target.length){window.open(this.href,this.target)}else{window.location=this.href}}})},initFastClick:function(){FastClick.attach(document.body)}};b(document).ready(function(){a.init()})})(jQuery);