(function(b){var a={init:function(){this.initFlatPickr();b(document).ajaxComplete(b.proxy(this.ajaxComplete,this))},initFlatPickr:function(){var c={allowInput:true,locale:b("html").attr("lang"),time_24hr:true};b(".datepicker, .timepicker").each(function(){var i=b(this),n=i.closest("form"),j=i.find("input"),e=j.data(),f=n.find(e.linkedStart),g=n.find(e.linkedEnd),m=b.extend({},flatpickr.defaultConfig,c);function l(o){var k;if(o.hasClass("datimepicker")){k="YYYY-MM-DDTHH:mm"}else{if(o.hasClass("datepicker")){k="YYYY-MM-DD"}else{k="HH:mm"}}return k}function h(o,k){o.val(moment(k,e.momentDateFormat).format(l(i)))}m.defaultDate=j.val();for(var d in e){if(e.hasOwnProperty(d)){m[d]=e[d]}}m.onReady=function(){var k=i.find("input:not(.flatpickr-mobile)").val();if(k!==""){h(i.siblings(".flatpickr-mobile"),k)}};m.onChange=function(q,o,k){var p=q[0];if(f.length>0){if(f.val()!==""&&moment(p).isBefore(moment(f.val(),f.data("momentDateFormat")))){f.val(o);h(f.closest(".flatpickr-input").next(".flatpickr-mobile"),o)}}if(g.length>0){if(g.val()!==""&&moment(p).isAfter(moment(g.val(),g.data("momentDateFormat")))){g.val(o);h(g.closest(".flatpickr-input").next(".flatpickr-mobile"),o)}}j.val(o)};i.flatpickr(m);j.on("keyup",function(k){if(k.keyCode===13){j.closest("form").submit()}})})},ajaxComplete:function(){this.initFlatPickr()}};b(document).ready(function(){a.init()})})(jQuery);