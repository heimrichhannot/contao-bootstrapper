(function(a){var b={init:function(){this.initFlatPickr(),a(document).ajaxComplete(a.proxy(this.ajaxComplete,this))},initFlatPickr:function(){var b={allowInput:!0,locale:a('html').attr('lang'),time_24hr:!0};a('.datepicker, .timepicker').each(function(){function c(a){var b;return b=a.hasClass('datimepicker')?'YYYY-MM-DDTHH:mm':a.hasClass('datepicker')?'YYYY-MM-DD':'HH:mm',b}function d(a,b){a.val(moment(b,h.iso8601Format||h.momentDateFormat).format(c(e)))}var e=a(this),f=e.closest('form'),g=e.find('input'),h=g.data(),i=f.find(h.linkedStart),j=f.find(h.linkedEnd),l=a.extend({},flatpickr.defaultConfig,b);for(var m in l.defaultDate=g.val(),h)h.hasOwnProperty(m)&&(l[m]=h[m]);l.onReady=function(){var a=e.find('input:not(.flatpickr-mobile)').val();''!==a&&d(e.siblings('.flatpickr-mobile'),a)},l.onChange=function(a,b){var c=a[0];0<i.length&&''!==i.val()&&moment(c).isBefore(moment(i.val(),i.data('iso8601Format')||i.data('momentDateFormat')))&&(i.val(b),d(i.closest('.flatpickr-input').next('.flatpickr-mobile'),b)),0<j.length&&''!==j.val()&&moment(c).isAfter(moment(j.val(),j.data('iso8601Format')||j.data('momentDateFormat')))&&(j.val(b),d(j.closest('.flatpickr-input').next('.flatpickr-mobile'),b)),g.val(b)},e.flatpickr(l),g.on('keyup',function(a){13===a.keyCode&&g.closest('form').submit()})})},ajaxComplete:function(){this.initFlatPickr()}};a(document).ready(function(){b.init()})})(jQuery);